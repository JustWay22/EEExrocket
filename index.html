<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Игра - Краш</title>
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>
<style>
/* Экран загрузки */
.loading-screen {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: linear-gradient(45deg, #1a1a1a 0%, #2d1a00 25%, #1a1a1a 50%, #2d1a00 75%, #1a1a1a 100%);
background-size: 400% 400%;
animation: gradientShift 8s ease infinite;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
z-index: 10000;
color: white;
}

.loading-logo {
width: 150px;
height: 150px;
margin-bottom: 2rem;
background: url('https://i.postimg.cc/fy0njhGK/fsdecdvfc.png') center/contain no-repeat;
}

.loading-rocket {
width: 80px;
height: 80px;
font-size: 60px;
margin-bottom: 2rem;
animation: rocketBounce 2s ease-in-out infinite;
}

@keyframes rocketBounce {
0%, 100% { transform: translateY(0px) rotate(0deg); }
50% { transform: translateY(-20px) rotate(5deg); }
}

.loading-progress {
width: 300px;
height: 8px;
background: rgba(255, 255, 255, 0.2);
border-radius: 4px;
overflow: hidden;
margin-bottom: 1rem;
}

.loading-progress-bar {
height: 100%;
background: linear-gradient(90deg, #ff8c00, #ffd700);
border-radius: 4px;
transition: width 0.3s ease;
box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.loading-text {
font-size: 1.5rem;
font-weight: bold;
color: #ffd700;
margin-bottom: 0.5rem;
}

.loading-subtext {
font-size: 1rem;
color: #aaa;
text-align: center;
}

/* Кнопка переключения языка - ПЕРЕНЕСЕНА В ЛЕВЫЙ НИЖНИЙ УГОЛ */
.language-switcher {
position: fixed;
bottom: 15px;
left: 15px;
z-index: 1002;
display: flex;
gap: 5px;
}

.language-btn {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border: 2px solid transparent;
border-radius: 8px;
color: #000;
width: 45px;
height: 30px;
font-size: 12px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
}

.language-btn:hover {
transform: scale(1.05);
box-shadow: 0 4px 12px rgba(255, 215, 0, 0.6);
}

.language-btn.active {
border-color: #fff;
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.8);
}

:root {
--bg-primary: #1a1a1a;
--bg-secondary: #2d1a00;
--bg-panel: rgba(25, 25, 35, 0.9);
--bg-card: rgba(40, 40, 50, 0.8);
--border-color: rgba(255, 255, 255, 0.1);
--text-primary: white;
--text-secondary: #aaa;
--accent-color: #ffd700;
--accent-orange: #ff8c00;
--game-glow-color: #ffd700; /* Цвет подсветки по умолчанию */
}

[data-theme="red"] {
--bg-primary: #2d1a1a;
--bg-secondary: #3d1a1a;
--bg-panel: rgba(45, 25, 25, 0.9);
--bg-card: rgba(60, 30, 30, 0.8);
--border-color: rgba(255, 100, 100, 0.2);
--accent-color: #ff6b6b;
--accent-orange: #ff4757;
}

[data-theme="white"] {
--bg-primary: #f5f5f5;
--bg-secondary: #e0e0e0;
--bg-panel: rgba(255, 255, 255, 0.95);
--bg-card: rgba(240, 240, 240, 0.9);
--border-color: rgba(0, 0, 0, 0.1);
--text-primary: #333;
--text-secondary: #666;
--accent-color: #2196f3;
--accent-orange: #ff9800;
}

* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Arial', sans-serif;
}

body {
background: rgb(30, 30, 30);
perspective: 10rem;
color: var(--text-primary);
min-height: 100vh;
display: flex;
flex-direction: column;
align-items: center;
padding: 0;
position: relative;
overflow-x: hidden;
}

@keyframes gradientShift {
0% { background-position: 0% 50%; }
50% { background-position: 100% 50%; }
100% { background-position: 0% 50%; }
}

@keyframes twinkle {
0%, 100% { opacity: 0.3; }
50% { opacity: 1; }
}

/* Звездное небо */
.starfield {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
z-index: 1;
overflow: hidden;
}

.star {
position: absolute;
background: white;
border-radius: 50%;
animation: starTwinkle 3s infinite;
}

.star.small { 
width: 2px; 
height: 2px; 
animation-duration: 2s;
}

.star.medium { 
width: 3px; 
height: 3px; 
animation-duration: 2.5s;
box-shadow: 0 0 6px rgba(255, 255, 255, 0.8);
}

.star.large { 
width: 4px; 
height: 4px; 
animation-duration: 3.5s;
box-shadow: 0 0 10px rgba(255, 255, 255, 0.9);
}

/* Падающие звезды */
.shooting-star {
position: absolute;
width: 2px;
height: 2px;
background: linear-gradient(45deg, transparent, #fff, transparent);
border-radius: 50%;
animation: shootingStar 3s linear infinite;
}

.shooting-star::before {
content: '';
position: absolute;
width: 50px;
height: 1px;
background: linear-gradient(90deg, #fff, transparent);
top: 50%;
left: -50px;
transform: translateY(-50%);
}

@keyframes starTwinkle {
0%, 100% { opacity: 0.3; transform: scale(1); }
50% { opacity: 1; transform: scale(1.2); }
}

@keyframes shootingStar {
0% {
  transform: translateX(-100px) translateY(-100px);
  opacity: 0;
}
10% {
  opacity: 1;
}
90% {
  opacity: 1;
}
100% {
  transform: translateX(calc(100vw + 100px)) translateY(calc(100vh + 100px));
  opacity: 0;
}
}

/* ВИДЕО ФОН ИГРЫ */
.game-video-background {
position: absolute;
top: -100px;
left: -100px;
width: calc(100% + 200px);
height: calc(100% + 200px);
z-index: 0;
opacity: 0;
transition: opacity 1s ease;
pointer-events: none;
overflow: hidden;
border-radius: 25px;
}

.game-video-background.playing {
opacity: 0.8;
}

.game-video-background.sliding-down {
animation: videoSlideDown 2s ease-out forwards;
}

@keyframes videoSlideDown {
0% {
  transform: translateY(0);
  opacity: 0.8;
}
100% {
  transform: translateY(200px);
  opacity: 0;
}
}

.background-video {
width: 100%;
height: 100%;
object-fit: cover;
filter: brightness(0.7) saturate(1.2);
}

/* Космические объекты */
.space-object {
position: absolute;
opacity: 0;
z-index: 2;
transition: opacity 1s ease;
}

.space-object.visible {
opacity: 0.8;
}

.game-moon {
top: 15%;
left: 10%;
width: 180px;
height: 180px;
background: radial-gradient(circle at 30% 30%, #fff, #ddd);
border-radius: 50%;
box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
}

.game-earth {
position: absolute;
top: 0;
left: 0;
width: 180px;
height: 180px;
background-image: url('https://i.postimg.cc/T2WctdX7/2025-08-10-003354-no-bg-preview-carve-photos.png');
background-size: cover;
background-position: center;
border-radius: 50%;
animation: earthRotate 20s linear infinite;
z-index: -1;
opacity: 0.7;
}

@keyframes earthRotate {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* АНИМАЦИЯ КОМЕТ - ПОЛЕТ ПОД НАКЛОНОМ ВНИЗ БЕЗ ВРАЩЕНИЯ */
.comet {
position: absolute;
width: 60px;
height: 60px;
background-image: url('https://imgpng.ru/d/comet_PNG29.png');
background-size: contain;
background-repeat: no-repeat;
background-position: center;
z-index: 1;
animation: cometFlyDown 8s linear infinite;
}

@keyframes cometFlyDown {
0% {
  transform: translateX(-100px) translateY(-200px) rotate(45deg);
  opacity: 0;
}
10% {
  opacity: 1;
}
90% {
  opacity: 1;
}
100% {
  transform: translateX(calc(100vw + 100px)) translateY(calc(100vh + 200px)) rotate(45deg);
  opacity: 0;
}
}

.game-sun {
top: 15%;
left: 20%;
width: 80px;
height: 80px;
background: radial-gradient(circle at 30% 30%, #ffeb3b, #ff9800);
border-radius: 50%;
box-shadow: 0 0 30px rgba(255, 193, 7, 0.6);
filter: brightness(0.7);
}

.game-sun::before {
content: '';
position: absolute;
top: -10px;
left: -10px;
width: 100px;
height: 100px;
background: transparent;
border-radius: 50%;
box-shadow: 
  0 0 0 2px rgba(255, 193, 7, 0.3),
  0 0 0 4px rgba(255, 193, 7, 0.2),
  0 0 0 8px rgba(255, 193, 7, 0.1);
animation: sunRays 4s ease-in-out infinite;
}

@keyframes sunRays {
0%, 100% { transform: rotate(0deg) scale(1); }
50% { transform: rotate(90deg) scale(1.1); }
}

.game-blackhole {
top: 20%;
left: 25%;
width: 100px;
height: 100px;
background: radial-gradient(circle, #000 30%, #1a1a1a 60%, #333 100%);
border-radius: 50%;
animation: blackholeDistort 3s ease-in-out infinite;
box-shadow: 
  inset 0 0 30px #000,
  0 0 50px rgba(255, 255, 255, 0.1);
}

.game-blackhole::before {
content: '';
position: absolute;
top: -20px;
left: -20px;
width: 140px;
height: 140px;
background: conic-gradient(from 0deg, transparent, #ff6b6b, transparent, #ffeb3b, transparent, #4caf50, transparent);
border-radius: 50%;
animation: blackholeRing 2s linear infinite;
z-index: -1;
}

@keyframes blackholeDistort {
0%, 100% { transform: scale(1); }
50% { transform: scale(1.05); }
}

@keyframes blackholeRing {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

.game-forest-background {
position: absolute;
bottom: -100px;
left: -50px;
width: calc(100% + 100px);
height: 250px;
background: url('https://i.postimg.cc/RFNRtZ43/cvbgfg.png') repeat-x center bottom;
background-size: auto 250px;
opacity: 0;
z-index: 0;
transition: all 1s ease;
transform: translateY(0px);
pointer-events: none;
}

.game-forest-background.visible {
opacity: 0.8;
}

.game-forest-background.moving {
animation: forestMoveDown 2s ease-out forwards;
}

@keyframes forestMoveDown {
0% { 
  transform: translateY(0px); 
  opacity: 0.8;
}
100% { 
  transform: translateY(200px); 
  opacity: 0;
}
}

/* МОБИЛЬНАЯ КНОПКА ГАМБУРГЕР */
.mobile-menu-toggle {
display: none;
position: fixed;
top: 15px;
left: 15px;
z-index: 1001;
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border: none;
border-radius: 8px;
color: #000;
width: 50px;
height: 50px;
font-size: 20px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
}

.mobile-menu-toggle:hover {
transform: scale(1.1);
box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
}

/* Левая боковая панель */
.left-sidebar {
position: fixed;
left: 0;
top: 0;
bottom: 0;
width: 320px;
background: linear-gradient(180deg, #1a1a1a 0%, #2a2a2a 100%);
border-right: 1px solid #333;
display: flex;
flex-direction: column;
padding: 0;
z-index: 999;
box-shadow: 2px 0 15px rgba(0, 0, 0, 0.7);
transition: transform 0.3s ease;
overflow-y: auto;
scrollbar-width: none;
-ms-overflow-style: none;
}

.left-sidebar::-webkit-scrollbar {
display: none;
}

.sidebar-user-profile {
background: linear-gradient(135deg, #333 0%, #444 100%);
padding: 20px;
border-bottom: 1px solid #444;
display: flex;
align-items: center;
gap: 15px;
cursor: pointer;
transition: background 0.3s ease;
position: relative;
}

.sidebar-user-profile:hover {
background: linear-gradient(135deg, #444 0%, #555 100%);
}

.user-avatar {
width: 45px;
height: 45px;
background: linear-gradient(135deg, #ff8c00, #ffd700);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 20px;
font-weight: bold;
color: #000;
}

.user-info {
flex: 1;
}

.user-name {
font-size: 14px;
font-weight: bold;
color: white;
margin-bottom: 2px;
}

.user-id {
font-size: 11px;
color: #aaa;
}

.user-next-arrow {
color: #666;
font-size: 18px;
}

/* КАРТИНКА ПРИ ВХОДЕ В АККАУНТ */
.user-login-image {
position: absolute;
top: 0;
left: -150px;
width: 120px;
height: 120px;
background-image: url('https://i.postimg.cc/59vt34PC/2025-08-24-150150.jpg');
background-size: cover;
background-position: center;
border-radius: 50%;
border: 3px solid #4caf50;
box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
opacity: 0;
transform: translateX(-50px);
transition: all 0.5s ease;
z-index: 1000;
}

.user-login-image.show {
opacity: 1;
transform: translateX(0);
}

.sidebar-bonus-section {
background: linear-gradient(135deg, #0d4a2c 0%, #0f5a35 100%);
margin: 15px;
border-radius: 10px;
padding: 15px;
display: flex;
align-items: center;
gap: 12px;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
border: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar-bonus-section:hover {
background: linear-gradient(135deg, #0f5a35 0%, #11653f 100%);
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.bonus-icon {
width: 40px;
height: 40px;
background: white;
border-radius: 8px;
display: flex;
align-items: center;
justify-content: center;
font-size: 20px;
background-image: url('https://i.postimg.cc/0QZyvcVN/2025-08-09-195905-Photoroom.png');
background-size: contain;
background-repeat: no-repeat;
background-position: center;
}

.bonus-text {
color: white;
font-size: 16px;
font-weight: bold;
}

/* ОБНОВЛЕННАЯ СЕКЦИЯ ТРЕЙДИНГА - УБРАЛ АКЦИИ, СДЕЛАЛ КНОПКУ МЕНЬШЕ И В ЦВЕТАХ КАК ДРУГИЕ */
.trading-section {
background: linear-gradient(135deg, #333 0%, #444 100%);
margin: 15px;
border-radius: 10px;
padding: 12px;
border: 1px solid rgba(255, 255, 255, 0.1);
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.trading-header {
display: flex;
align-items: center;
gap: 8px;
cursor: pointer;
transition: all 0.3s ease;
padding: 8px;
border-radius: 8px;
}

.trading-header:hover {
background: rgba(255, 255, 255, 0.1);
}

.trading-icon {
font-size: 16px;
color: var(--accent-color);
}

.trading-title {
color: white;
font-size: 12px;
font-weight: bold;
flex: 1;
}

.trading-arrow {
transition: transform 0.3s ease;
color: white;
font-size: 12px;
}

.trading-header.expanded .trading-arrow {
transform: rotate(180deg);
}

.trading-list {
max-height: 0;
overflow: hidden;
transition: max-height 0.3s ease;
margin-top: 8px;
}

.trading-list.expanded {
max-height: 200px;
}

.crypto-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 6px 8px;
background: rgba(255, 255, 255, 0.1);
border-radius: 6px;
margin-bottom: 4px;
transition: all 0.3s ease;
cursor: pointer;
}

.crypto-item:hover {
background: rgba(255, 255, 255, 0.2);
transform: translateX(2px);
}

.crypto-info {
display: flex;
flex-direction: column;
}

.crypto-name {
color: white;
font-size: 10px;
font-weight: bold;
}

.crypto-symbol {
color: #ccc;
font-size: 8px;
}

.crypto-price {
color: white;
font-size: 9px;
font-weight: bold;
}

.price-change {
font-size: 8px;
padding: 1px 3px;
border-radius: 3px;
}

.price-change.positive {
background: rgba(34, 197, 94, 0.3);
color: #22c55e;
}

.price-change.negative {
background: rgba(239, 68, 68, 0.3);
color: #ef4444;
}

/* СЕКЦИЯ ПОСЛЕДНИХ ВЫИГРЫШЕЙ */
.recent-wins-section {
margin: 15px;
border-radius: 10px;
padding: 15px;
background: linear-gradient(135deg, #7c2d12 0%, #ea580c 100%);
border: 1px solid rgba(234, 88, 12, 0.3);
}

.recent-wins-header {
display: flex;
align-items: center;
gap: 10px;
margin-bottom: 15px;
}

.wins-icon {
font-size: 20px;
color: white;
}

.wins-title {
color: white;
font-size: 14px;
font-weight: bold;
}

.wins-list {
max-height: 150px;
overflow-y: auto;
scrollbar-width: none;
-ms-overflow-style: none;
}

.wins-list::-webkit-scrollbar {
display: none;
}

.win-item {
display: flex;
align-items: center;
gap: 10px;
padding: 8px;
background: rgba(255, 255, 255, 0.1);
border-radius: 6px;
margin-bottom: 5px;
animation: slideInWin 0.5s ease;
}

@keyframes slideInWin {
from {
  opacity: 0;
  transform: translateX(-10px);
}
to {
  opacity: 1;
  transform: translateX(0);
}
}

.game-logo {
width: 24px;
height: 24px;
background-size: contain;
background-repeat: no-repeat;
background-position: center;
border-radius: 4px;
}

.game-logo.crash {
background-image: url('https://i.postimg.cc/bYTtYRZk/2025-08-09-195739-Photoroom.png');
}

.game-logo.miner {
background-image: url('https://imgpng.ru/d/bomb_PNG35.png');
}

.game-logo.slots {
background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
}

.win-details {
flex: 1;
}

.win-player {
color: white;
font-size: 10px;
font-weight: bold;
}

.win-amount {
color: #ffd700;
font-size: 11px;
font-weight: bold;
}

.win-game {
color: #ccc;
font-size: 9px;
}

.sidebar-games-section {
padding: 0 15px;
}

.games-section-header {
display: flex;
align-items: center;
gap: 10px;
padding: 15px 10px;
color: #ccc;
font-size: 14px;
font-weight: bold;
text-transform: uppercase;
cursor: pointer;
transition: color 0.3s ease;
}

.games-section-header:hover {
color: white;
}

.games-icon {
font-size: 16px;
}

.games-arrow {
margin-left: auto;
transition: transform 0.3s ease;
}

.games-section-header.expanded .games-arrow {
transform: rotate(180deg);
}

.games-list {
max-height: 0;
overflow: hidden;
transition: max-height 0.3s ease;
}

.games-list.expanded {
max-height: 300px;
}

.game-item {
display: flex;
align-items: center;
gap: 12px;
padding: 12px 20px;
color: #ccc;
font-size: 13px;
font-weight: 500;
cursor: pointer;
transition: all 0.3s ease;
border-radius: 8px;
margin: 2px 0;
background: rgba(255, 255, 255, 0.05);
border: 1px solid rgba(255, 255, 255, 0.1);
}

.game-item:hover {
background: rgba(255, 255, 255, 0.1);
color: white;
transform: translateX(5px);
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.game-item.active {
background: linear-gradient(135deg, var(--accent-orange), var(--accent-color));
color: #000;
font-weight: bold;
box-shadow: 0 4px 15px rgba(255, 140, 0, 0.4);
}

.game-item-icon {
font-size: 16px;
width: 20px;
height: 20px;
text-align: center;
display: flex;
align-items: center;
justify-content: center;
background-size: contain;
background-repeat: no-repeat;
background-position: center;
}

.crash-icon {
background-image: url('https://i.postimg.cc/bYTtYRZk/2025-08-09-195739-Photoroom.png');
}

.miner-icon {
background-image: url('https://imgpng.ru/d/bomb_PNG35.png');
}

.bonuses-icon {
background-image: url('https://i.postimg.cc/0QZyvcVN/2025-08-09-195905-Photoroom.png');
}

.slots-icon {
font-size: 18px;
}

.game-item-arrow {
margin-left: auto;
font-size: 12px;
opacity: 0.6;
}

.sidebar-divider {
height: 1px;
background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
margin: 15px 0;
}

.sidebar-bottom-section {
margin-top: auto;
padding: 15px;
}

.sidebar-menu-item {
display: flex;
align-items: center;
gap: 12px;
padding: 12px 15px;
color: #ccc;
font-size: 13px;
font-weight: 500;
cursor: pointer;
transition: all 0.3s ease;
border-radius: 8px;
margin: 4px 0;
position: relative;
background: rgba(255, 255, 255, 0.05);
border: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar-menu-item:hover {
background: rgba(255, 255, 255, 0.1);
color: white;
transform: translateX(5px);
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.sidebar-menu-item.bonuses {
justify-content: space-between;
}

.menu-item-icon {
font-size: 16px;
width: 20px;
height: 20px;
text-align: center;
display: flex;
align-items: center;
justify-content: center;
background-size: contain;
background-repeat: no-repeat;
background-position: center;
}

.bonuses-menu-icon {
background-image: url('https://i.postimg.cc/0QZyvcVN/2025-08-09-195905-Photoroom.png');
}

.menu-item-badge {
background: #ff1744;
color: white;
border-radius: 50%;
width: 18px;
height: 18px;
display: flex;
align-items: center;
justify-content: center;
font-size: 11px;
font-weight: bold;
}

.menu-item-new-badge {
background: #2196f3;
color: white;
border-radius: 12px;
padding: 2px 8px;
font-size: 10px;
font-weight: bold;
text-transform: uppercase;
}

.sidebar-logo {
padding: 20px 15px;
text-align: center;
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar-logo-text {
font-size: 24px;
font-weight: bold;
color: white;
}

.sidebar-logo-text .logo-x {
color: var(--accent-orange);
}

.windows-app-section {
background: linear-gradient(135deg, #1e3a5f 0%, #2a4d73 100%);
margin: 15px;
border-radius: 10px;
padding: 15px;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
border: 1px solid rgba(255, 255, 255, 0.1);
}

.windows-app-section:hover {
background: linear-gradient(135deg, #2a4d73 0%, #356687 100%);
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.windows-app-header {
display: flex;
align-items: center;
gap: 12px;
margin-bottom: 8px;
}

.windows-app-icon {
width: 30px;
height: 30px;
background: #2196f3;
border-radius: 6px;
display: flex;
align-items: center;
justify-content: center;
color: white;
font-size: 16px;
}

.windows-app-title {
color: white;
font-size: 13px;
font-weight: bold;
}

.windows-app-arrow {
margin-left: auto;
color: #ccc;
font-size: 16px;
}

.windows-app-subtitle {
color: #aaa;
font-size: 11px;
line-height: 1.3;
margin-left: 42px;
}

.sidebar-social-section {
padding: 15px;
border-top: 1px solid #333;
}

.social-links {
display: flex;
justify-content: space-around;
align-items: center;
gap: 10px;
}

.social-link {
width: 45px;
height: 45px;
border-radius: 8px;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
text-decoration: none;
font-size: 20px;
position: relative;
overflow: hidden;
}

.social-link.instagram {
background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
color: white;
}

.social-link.telegram {
background: #0088cc;
color: white;
}

.social-link.threads {
background: #000;
color: white;
border: 1px solid #333;
}

.social-link.more {
background: #333;
color: #ccc;
border: 1px solid #555;
font-size: 14px;
}

.social-link:hover {
transform: translateY(-2px) scale(1.05);
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

/* Стили для изображений в социальных ссылках */
.social-link img {
width: 30px;
height: 30px;
object-fit: contain;
border-radius: 4px;
}

.sidebar-support {
background: linear-gradient(135deg, #333 0%, #444 100%);
margin: 15px;
border-radius: 10px;
padding: 15px;
display: flex;
align-items: center;
gap: 12px;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
border: 1px solid rgba(255, 255, 255, 0.1);
}

.sidebar-support:hover {
background: linear-gradient(135deg, #444 0%, #555 100%);
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.support-icon {
font-size: 20px;
color: var(--accent-color);
width: 20px;
height: 20px;
background-image: url('https://cdn-icons-png.flaticon.com/512/78/78925.png');
background-size: contain;
background-repeat: no-repeat;
background-position: center;
}

.support-text {
color: white;
font-size: 13px;
font-weight: 500;
}

.support-24-7 {
background: #2196f3;
color: white;
border-radius: 12px;
padding: 2px 8px;
font-size: 10px;
font-weight: bold;
margin-left: auto;
}

/* Верхняя панель */
.top-header {
position: fixed;
top: 0;
left: 320px;
right: 0;
background: linear-gradient(135deg, var(--bg-panel) 0%, var(--bg-card) 100%);
height: 60px;
display: flex;
align-items: center;
justify-content: space-between;
padding: 0 30px;
z-index: 1000;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
border-bottom: 1px solid var(--border-color);
}

.theme-switcher {
display: flex;
gap: 10px;
align-items: center;
}

.theme-btn {
width: 30px;
height: 30px;
border-radius: 50%;
border: 2px solid transparent;
cursor: pointer;
transition: all 0.3s ease;
}

.theme-btn.black {
background: #1a1a1a;
}

.theme-btn.red {
background: #ff6b6b;
}

.theme-btn.white {
background: #ffffff;
}

.theme-btn.active {
border-color: var(--accent-color);
transform: scale(1.2);
}

.theme-btn:hover {
transform: scale(1.1);
}

.top-left-section {
display: flex;
align-items: center;
gap: 20px;
}

.top-logo {
display: flex;
align-items: center;
font-size: 28px;
font-weight: bold;
width: 60px;
height: 60px;
background: url('https://i.postimg.cc/fy0njhGK/fsdecdvfc.png') center/contain no-repeat;
}

.top-right-section {
display: flex;
align-items: center;
gap: 20px;
}

.top-balance-section {
background: var(--bg-card);
border-radius: 15px;
padding: 8px 15px;
text-align: center;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
display: flex;
align-items: center;
gap: 15px;
border: 1px solid var(--border-color);
position: relative;
cursor: pointer;
}

.top-balance-info {
display: flex;
flex-direction: column;
align-items: center;
}

.top-balance-title {
font-size: 12px;
color: var(--text-secondary);
margin-bottom: 2px;
}

.top-balance-amount {
font-size: 18px;
font-weight: bold;
color: var(--accent-color);
}

.currency-dropdown {
position: absolute;
top: 100%;
right: 0;
background: var(--bg-panel);
border: 1px solid var(--border-color);
border-radius: 10px;
padding: 10px;
min-width: 200px;
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
z-index: 1001;
display: none;
}

.currency-dropdown.active {
display: block;
}

.currency-selector {
display: flex;
gap: 8px;
margin-bottom: 15px;
flex-wrap: wrap;
}

.currency-btn {
background: var(--bg-card);
border: 1px solid var(--border-color);
border-radius: 8px;
color: var(--text-primary);
padding: 6px 12px;
font-size: 12px;
cursor: pointer;
transition: all 0.3s ease;
}

.currency-btn.active {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
color: #000;
border-color: var(--accent-color);
}

.currency-btn:hover {
background: var(--bg-panel);
transform: translateY(-1px);
}

.balance-details {
border-top: 1px solid var(--border-color);
padding-top: 10px;
}

.balance-details-title {
font-size: 12px;
color: var(--text-secondary);
margin-bottom: 8px;
text-align: center;
}

.balance-item {
display: flex;
justify-content: space-between;
align-items: center;
padding: 4px 0;
font-size: 12px;
}

.balance-currency {
color: var(--text-secondary);
}

.balance-value {
color: var(--accent-color);
font-weight: bold;
}

.top-action-buttons {
display: flex;
gap: 8px;
}

.top-action-btn {
border: none;
border-radius: 6px;
color: white;
padding: 8px 16px;
font-size: 12px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
background: linear-gradient(135deg, #006957 0%, #007f66 100%);
min-height: 44px;
}

.top-action-btn:hover {
transform: translateY(-1px);
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
}

.refresh-balance-btn {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border: none;
border-radius: 50%;
color: #000;
width: 30px;
height: 30px;
font-size: 14px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 2px 8px rgba(255, 215, 0, 0.4);
display: flex;
align-items: center;
justify-content: center;
}

.refresh-balance-btn:hover {
transform: translateY(-1px) rotate(180deg);
box-shadow: 0 4px 12px rgba(255, 215, 0, 0.6);
}

.top-login-section {
background: var(--bg-card);
border-radius: 15px;
padding: 8px 15px;
text-align: center;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
display: flex;
align-items: center;
gap: 10px;
border: 1px solid var(--border-color);
}

/* ЗЕЛЕНАЯ КНОПКА ВХОДА */
.top-login-btn {
background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);
border: none;
border-radius: 8px;
color: white;
padding: 8px 16px;
font-size: 14px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 10px rgba(76, 175, 80, 0.3);
min-height: 44px;
}

.top-login-btn:hover {
transform: translateY(-2px);
background: linear-gradient(135deg, #66bb6a 0%, #81c784 100%);
box-shadow: 0 6px 15px rgba(76, 175, 80, 0.4);
}

.top-user-info {
display: none;
align-items: center;
gap: 10px;
}

.top-username {
font-size: 14px;
font-weight: bold;
color: var(--accent-color);
}

.history-btn {
background: linear-gradient(135deg, #4a90e2 0%, #357abd 100%);
border: 2px solid #ffffff;
color: white;
width: 20px;
height: 20px;
border-radius: 50%;
cursor: pointer;
font-size: 12px;
font-weight: bold;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
box-shadow: 0 2px 8px rgba(74, 144, 226, 0.4);
position: relative;
font-family: 'Times New Roman', serif;
min-width: 44px;
min-height: 44px;
}

.history-btn:hover {
transform: translateY(-2px) scale(1.1);
box-shadow: 0 4px 15px rgba(74, 144, 226, 0.6);
background: linear-gradient(135deg, #5ba0f2 0%, #4080cd 100%);
}

/* Основной контейнер */
.main-container {
display: flex;
gap: 20px;
margin-top: 80px;
margin-left: 340px;
width: calc(100% - 360px);
max-width: 1400px;
padding: 0 20px;
}

/* РАСШИРЕННОЕ ОКНО С ИГРОКАМИ - УВЕЛИЧЕНА ВЫСОТА */
.players-window {
background: var(--bg-panel);
border-radius: 25px;
padding: 20px;
width: 250px;
height: calc(600px + 200px); /* Увеличена высота на 200px */
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
border: 2px solid var(--border-color);
position: relative;
overflow: hidden;
display: flex;
flex-direction: column;
gap: 10px;
z-index: 100;
}

.players-container {
flex: 1;
overflow-y: auto;
display: flex;
flex-direction: column;
gap: 10px;
position: relative;
/* УБИРАЕМ ПОЛЗУНОК */
scrollbar-width: none;
-ms-overflow-style: none;
}

.players-container::-webkit-scrollbar {
display: none;
}

/* ЗАТЕМНЕНИЕ ВНИЗУ КОНТЕЙНЕРА ИГРОКОВ */
.players-container::after {
content: '';
position: absolute;
bottom: 0;
left: 0;
right: 0;
height: 30px;
background: linear-gradient(transparent, var(--bg-panel));
pointer-events: none;
z-index: 1;
}

.players-info {
background: var(--bg-card);
border-radius: 10px;
padding: 12px 15px;
margin-bottom: 15px;
display: flex;
justify-content: space-between;
align-items: center;
border: 1px solid var(--border-color);
}

.players-count {
display: flex;
align-items: center;
gap: 8px;
font-size: 14px;
font-weight: bold;
color: var(--text-primary);
}

.green-dot {
width: 8px;
height: 8px;
background: #4caf50;
border-radius: 50%;
animation: blink 1.5s infinite;
}

@keyframes blink {
0%, 50% { opacity: 1; }
51%, 100% { opacity: 0.3; }
}

.total-bets {
font-size: 14px;
font-weight: bold;
color: var(--accent-color);
}

.player-card {
background: var(--bg-card);
border-radius: 10px;
padding: 10px;
transition: all 0.3s ease;
opacity: 0;
transform: translateY(20px);
animation: slideIn 0.5s ease forwards;
}

@keyframes slideIn {
to {
  opacity: 1;
  transform: translateY(0);
}
}

.player-card.current-player {
border: 2px solid var(--accent-color);
background: var(--bg-panel);
}

.player-card.won {
background: rgba(39, 174, 96, 0.2);
border: 1px solid rgba(39, 174, 96, 0.4);
}

.player-card.lost {
background: rgba(192, 57, 43, 0.3);
border: 1px solid rgba(192, 57, 43, 0.5);
}

.player-name {
font-weight: bold;
font-size: 14px;
margin-bottom: 5px;
}

.player-bet {
font-size: 12px;
color: var(--text-secondary);
}

.player-win {
font-size: 12px;
color: #2ecc71;
font-weight: bold;
margin-top: 5px;
}

/* ЕДИНОЕ БОЛЬШОЕ ОКНО С ОБНОВЛЕННОЙ СТРУКТУРОЙ И ВНУТРЕННИМ СВЕЧЕНИЕМ */
.unified-window {
background: var(--bg-panel);
border-radius: 25px;
padding: 30px;
width: 100%;
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
border: 2px solid var(--border-color);
position: relative;
overflow: hidden;
display: grid;
grid-template-columns: 1fr 300px;
gap: 30px;
min-height: 600px;
z-index: 100;
/* ДИНАМИЧЕСКАЯ ПОДСВЕТКА ОКНА */
transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

/* КЛАССЫ ДЛЯ ЦВЕТНОЙ ПОДСВЕТКИ В ЗАВИСИМОСТИ ОТ МНОЖИТЕЛЯ */
.unified-window.glow-yellow {
border-color: #ffeb3b;
box-shadow: 
  0 15px 40px rgba(0, 0, 0, 0.6), 
  0 0 30px rgba(255, 235, 59, 0.5),
  inset 0 0 50px rgba(255, 235, 59, 0.1);
}

.unified-window.glow-purple {
border-color: #9c27b0;
box-shadow: 
  0 15px 40px rgba(0, 0, 0, 0.6), 
  0 0 30px rgba(156, 39, 176, 0.5),
  inset 0 0 50px rgba(156, 39, 176, 0.1);
}

.unified-window.glow-blue {
border-color: #03a9f4;
box-shadow: 
  0 15px 40px rgba(0, 0, 0, 0.6), 
  0 0 30px rgba(3, 169, 244, 0.5),
  inset 0 0 50px rgba(3, 169, 244, 0.1);
}

.unified-window.glow-white {
border-color: #ffffff;
box-shadow: 
  0 15px 40px rgba(0, 0, 0, 0.6), 
  0 0 30px rgba(255, 255, 255, 0.5),
  inset 0 0 50px rgba(255, 255, 255, 0.1);
}

.game-section {
display: flex;
flex-direction: column;
position: relative;
overflow: hidden;
}

.game-section .starfield {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
z-index: 1;
}

.in-game-multipliers-history {
position: absolute;
top: 0;
left: 0;
right: 0;
background: var(--bg-card);
border-radius: 10px;
padding: 8px 15px;
box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
border: 1px solid var(--border-color);
backdrop-filter: blur(5px);
z-index: 100;
}

.in-game-history-title {
text-align: center;
font-size: 10px;
margin-bottom: 6px;
color: var(--text-secondary);
}

.in-game-history-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(30px, 1fr));
gap: 4px;
max-height: 40px;
overflow-y: auto;
}

.in-game-history-grid::-webkit-scrollbar {
display: none;
}

.in-game-history-grid {
scrollbar-width: none;
-ms-overflow-style: none;
}

.in-game-history-item {
background: var(--bg-card);
border-radius: 3px;
padding: 2px;
text-align: center;
font-size: 8px;
font-weight: bold;
color: var(--text-primary);
border: 1px solid transparent;
transition: all 0.3s ease;
}

.in-game-history-item.green {
background: linear-gradient(135deg, #27ae60, #2ecc71);
border-color: #27ae60;
}

.in-game-history-item.purple {
background: linear-gradient(135deg, #8e44ad, #9b59b6);
border-color: #8e44ad;
}

.in-game-history-item.orange {
background: linear-gradient(135deg, #e67e22, #f39c12);
border-color: #e67e22;
}

.in-game-history-item.red {
background: linear-gradient(135deg, #c0392b, #e74c3c);
border-color: #c0392b;
}

/* ГЛАВНОЕ ИГРОВОЕ ПОЛЕ С ОБНОВЛЕННОЙ СТРУКТУРОЙ */
.game-main-area {
flex: 1;
display: grid;
grid-template-rows: auto 1fr auto auto;
gap: 20px;
margin-top: 80px;
position: relative;
z-index: 10;
}

.multiplier-container {
text-align: center;
z-index: 100;
position: relative;
}

.multiplier-label {
font-size: 18px;
margin-bottom: 10px;
color: var(--text-secondary);
}

.multiplier {
background: var(--bg-card);
border: 2px solid rgba(100, 100, 150, 0.3);
border-radius: 12px;
padding: 12px 30px;
font-size: 48px;
font-weight: bold;
color: var(--accent-color);
text-align: center;
min-width: 180px;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
display: inline-block;
position: relative;
z-index: 100;
}

.rocket-container {
position: relative;
height: 280px;
width: 100%;
display: flex;
justify-content: center;
align-items: center;
z-index: 5;
}

#rocket-3d-wrapper {
pointer-events: none;
position: relative;
z-index: 0;
}

.refueling-container {
display: none;
flex-direction: column;
align-items: center;
justify-content: center;
height: 100%;
text-align: center;
z-index: 10;
position: relative;
}

.refueling-rocket-icon {
width: 80px;
height: 80px;
margin-bottom: 20px;
animation: float 2s ease-in-out infinite;
}

.refueling-text {
font-size: 24px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 30px;
text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.progress-bar-container {
width: 200px;
height: 20px;
background: rgba(255, 255, 255, 0.1);
border-radius: 10px;
overflow: hidden;
position: relative;
}

.progress-bar {
height: 100%;
background: linear-gradient(90deg, var(--accent-orange), var(--accent-color));
width: 0%;
transition: width 0.1s ease;
border-radius: 10px;
box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

/* ОБНОВЛЕННАЯ СТРУКТУРА - ОДНО ОКНО ДЛЯ СТАВОК */
.unified-bet-container {
background: var(--bg-card);
border-radius: 15px;
padding: 25px;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
border: 1px solid var(--border-color);
text-align: center;
position: relative;
z-index: 100;
display: grid;
grid-template-columns: 1fr 1fr;
gap: 20px;
}

.bet-section {
display: flex;
flex-direction: column;
gap: 15px;
}

.bet-section-title {
font-size: 16px;
font-weight: bold;
color: var(--text-primary);
margin-bottom: 10px;
}

.bet-input-wrapper {
position: relative;
display: inline-block;
width: 100%;
max-width: 200px;
margin: 0 auto 15px;
z-index: 100;
}

.bet-input {
background: var(--bg-panel);
border: 2px solid var(--accent-orange);
border-radius: 12px;
color: var(--text-primary);
font-size: 18px;
padding: 12px;
width: 100%;
text-align: center;
outline: none;
transition: all 0.3s ease;
position: relative;
z-index: 100;
min-height: 44px;
}

.bet-input:focus {
border-color: var(--accent-color);
box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
}

.bet-quick-buttons {
display: flex;
justify-content: center;
gap: 6px;
margin-bottom: 15px;
z-index: 100;
position: relative;
}

.bet-quick-btn {
background: #2a2a2a;
border: 1px solid #444;
border-radius: 6px;
color: var(--text-primary);
padding: 10px 15px;
font-size: 12px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
position: relative;
z-index: 100;
min-height: 44px;
}

.bet-quick-btn:hover {
background: #3a3a3a;
border-color: var(--accent-color);
transform: translateY(-1px);
}

/* АВТО КЕШАУТ В КАЖДОЙ СЕКЦИИ */
.auto-cashout-container {
display: flex;
align-items: center;
justify-content: center;
gap: 10px;
margin-bottom: 15px;
z-index: 100;
position: relative;
}

.auto-cashout-label {
font-size: 12px;
color: var(--text-primary);
font-weight: bold;
}

.toggle-switch {
position: relative;
width: 50px;
height: 24px;
background: #333;
border-radius: 12px;
cursor: pointer;
transition: all 0.3s ease;
border: 2px solid #555;
z-index: 100;
}

.toggle-switch.active {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border-color: var(--accent-color);
box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.toggle-slider {
position: absolute;
top: 1px;
left: 1px;
width: 18px;
height: 18px;
background: white;
border-radius: 50%;
transition: all 0.3s ease;
box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

.toggle-switch.active .toggle-slider {
transform: translateX(24px);
background: #000;
}

.auto-cashout-input {
background: var(--bg-panel);
border: 2px solid #6a11cb;
border-radius: 8px;
color: var(--text-primary);
font-size: 12px;
padding: 6px;
width: 60px;
text-align: center;
outline: none;
transition: all 0.3s ease;
z-index: 100;
position: relative;
min-height: 44px;
}

.auto-cashout-input:focus {
border-color: #2575fc;
box-shadow: 0 0 10px rgba(106, 17, 203, 0.5);
}

.auto-cashout-input:disabled {
opacity: 0.5;
cursor: not-allowed;
border-color: #333;
}

.auto-cashout-input.active {
border-color: var(--accent-color);
}

.auto-cashout-input.active:focus {
border-color: var(--accent-orange);
box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

/* КНОПКИ ПОСТАВИТЬ И КЕШАУТ ПОД КАЖДОЙ СЕКЦИЕЙ */
.bet-actions {
display: flex;
flex-direction: column;
gap: 10px;
z-index: 100;
position: relative;
}

.btn {
padding: 15px 25px;
font-size: 16px;
font-weight: bold;
border-radius: 12px;
border: none;
cursor: pointer;
transition: all 0.3s ease;
min-height: 50px;
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
position: relative;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
z-index: 100;
}

.bet-btn {
background: linear-gradient(135deg, var(--accent-orange), var(--accent-color), var(--accent-orange));
background-size: 200% auto;
color: #000;
animation: shine 2s linear infinite;
}

/* СТИЛИ ДЛЯ ЗАБЛОКИРОВАННЫХ КНОПОК */
.bet-btn.disabled {
background: #666;
color: #999;
cursor: not-allowed;
opacity: 0.6;
animation: none;
transform: none !important;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.bet-btn.disabled:hover {
transform: none !important;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* СТИЛИ ДЛЯ КНОПКИ ВХОДА ВМЕСТО СТАВКИ */
.bet-btn.login-required {
background: linear-gradient(135deg, #4caf50, #66bb6a);
color: white;
animation: none;
}

.bet-btn.login-required:hover {
background: linear-gradient(135deg, #66bb6a, #81c784);
transform: translateY(-2px);
}

.take-btn {
background: linear-gradient(135deg, #ff416c, #ff4b2b);
color: white;
display: none;
}

.take-btn-amount {
font-size: 12px;
font-weight: normal;
margin-top: 2px;
opacity: 0.9;
}

.cancel-btn {
background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
color: white;
display: none;
}

.btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
}

@keyframes shine {
to {
  background-position: 200% center;
}
}

.game-status {
text-align: center;
font-size: 18px;
height: 25px;
color: var(--accent-color);
position: absolute;
bottom: 5px;
left: 50%;
transform: translateX(-50%);
z-index: 100;
}

/* CSS Ракета */
.css-rocket-container {
position: relative;
display: none;
justify-content: center;
align-items: center;
height: 100%;
width: 100%;
}

.scene {
width: 202px;
height: 380px;
background: transparent;
animation: vibration 0.2s infinite;
position: relative;
margin: auto;
top: 0;
left: 0;
right: 0;
bottom: 0;
transform: rotate(45deg);
transition: all 0.5s ease;
}

.scene.game-active {
animation: vibrationActive 0.15s infinite;
}

.scene.launching {
animation: rocketLaunch 2s ease-out forwards;
}

.scene.flying-away {
animation: rocketFlyAway 3s ease-in forwards;
}

@keyframes rocketLaunch {
0% {
  transform: rotate(45deg) translate(150px, 150px) scale(0.5);
}
100% {
  transform: rotate(45deg) translate(0px, 0px) scale(1);
}
}

@keyframes rocketFlyAway {
0% {
  transform: rotate(45deg) translate(0px, 0px) scale(1);
  opacity: 1;
}
100% {
  transform: rotate(45deg) translate(-500px, -500px) scale(0.1);
  opacity: 0;
}
}

.wing-left {
position: absolute;
z-index: 10;
height: 103px;
width: 0px;
padding: 0px;
top: 82px;
left: 16px;
transform: rotate(10deg) skew(5deg);
border-top: 21px solid transparent;
border-right: 38px solid #743388;
border-bottom: 19px solid transparent;
}

.wing-left:after {
content: "";
display: block;
position: absolute;
bottom: -50px;
height: 0px;
width: 0px;
border-top: 20px solid transparent;
border-right: 50px solid var(--bg-primary);
border-bottom: 50px solid transparent;
}

.wing-right {
position: absolute;
z-index: 10;
height: 103px;
width: 0px;
padding: 0px;
top: 62px;
right: 17px;
transform: rotate(-10deg) skew(-5deg);
border-top: 0 solid transparent;
border-right: 40px solid #743388;
border-bottom: 15px solid transparent;
}

.wing-right:after {
content: "";
display: block;
position: absolute;
top: -33px;
left: -19px;
height: 0px;
width: 0px;
border-top: 36px solid transparent;
border-right: 68px solid var(--bg-primary);
border-bottom: 45px solid transparent;
}

.exhaust {
position: absolute;
z-index: 20;
top: 156px;
left: 51px;
height: 0px;
width: 101px;
border-top: 23px solid #743388;
border-left: 9px solid transparent;
border-right: 8px solid transparent;
}

.capsule {
position: absolute;
z-index: 30;
background: transparent;
left: 46px;
top: 5px;
width: 111px;
height: 156px;
opacity: 1;
overflow: hidden;
}

.capsule .base {
position: absolute;
background: #ccc;
width: 112px;
height: 94px;
top: 62px;
left: 0px;
background: linear-gradient(to right, #F3F3F3 0%, #F3F3F3 65%, #E0E0E0 65%, #E0E0E0 100%);
}

.capsule .top {
position: absolute;
height: 0px;
width: 0px;
padding: 0px;
left: 0;
border-left: 56px solid transparent;
border-right: 56px solid transparent;
border-bottom: 62px solid #F3F3F3;
}

.capsule .top:after {
content: "";
position: absolute;
height: 0px;
width: 0px;
border-left: 0px solid transparent;
border-right: 156px solid transparent;
border-bottom: 84px solid var(--bg-primary);
transform: skew(42deg);
top: -14px;
left: 25px;
z-index: 50;
}

.capsule .top .shadow {
position: absolute;
height: 0px;
width: 0px;
border-left: 20px solid transparent;
border-right: 80px solid transparent;
border-bottom: 90px solid #E0E0E0;
transform: skew(26deg);
top: -20px;
left: -3px;
z-index: 40;
}

.window-big {
width: 70px;
height: 70px;
background: #743388;
border-radius: 8em;
position: absolute;
z-index: 40;
top: 57px;
left: 66px;
}

.window-small {
width: 44px;
height: 44px;
background: #272425;
border-radius: 8em;
position: absolute;
z-index: 50;
top: 70px;
left: 79px;
}

.propulsed__slow {
animation: fire_propulsion 0.3s ease-in infinite;
}

.main_fire {
animation: main_fire 0.1s cubic-bezier(0.175, 0.885, 0.420, 1.410) infinite;
}

.fire-1 {
position: absolute;
height: 70px;
width: 70px;
top: 169px;
transform-origin: 50% 50%;
transform: rotate(-40deg) skew(1deg, -11deg);
z-index: 10;
left: 64px;
background: linear-gradient(135deg, #EF8B32 0%, #EF8B32 50%, #E82134 50%, #E82134 100%);
animation: main_fire 0.1s cubic-bezier(0.175, 0.885, 0.420, 1.410) infinite;
}

.fire-2 {
position: absolute;
height: 55px;
width: 55px;
top: 180px;
transform-origin: 50% 50%;
transform: rotate(-33deg) skew(0deg, -30deg);
z-index: 15;
left: 58px;
background: linear-gradient(135deg, #E82134 0%, #E82134 50%, #EF8B32 50%, #EF8B32 100%);
animation: fire_propulsion 0.3s ease-in infinite;
animation-delay: 0.2s;
}

.fire-3 {
position: absolute;
height: 22px;
width: 22px;
top: 196px;
left: 58px;
transform-origin: 50% 50%;
transform: rotate(-33deg) skew(0deg, -30deg);
z-index: 20;
background: linear-gradient(135deg, #EF8B32 0%, #EF8B32 50%, #E82134 50%, #E82134 100%);
animation: fire_propulsion 0.3s ease-in infinite;
animation-delay: 0.2s;
}

.fire-4 {
position: absolute;
height: 22px;
width: 22px;
top: 200px;
transform-origin: 50% 50%;
transform: rotate(-33deg) skew(0deg, -30deg);
z-index: 20;
left: 126px;
background: linear-gradient(135deg, #E82134 0%, #E82134 50%, #EF8B32 50%, #EF8B32 100%);
animation: fire_propulsion 0.3s ease-in infinite;
}

.propulsed {
animation: dancing_fire 0.24s infinite;
}

.spark-1 {
position: absolute;
bottom: 177px;
z-index: 20;
right: 70px;
width: 12px;
height: 12px;
background: #EF8B32;
transform-origin: 50% 50%;
animation: dancing_fire 0.24s infinite;
}

.spark-2 {
position: absolute;
bottom: 147px;
z-index: 20;
left: 52px;
width: 10px;
height: 10px;
transform: rotate(45deg);
background: #EF8B32;
animation: dancing_fire 0.24s infinite;
animation-delay: 0.22s;
}

.spark-3 {
position: absolute;
bottom: 90px;
z-index: 20;
left: 109px;
width: 10px;
height: 10px;
transform: rotate(45deg);
background: #E82134;
animation: dancing_fire 0.24s infinite;
animation-delay: 0.32s;
}

.spark-4 {
position: absolute;
bottom: 20px;
left: 83px;
z-index: 20;
width: 10px;
height: 10px;
background: #EF8B32;
animation: dancing_fire 0.24s infinite;
animation-delay: 0.16s;
}

.hyperspace {
animation: hyperspace 0.4s infinite;
}

.star {
position: absolute;
width: 4px;
height: 20px;
background: #fff;
z-index: 90;
animation: hyperspace 0.4s infinite;
}

.star.star--1 {
left: 50px;
top: -10px;
animation-delay: 0.10s;
}

.star.star--2 {
right: 60px;
top: 30px;
animation-delay: 0.10s;
}

.star.star--3 {
top: 80px;
left: 25px;
animation-delay: 0.2s;
}

.star.star--4 {
top: -20px;
right: 75px;
animation-delay: 0.2s;
}

.star.star--5 {
right: 30px;
top: -60px;
animation-delay: 0.30s;
}

.star.star--6 {
right: 160px;
top: 50px;
animation-delay: 0.40s;
}

.star.star--7 {
top: 20px;
left: 75px;
animation-delay: 0.3s;
}

.star.star--8 {
top: -30px;
right: 95px;
animation-delay: 0.4s;
}

.star.star--9 {
right: 30px;
top: -60px;
animation-delay: 0.30s;
}

.star.star--10 {
right: 160px;
top: 50px;
animation-delay: 0.40s;
}

.star.star--11 {
top: 20px;
left: 75px;
animation-delay: 0.3s;
}

.star.star--12 {
top: -30px;
right: 95px;
animation-delay: 0.4s;
}

.star.star--13 {
left: -30px;
top: -60px;
animation-delay: 0.30s;
}

.star.star--14 {
right: -20px;
top: 50px;
animation-delay: 0.40s;
}

.star.star--15 {
top: 20px;
left: -75px;
animation-delay: 0.3s;
}

.star.star--16 {
top: -30px;
right: -95px;
animation-delay: 0.4s;
}

@keyframes dancing_fire {
0% {
  transform-origin: 50% 50%;
  transform: translate(0, -10px) scale(1);
  opacity: 1;
}
100% {
  transform: translate(0, 50px) scale(1);
  opacity: 0;
}
}

@keyframes fire_propulsion {
0% {
  transform: translate(0, -10px) scale(1) rotate(-33deg) skew(0deg, -30deg);
  transform-origin: 50% 50%;
  opacity: 1;
}
100% {
  transform: translate(0, 50px) scale(0.7) rotate(-33deg) skew(0deg, -30deg);
  opacity: 0;
}
}

@keyframes main_fire {
0% {
  transform: translate(0, 5px) scale(1.1, 1) rotate(-33deg) skew(0deg, -30deg);
}
100% {
  transform: translate(0, 0px) scale(1, 1.4) rotate(-33deg) skew(0deg, -30deg);
}
}

@keyframes vibration {
0% {
  transform: scale(1) translate(0, 0) rotate(45deg);
}
50% {
  transform: scale(1) translate(1px, -1px) rotate(45deg);
}
100% {
  transform: scale(1) translate(0, 0) rotate(45deg);
}
}

@keyframes vibrationActive {
0% {
  transform: scale(1) translate(0, 0) rotate(45deg);
}
25% {
  transform: scale(1.02) translate(2px, -1px) rotate(46deg);
}
50% {
  transform: scale(1.01) translate(1px, -2px) rotate(45deg);
}
75% {
  transform: scale(1.02) translate(-1px, -1px) rotate(44deg);
}
100% {
  transform: scale(1) translate(0, 0) rotate(45deg);
}
}

@keyframes hyperspace {
0% {
  transform: translate(0, -100px) scale(1, 0);
  opacity: 1;
}
100% {
  transform: translate(0, 400px) scale(1, 1);
  opacity: 0;
}
}

/* Обновленная ракета */
.rocket {
position: relative;
width: 60px;
height: 180px;
transform: translateY(30px);
animation: rocketFloat 3s ease-in-out infinite;
}

.rocket-body {
position: absolute;
width: 60px;
height: 150px;
background: linear-gradient(to right, #ff8c00, #ffa500, #ff8c00);
border-radius: 30px;
top: 0;
left: 0;
z-index: 2;
box-shadow:
  inset 0 0 20px rgba(255, 140, 0, 0.3),
  0 0 30px rgba(255, 140, 0, 0.4);
animation: rocketBodyGlow 2s ease-in-out infinite alternate;
}

.rocket-top {
position: absolute;
width: 60px;
height: 30px;
background: linear-gradient(135deg, #ff6600, #ff8c00);
border-radius: 30px 30px 0 0;
top: 0;
left: 0;
box-shadow: 0 0 15px rgba(255, 102, 0, 0.5);
animation: rocketTopPulse 1.5s ease-in-out infinite;
}

.rocket-fin-left, .rocket-fin-right {
position: absolute;
width: 20px;
height: 60px;
background: linear-gradient(135deg, #ff4500, #ff6600);
top: 90px;
box-shadow: 0 0 10px rgba(255, 69, 0, 0.4);
animation: finWobble 2.5s ease-in-out infinite;
}

.rocket-fin-left {
left: -15px;
transform: rotate(-20deg);
border-radius: 5px 0 0 5px;
animation-delay: 0.2s;
}

.rocket-fin-right {
right: -15px;
transform: rotate(20deg);
border-radius: 0 5px 5px 0;
animation-delay: 0.4s;
}

.rocket-fire {
position: absolute;
width: 30px;
height: 50px;
background: linear-gradient(to top, var(--accent-orange), #ff4500, #ff0000);
border-radius: 50% 50% 0 0;
bottom: -30px;
left: 50%;
transform: translateX(-50%);
z-index: 1;
animation: rocketFire 0.3s infinite alternate;
box-shadow:
  0 0 20px #ff4500,
  0 0 40px rgba(255, 69, 0, 0.6);
}

@keyframes rocketFloat {
0%, 100% {
  transform: translateY(30px) rotate(0deg);
}
25% {
  transform: translateY(25px) rotate(1deg);
}
50% {
  transform: translateY(20px) rotate(0deg);
}
75% {
  transform: translateY(25px) rotate(-1deg);
}
}

@keyframes rocketBodyGlow {
0% {
  box-shadow:
    inset 0 0 20px rgba(255, 140, 0, 0.3),
    0 0 30px rgba(255, 140, 0, 0.4);
}
100% {
  box-shadow:
    inset 0 0 30px rgba(255, 140, 0, 0.5),
    0 0 50px rgba(255, 140, 0, 0.7);
}
}

@keyframes rocketTopPulse {
0%, 100% {
  transform: scale(1);
  box-shadow: 0 0 15px rgba(255, 102, 0, 0.5);
}
50% {
  transform: scale(1.05);
  box-shadow: 0 0 25px rgba(255, 102, 0, 0.8);
}
}

@keyframes finWobble {
0%, 100% {
  transform: rotate(-20deg) scale(1);
}
50% {
  transform: rotate(-18deg) scale(1.02);
}
}

@keyframes rocketFire {
0% {
  height: 50px;
  box-shadow:
    0 0 20px #ff4500,
    0 0 40px rgba(255, 69, 0, 0.6);
  transform: translateX(-50%) scaleX(1);
}
100% {
  height: 65px;
  box-shadow:
    0 0 30px #ff0000,
    0 0 60px rgba(255, 0, 0, 0.8);
  transform: translateX(-50%) scaleX(1.1);
}
}

.rocket.active {
animation: rocketActive 1s ease-in-out infinite;
}

@keyframes rocketActive {
0%, 100% {
  transform: translateY(30px) rotate(0deg) scale(1);
}
25% {
  transform: translateY(20px) rotate(2deg) scale(1.02);
}
50% {
  transform: translateY(10px) rotate(0deg) scale(1.05);
}
75% {
  transform: translateY(20px) rotate(-2deg) scale(1.02);
}
}

.rocket.active .rocket-body {
animation: activeBodyGlow 0.8s ease-in-out infinite alternate;
}

@keyframes activeBodyGlow {
0% {
  box-shadow:
    inset 0 0 30px rgba(255, 140, 0, 0.5),
    0 0 50px rgba(255, 140, 0, 0.7),
    0 0 80px rgba(255, 140, 0, 0.3);
}
100% {
  box-shadow:
    inset 0 0 50px rgba(255, 140, 0, 0.8),
    0 0 80px rgba(255, 140, 0, 1),
    0 0 120px rgba(255, 140, 0, 0.5);
}
}

.rocket.active .rocket-fire {
animation: activeFire 0.2s infinite alternate;
}

@keyframes activeFire {
0% {
  height: 60px;
  box-shadow:
    0 0 30px #ff4500,
    0 0 60px rgba(255, 69, 0, 0.8),
    0 0 100px rgba(255, 0, 0, 0.4);
}
100% {
  height: 80px;
  box-shadow:
    0 0 50px #ff0000,
    0 0 100px rgba(255, 0, 0, 1),
    0 0 150px rgba(255, 0, 0, 0.6);
}
}

.win-animation {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
font-size: 24px;
font-weight: bold;
color: #4caf50;
text-shadow: 0 0 10px rgba(76, 175, 80, 0.8);
z-index: 20;
pointer-events: none;
animation: winFloat 2s ease-out forwards;
}

@keyframes winFloat {
0% {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}
100% {
  opacity: 0;
  transform: translate(-50%, -150%) scale(0.8);
}
}

/* Правая панель - бонусы */
.bonus-section {
background: var(--bg-card);
border-radius: 20px;
padding: 20px;
height: 100%;
box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
border: 1px solid var(--border-color);
display: flex;
flex-direction: column;
gap: 20px;
z-index: 100;
overflow-y: auto;
scrollbar-width: none;
-ms-overflow-style: none;
}

.bonus-section::-webkit-scrollbar {
display: none;
}

.bonus-panel-title {
font-size: 18px;
font-weight: bold;
color: var(--text-primary);
text-align: center;
text-transform: uppercase;
display: flex;
align-items: center;
justify-content: center;
gap: 8px;
}

.bonus-exclamation {
background: linear-gradient(135deg, #ff6b6b, #ee5a24);
color: white;
border: none;
border-radius: 50%;
width: 20px;
height: 20px;
font-size: 12px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
box-shadow: 0 2px 8px rgba(255, 107, 107, 0.4);
}

.bonus-exclamation:hover {
transform: scale(1.1);
box-shadow: 0 4px 12px rgba(255, 107, 107, 0.6);
}

/* КРАСИВОЕ КОЛЕСО ФОРТУНЫ */
.fortune-wheel-container {
position: relative;
width: 200px;
height: 200px;
margin: 0 auto;
perspective: 1000px;
}

.fortune-wheel {
width: 200px;
height: 200px;
border-radius: 50%;
position: relative;
overflow: hidden;
border: 6px solid transparent;
background: linear-gradient(45deg, #ffd700, #ff8c00, #ffd700);
box-shadow: 
  0 0 30px rgba(255, 215, 0, 0.8),
  inset 0 0 20px rgba(255, 140, 0, 0.3);
transition: transform 3s cubic-bezier(0.23, 1, 0.32, 1);
animation: wheelGlow 2s ease-in-out infinite alternate;
}

@keyframes wheelGlow {
0% {
  box-shadow: 
    0 0 30px rgba(255, 215, 0, 0.8),
    inset 0 0 20px rgba(255, 140, 0, 0.3);
}
100% {
  box-shadow: 
    0 0 50px rgba(255, 215, 0, 1),
    inset 0 0 30px rgba(255, 140, 0, 0.5);
}
}

.wheel-segment {
position: absolute;
width: 50%;
height: 50%;
transform-origin: 100% 100%;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
font-size: 14px;
color: white;
text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
transition: all 0.3s ease;
}

.wheel-segment:nth-child(1) {
background: linear-gradient(45deg, #ff6b6b 0%, #ee5a24 100%);
transform: rotate(0deg);
box-shadow: inset 0 0 15px rgba(255, 107, 107, 0.3);
}

.wheel-segment:nth-child(2) {
background: linear-gradient(45deg, #4ecdc4 0%, #44a08d 100%);
transform: rotate(45deg);
box-shadow: inset 0 0 15px rgba(78, 205, 196, 0.3);
}

.wheel-segment:nth-child(3) {
background: linear-gradient(45deg, #45b7d1 0%, #96c93d 100%);
transform: rotate(90deg);
box-shadow: inset 0 0 15px rgba(69, 183, 209, 0.3);
}

.wheel-segment:nth-child(4) {
background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
transform: rotate(135deg);
box-shadow: inset 0 0 15px rgba(240, 147, 251, 0.3);
}

.wheel-segment:nth-child(5) {
background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
transform: rotate(180deg);
box-shadow: inset 0 0 15px rgba(79, 172, 254, 0.3);
}

.wheel-segment:nth-child(6) {
background: linear-gradient(45deg, #43e97b 0%, #38f9d7 100%);
transform: rotate(225deg);
box-shadow: inset 0 0 15px rgba(67, 233, 123, 0.3);
}

.wheel-segment:nth-child(7) {
background: linear-gradient(45deg, #fa709a 0%, #fee140 100%);
transform: rotate(270deg);
box-shadow: inset 0 0 15px rgba(250, 112, 154, 0.3);
}

.wheel-segment:nth-child(8) {
background: linear-gradient(45deg, #a8edea 0%, #fed6e3 100%);
transform: rotate(315deg);
box-shadow: inset 0 0 15px rgba(168, 237, 234, 0.3);
}

.wheel-pointer {
position: absolute;
top: -15px;
left: 50%;
transform: translateX(-50%);
width: 0;
height: 0;
border-left: 20px solid transparent;
border-right: 20px solid transparent;
border-top: 40px solid #ffd700;
z-index: 10;
filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
animation: pointerPulse 1s ease-in-out infinite alternate;
}

@keyframes pointerPulse {
0% {
  transform: translateX(-50%) scale(1);
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
}
100% {
  transform: translateX(-50%) scale(1.1);
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.7));
}
}

.bonus-wheel-btn {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange), var(--accent-color));
background-size: 200% auto;
border: 2px solid var(--accent-orange);
border-radius: 12px;
color: #000;
padding: 15px 20px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
animation: goldShine 2s linear infinite;
width: 100%;
min-height: 50px;
}

@keyframes goldShine {
to {
  background-position: 200% center;
}
}

.bonus-wheel-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
}

.bonus-wheel-btn:disabled {
background: #666;
cursor: not-allowed;
transform: none;
animation: none;
}

/* ПРОМОКОД СЕКЦИЯ */
.promo-section {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
border-radius: 15px;
padding: 20px;
text-align: center;
border: 2px solid #ffd700;
box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
}

.promo-title {
font-size: 18px;
font-weight: bold;
color: #ffd700;
margin-bottom: 15px;
text-transform: uppercase;
}

.promo-input {
background: rgba(255, 255, 255, 0.1);
border: 2px solid rgba(255, 255, 255, 0.3);
border-radius: 10px;
color: white;
font-size: 16px;
padding: 12px 15px;
width: 100%;
margin-bottom: 15px;
outline: none;
transition: all 0.3s ease;
text-align: center;
}

.promo-input:focus {
border-color: #ffd700;
box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
}

.promo-btn {
background: linear-gradient(135deg, #ffd700, #ffed4e);
border: none;
border-radius: 10px;
color: #000;
padding: 12px 24px;
font-size: 14px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
min-height: 45px;
}

.promo-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 15px rgba(255, 215, 0, 0.4);
}

/* АДМИН ПАНЕЛЬ */
.admin-panel {
background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
border-radius: 15px;
padding: 20px;
margin-top: 15px;
border: 2px solid #e74c3c;
display: none;
}

.admin-panel.show {
display: block;
}

.admin-title {
font-size: 18px;
font-weight: bold;
color: #e74c3c;
margin-bottom: 15px;
text-align: center;
text-transform: uppercase;
}

.admin-form {
display: flex;
flex-direction: column;
gap: 10px;
}

.admin-input {
background: rgba(255, 255, 255, 0.1);
border: 2px solid rgba(255, 255, 255, 0.3);
border-radius: 8px;
color: white;
font-size: 14px;
padding: 10px;
outline: none;
transition: all 0.3s ease;
}

.admin-input:focus {
border-color: #e74c3c;
box-shadow: 0 0 10px rgba(231, 76, 60, 0.3);
}

.admin-btn {
background: linear-gradient(135deg, #e74c3c, #c0392b);
border: none;
border-radius: 8px;
color: white;
padding: 10px 15px;
font-size: 14px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
}

.admin-btn:hover {
transform: translateY(-1px);
box-shadow: 0 4px 12px rgba(231, 76, 60, 0.4);
}

.promo-list {
background: rgba(255, 255, 255, 0.05);
border-radius: 8px;
padding: 10px;
margin-top: 10px;
max-height: 150px;
overflow-y: auto;
}

.promo-item {
background: rgba(255, 255, 255, 0.1);
border-radius: 5px;
padding: 8px;
margin: 5px 0;
display: flex;
justify-content: space-between;
align-items: center;
font-size: 12px;
}

.promo-delete-btn {
background: #e74c3c;
border: none;
border-radius: 4px;
color: white;
padding: 4px 8px;
font-size: 10px;
cursor: pointer;
}

.vip-section {
background: linear-gradient(135deg, #8e44ad, #9b59b6);
border-radius: 15px;
padding: 20px;
text-align: center;
border: 2px solid #ffd700;
box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
}

.vip-title {
font-size: 20px;
font-weight: bold;
color: #ffd700;
margin-bottom: 10px;
text-transform: uppercase;
}

.vip-price {
font-size: 24px;
font-weight: bold;
color: white;
margin-bottom: 15px;
}

.vip-benefits {
font-size: 14px;
color: #ddd;
margin-bottom: 15px;
line-height: 1.4;
}

.vip-btn {
background: linear-gradient(135deg, #ffd700, #ffed4e);
border: none;
border-radius: 10px;
color: #000;
padding: 15px 24px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
min-height: 50px;
}

.vip-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 15px rgba(255, 215, 0, 0.4);
}

/* ИГРА МИНЕР */
.miner-game-container {
background: var(--bg-card);
border-radius: 15px;
padding: 20px;
text-align: center;
border: 1px solid var(--border-color);
}

.miner-title {
font-size: 20px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 20px;
text-transform: uppercase;
}

.miner-stats {
display: grid;
grid-template-columns: repeat(2, 1fr);
gap: 15px;
margin-bottom: 20px;
}

.miner-stat {
background: var(--bg-panel);
border-radius: 8px;
padding: 10px;
border: 1px solid var(--border-color);
}

.miner-stat-label {
font-size: 12px;
color: var(--text-secondary);
margin-bottom: 5px;
text-transform: uppercase;
}

.miner-stat-value {
font-size: 18px;
font-weight: bold;
color: var(--accent-color);
}

.miner-field {
display: grid;
grid-template-columns: repeat(5, 1fr);
gap: 8px;
margin: 20px auto;
max-width: 250px;
}

.miner-cell {
width: 40px;
height: 40px;
background: var(--bg-panel);
border: 2px solid var(--border-color);
border-radius: 6px;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
font-size: 18px;
position: relative;
}

.miner-cell:hover {
border-color: var(--accent-color);
background: var(--bg-card);
transform: scale(1.05);
}

.miner-cell.revealed.bomb {
background: linear-gradient(135deg, #ff6b6b, #ee5a24);
border-color: #ff6b6b;
animation: explosion 0.5s ease-out;
}

.miner-cell.revealed.gem {
background: linear-gradient(135deg, #4ecdc4, #44a08d);
border-color: #4ecdc4;
animation: gemFound 0.5s ease-out;
}

.miner-cell.revealed {
cursor: not-allowed;
}

@keyframes explosion {
0% { transform: scale(1); }
50% { transform: scale(1.2); background: #ff0000; }
100% { transform: scale(1); }
}

@keyframes gemFound {
0% { transform: scale(1); }
50% { transform: scale(1.1); box-shadow: 0 0 20px rgba(76, 175, 80, 0.8); }
100% { transform: scale(1); }
}

.miner-controls {
display: flex;
gap: 10px;
justify-content: center;
margin-top: 20px;
}

.miner-bet-input {
background: var(--bg-panel);
border: 2px solid var(--accent-orange);
border-radius: 8px;
color: var(--text-primary);
font-size: 14px;
padding: 8px 12px;
width: 100px;
text-align: center;
outline: none;
}

.miner-bet-input:focus {
border-color: var(--accent-color);
box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.miner-btn {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border: none;
border-radius: 8px;
color: #000;
padding: 8px 16px;
font-size: 14px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
min-height: 40px;
}

.miner-btn:hover {
transform: translateY(-1px);
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
}

.miner-btn:disabled {
background: #666;
cursor: not-allowed;
transform: none;
}

.miner-message {
margin-top: 15px;
padding: 10px;
border-radius: 8px;
font-weight: bold;
min-height: 20px;
}

.miner-message.win {
background: rgba(76, 175, 80, 0.2);
color: #4caf50;
border: 1px solid rgba(76, 175, 80, 0.4);
}

.miner-message.lose {
background: rgba(244, 67, 54, 0.2);
color: #f44336;
border: 1px solid rgba(244, 67, 54, 0.4);
}

.miner-message.info {
background: rgba(33, 150, 243, 0.2);
color: #2196f3;
border: 1px solid rgba(33, 150, 243, 0.4);
}

/* Чат поддержки */
.support-chat {
position: fixed;
bottom: 20px;
right: 20px;
width: 350px;
height: 450px;
background: var(--bg-panel);
border-radius: 15px;
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
border: 2px solid var(--border-color);
display: none;
flex-direction: column;
z-index: 1001;
}

.support-chat.active {
display: flex;
}

.support-chat-header {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
color: #000;
padding: 15px;
border-radius: 13px 13px 0 0;
font-weight: bold;
display: flex;
justify-content: space-between;
align-items: center;
}

.support-chat-close {
background: none;
border: none;
color: #000;
font-size: 18px;
cursor: pointer;
width: 25px;
height: 25px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background 0.3s;
}

.support-chat-close:hover {
background: rgba(0, 0, 0, 0.1);
}

.support-chat-messages {
flex: 1;
padding: 15px;
overflow-y: auto;
display: flex;
flex-direction: column;
gap: 10px;
scrollbar-width: none;
-ms-overflow-style: none;
}

.support-chat-messages::-webkit-scrollbar {
display: none;
}

.chat-message {
max-width: 80%;
padding: 10px 15px;
border-radius: 15px;
font-size: 14px;
line-height: 1.4;
}

.chat-message.user {
background: var(--accent-color);
color: #000;
align-self: flex-end;
border-bottom-right-radius: 5px;
}

.chat-message.support {
background: var(--bg-card);
color: var(--text-primary);
align-self: flex-start;
border-bottom-left-radius: 5px;
border: 1px solid var(--border-color);
}

.chat-message.ai {
background: linear-gradient(135deg, #4a90e2, #357abd);
color: white;
align-self: flex-start;
border-bottom-left-radius: 5px;
position: relative;
}

.chat-message.ai:before {
content: '🤖';
position: absolute;
top: -8px;
left: -8px;
background: var(--accent-color);
border-radius: 50%;
width: 20px;
height: 20px;
display: flex;
align-items: center;
justify-content: center;
font-size: 12px;
}

.support-chat-input-container {
padding: 15px;
border-top: 1px solid var(--border-color);
display: flex;
gap: 10px;
}

.support-chat-input {
flex: 1;
background: var(--bg-card);
border: 2px solid var(--border-color);
border-radius: 20px;
color: var(--text-primary);
padding: 10px 15px;
outline: none;
font-size: 14px;
min-height: 44px;
}

.support-chat-input:focus {
border-color: var(--accent-color);
}

.support-chat-send {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border: none;
border-radius: 50%;
color: #000;
width: 40px;
height: 40px;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
font-size: 16px;
transition: all 0.3s ease;
}

.support-chat-send:hover {
transform: scale(1.1);
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
}

.support-chat-toggle {
position: fixed;
bottom: 20px;
right: 20px;
width: 60px;
height: 60px;
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border: none;
border-radius: 50%;
color: #000;
font-size: 24px;
cursor: pointer;
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
transition: all 0.3s ease;
z-index: 1000;
display: flex;
align-items: center;
justify-content: center;
}

.support-chat-toggle:hover {
transform: scale(1.1);
box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
}

.support-chat-toggle.hidden {
display: none;
}

/* Статистика сайта */
.site-stats {
margin-top: 30px;
margin-left: 340px;
width: calc(100% - 360px);
max-width: 1400px;
background: var(--bg-panel);
border-radius: 20px;
padding: 25px;
box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
border: 1px solid var(--border-color);
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 30px;
align-items: center;
z-index: 100;
}

.stat-item {
display: flex;
align-items: center;
gap: 15px;
padding: 15px;
background: var(--bg-card);
border-radius: 15px;
border: 1px solid var(--border-color);
}

.stat-icon {
width: 50px;
height: 50px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-size: 24px;
color: white;
}

.stat-icon.online {
background: linear-gradient(135deg, #4caf50, #2ecc71);
}

.stat-icon.withdrawals {
background: linear-gradient(135deg, #ff9800, #ffc107);
}

.stat-icon.security {
background: linear-gradient(135deg, #2196f3, #03a9f4);
}

.stat-info {
flex: 1;
}

.stat-title {
font-size: 14px;
color: var(--text-secondary);
margin-bottom: 5px;
text-transform: uppercase;
letter-spacing: 1px;
}

.stat-value {
font-size: 20px;
font-weight: bold;
color: var(--accent-color);
}

/* ОБНОВЛЕННАЯ СЕКЦИЯ С ТРЕМЯ КОЛОНКАМИ ПОД ИГРОЙ */
.bottom-menu-section {
margin: 30px auto;
width: 100%;
max-width: 1200px;
background: linear-gradient(135deg, var(--bg-panel) 0%, var(--bg-card) 100%);
border-radius: 25px;
padding: 0;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
border: 2px solid var(--border-color);
display: grid;
grid-template-columns: repeat(3, 1fr);
z-index: 100;
overflow: hidden;
position: relative;
}

.bottom-menu-section::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: linear-gradient(45deg, rgba(255, 215, 0, 0.1), transparent, rgba(255, 140, 0, 0.1));
pointer-events: none;
z-index: 1;
}

.menu-column {
padding: 40px 30px;
text-align: center;
cursor: pointer;
transition: all 0.4s ease;
position: relative;
border-right: 1px solid var(--border-color);
z-index: 2;
background: transparent;
}

.menu-column:last-child {
border-right: none;
}

.menu-column:hover {
background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 140, 0, 0.1));
transform: translateY(-10px) scale(1.02);
box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
}

.menu-column::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: linear-gradient(135deg, transparent, rgba(255, 215, 0, 0.05));
opacity: 0;
transition: opacity 0.4s ease;
z-index: -1;
}

.menu-column:hover::before {
opacity: 1;
}

.menu-column-icon {
font-size: 60px;
margin-bottom: 25px;
color: var(--accent-color);
text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
transition: all 0.4s ease;
display: inline-block;
}

.menu-column:hover .menu-column-icon {
transform: scale(1.15) rotate(5deg);
text-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
}

.menu-column-title {
font-size: 28px;
font-weight: bold;
color: var(--text-primary);
margin-bottom: 20px;
text-transform: uppercase;
letter-spacing: 2px;
text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
transition: all 0.4s ease;
position: relative;
}

.menu-column:hover .menu-column-title {
color: var(--accent-color);
text-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
transform: translateY(-2px);
}

.menu-column-title::after {
content: '';
position: absolute;
bottom: -10px;
left: 50%;
transform: translateX(-50%) scaleX(0);
width: 60px;
height: 3px;
background: linear-gradient(90deg, var(--accent-orange), var(--accent-color));
border-radius: 2px;
transition: transform 0.4s ease;
}

.menu-column:hover .menu-column-title::after {
transform: translateX(-50%) scaleX(1);
}

.menu-column-description {
font-size: 16px;
color: var(--text-secondary);
line-height: 1.8;
text-align: center;
max-width: 280px;
margin: 0 auto;
transition: all 0.4s ease;
opacity: 0.9;
}

.menu-column:hover .menu-column-description {
color: var(--text-primary);
opacity: 1;
transform: translateY(-2px);
}

/* Приветственное окно с картинкой */
.welcome-image-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.9);
display: flex;
justify-content: center;
align-items: center;
z-index: 2000;
opacity: 1;
visibility: visible;
transition: all 0.3s ease;
cursor: pointer;
}

.welcome-image-overlay.hidden {
opacity: 0;
visibility: hidden;
}

.welcome-image-container {
position: relative;
max-width: 90%;
max-height: 90%;
}

.welcome-image {
width: 100%;
height: auto;
border-radius: 15px;
box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8);
}

.welcome-image-close {
position: absolute;
top: 15px;
right: 15px;
background: rgba(255, 255, 255, 0.1);
border: none;
color: white;
font-size: 24px;
cursor: pointer;
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
}

.welcome-image-close:hover {
background: rgba(255, 255, 255, 0.2);
}

/* Всплывающее уведомление */
.notification-overlay {
position: fixed;
top: 20px;
left: 50%;
transform: translateX(-50%);
background: rgba(255, 0, 0, 0.8);
color: white;
padding: 15px 30px;
border-radius: 10px;
font-size: 18px;
font-weight: bold;
z-index: 3000;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(255, 0, 0, 0.4);
}

.notification-overlay.show {
opacity: 1;
visibility: visible;
}

/* МОДАЛЬНЫЕ ОКНА ДЛЯ СЛОТОВ */
.slots-modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.8);
display: flex;
justify-content: center;
align-items: center;
z-index: 2000;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
}

.slots-modal-overlay.active {
opacity: 1;
visibility: visible;
}

.slots-selection-container {
background: var(--bg-panel);
border-radius: 20px;
padding: 30px;
width: 90%;
max-width: 1000px;
max-height: 80vh;
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
border: 2px solid var(--border-color);
transform: translateY(20px);
transition: all 0.4s ease;
overflow-y: auto;
position: relative;
scrollbar-width: none;
-ms-overflow-style: none;
}

.slots-selection-container::-webkit-scrollbar {
display: none;
}

.slots-modal-overlay.active .slots-selection-container {
transform: translateY(0);
}

.slots-modal-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 30px;
padding-bottom: 15px;
border-bottom: 2px solid var(--border-color);
}

.slots-modal-title {
font-size: 32px;
font-weight: bold;
color: var(--accent-color);
display: flex;
align-items: center;
gap: 15px;
text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

.slots-modal-close {
background: rgba(255, 255, 255, 0.1);
border: none;
color: var(--text-primary);
font-size: 28px;
cursor: pointer;
width: 50px;
height: 50px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
}

.slots-modal-close:hover {
background: rgba(255, 255, 255, 0.2);
transform: scale(1.1);
}

.slots-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
gap: 25px;
margin-bottom: 20px;
}

.slot-card {
background: var(--bg-card);
border: 3px solid var(--border-color);
border-radius: 15px;
padding: 0;
text-align: center;
cursor: pointer;
transition: all 0.3s ease;
overflow: hidden;
position: relative;
box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.slot-card:hover {
border-color: var(--accent-color);
transform: translateY(-8px);
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
}

.slot-card-image {
width: 100%;
height: 200px;
object-fit: cover;
border-radius: 12px 12px 0 0;
}

.slot-card-content {
padding: 20px;
}

.slot-card-title {
font-size: 18px;
font-weight: bold;
color: var(--text-primary);
margin-bottom: 10px;
}

.slot-card-description {
font-size: 14px;
color: var(--text-secondary);
line-height: 1.4;
margin-bottom: 15px;
}

.slot-play-btn {
background: linear-gradient(135deg, var(--accent-color), var(--accent-orange));
border: none;
border-radius: 10px;
color: #000;
padding: 12px 20px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
min-height: 50px;
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
}

.slot-play-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
}

/* МОДАЛЬНОЕ ОКНО ДЛЯ ИГРЫ В СЛОТ */
.slot-game-modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.95);
display: flex;
justify-content: center;
align-items: center;
z-index: 2001;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
}

.slot-game-modal-overlay.active {
opacity: 1;
visibility: visible;
}

.slot-game-container {
background: var(--bg-panel);
border-radius: 20px;
width: 95%;
height: 90%;
max-width: 1400px;
max-height: 900px;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
border: 2px solid var(--accent-color);
position: relative;
overflow: hidden;
display: flex;
flex-direction: column;
}

.slot-game-header {
background: linear-gradient(135deg, var(--bg-card), var(--bg-panel));
padding: 15px 20px;
display: flex;
align-items: center;
justify-content: space-between;
border-bottom: 2px solid var(--border-color);
}

.slot-game-title {
font-size: 18px;
font-weight: bold;
color: var(--accent-color);
}

.slot-game-controls {
display: flex;
align-items: center;
gap: 15px;
}

.slot-fullscreen-btn {
background: linear-gradient(135deg, #4a90e2, #357abd);
border: none;
border-radius: 8px;
color: white;
padding: 8px 12px;
font-size: 14px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
min-height: 40px;
}

.slot-fullscreen-btn:hover {
transform: translateY(-1px);
box-shadow: 0 4px 15px rgba(74, 144, 226, 0.4);
}

.slot-game-close {
background: rgba(255, 107, 107, 0.2);
border: none;
color: #ff6b6b;
font-size: 20px;
cursor: pointer;
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
}

.slot-game-close:hover {
background: rgba(255, 107, 107, 0.3);
transform: scale(1.1);
}

.slot-game-iframe {
flex: 1;
border: none;
background: #000;
border-radius: 0 0 18px 18px;
}

/* Окна техподдержки и других модалей */
.support-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.7);
display: flex;
justify-content: center;
align-items: center;
z-index: 2000;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
}

.support-overlay.active {
opacity: 1;
visibility: visible;
}

.support-container {
background: var(--bg-panel);
border-radius: 20px;
padding: 30px;
width: 90%;
max-width: 450px;
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
border: 1px solid var(--border-color);
transform: translateY(20px);
transition: all 0.4s ease;
text-align: center;
}

.support-overlay.active .support-container {
transform: translateY(0);
}

.support-title {
font-size: 24px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 20px;
}

.support-icon {
font-size: 48px;
margin-bottom: 20px;
color: var(--accent-color);
}

.support-text {
font-size: 16px;
color: var(--text-primary);
margin-bottom: 20px;
line-height: 1.5;
}

.support-email {
background: var(--bg-card);
border: 2px solid var(--accent-color);
border-radius: 12px;
padding: 15px;
font-size: 18px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 20px;
word-break: break-all;
}

.support-close-btn {
background: linear-gradient(135deg, var(--accent-orange), var(--accent-color));
border: none;
border-radius: 12px;
color: #000;
padding: 15px 30px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
min-height: 50px;
}

.support-close-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 15px rgba(255, 140, 0, 0.4);
}

/* Окно пополнения с бонусом */
.deposit-bonus-modal {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.7);
display: flex;
justify-content: center;
align-items: center;
z-index: 2001;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
}

.deposit-bonus-modal.active {
opacity: 1;
visibility: visible;
}

.deposit-bonus-container {
background: linear-gradient(135deg, #ff6b6b, #ff8e53);
border-radius: 20px;
padding: 30px;
width: 90%;
max-width: 450px;
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
transform: translateY(20px);
transition: all 0.4s ease;
text-align: center;
position: relative;
}

.deposit-bonus-modal.active .deposit-bonus-container {
transform: translateY(0);
}

.deposit-bonus-close {
position: absolute;
top: 15px;
right: 15px;
background: none;
border: none;
color: white;
font-size: 24px;
cursor: pointer;
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
}

.deposit-bonus-close:hover {
background: rgba(255, 255, 255, 0.1);
}

.deposit-bonus-title {
font-size: 24px;
font-weight: bold;
color: white;
margin-bottom: 20px;
}

.deposit-bonus-icon {
font-size: 64px;
margin-bottom: 20px;
}

.deposit-bonus-text {
font-size: 18px;
color: white;
margin-bottom: 30px;
line-height: 1.5;
font-weight: bold;
}

.deposit-bonus-continue {
background: linear-gradient(135deg, #ffd700, #ffed4e);
border: none;
border-radius: 12px;
color: #000;
padding: 15px 30px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
min-height: 50px;
width: 100%;
}

.deposit-bonus-continue:hover {
transform: translateY(-2px);
box-shadow: 0 6px 15px rgba(255, 215, 0, 0.4);
}

/* Формы */
.form-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.7);
display: flex;
justify-content: center;
align-items: center;
z-index: 2000;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
}

.form-overlay.active {
opacity: 1;
visibility: visible;
}

.form-box {
background: var(--bg-panel);
border-radius: 20px;
padding: 30px;
width: 90%;
max-width: 450px;
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
border: 1px solid var(--border-color);
transform: translateY(20px);
transition: all 0.4s ease;
}

.form-overlay.active .form-box {
transform: translateY(0);
}

.form-title {
text-align: center;
font-size: 24px;
margin-bottom: 25px;
color: var(--accent-color);
}

.form-input {
background: var(--bg-card);
border: 2px solid #6a11cb;
border-radius: 12px;
color: var(--text-primary);
font-size: 18px;
padding: 15px 20px;
width: 100%;
margin-bottom: 20px;
outline: none;
min-height: 50px;
}

.form-input:focus {
border-color: #2575fc;
}

/* НОВЫЕ СЕКЦИИ ОПЛАТЫ */
.payment-section {
margin-bottom: 20px;
padding: 20px;
background: var(--bg-card);
border-radius: 15px;
border: 2px solid var(--border-color);
}

.payment-section-title {
font-size: 18px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 15px;
text-align: center;
text-transform: uppercase;
}

.crypto-payment-options {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 15px;
margin-bottom: 20px;
}

.crypto-option {
background: var(--bg-panel);
border: 2px solid var(--border-color);
border-radius: 12px;
padding: 15px;
text-align: center;
cursor: pointer;
transition: all 0.3s ease;
}

.crypto-option:hover {
border-color: var(--accent-color);
transform: translateY(-2px);
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
}

.crypto-option-icon {
font-size: 32px;
margin-bottom: 10px;
}

.crypto-option-name {
font-size: 14px;
font-weight: bold;
color: var(--text-primary);
margin-bottom: 5px;
}

.crypto-option-desc {
font-size: 12px;
color: var(--text-secondary);
}

.card-transfer-section {
background: var(--bg-card);
border: 2px solid var(--border-color);
border-radius: 15px;
padding: 20px;
margin-bottom: 20px;
}

.card-transfer-title {
font-size: 16px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 15px;
text-align: center;
}

.card-input-group {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 10px;
margin-bottom: 15px;
}

.card-input {
background: var(--bg-panel);
border: 2px solid var(--border-color);
border-radius: 8px;
color: var(--text-primary);
font-size: 14px;
padding: 10px;
outline: none;
transition: all 0.3s ease;
}

.card-input:focus {
border-color: var(--accent-color);
}

.transfer-btn {
background: linear-gradient(135deg, #2196f3, #03a9f4);
border: none;
border-radius: 10px;
color: white;
padding: 12px 20px;
font-size: 14px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
min-height: 45px;
}

.transfer-btn:hover {
transform: translateY(-2px);
box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
}

.cryptopay-section {
margin-bottom: 20px;
text-align: center;
}

.cryptopay-btn {
background: linear-gradient(135deg, #0088cc, #0099dd);
border: none;
border-radius: 15px;
color: white;
font-size: 18px;
font-weight: bold;
padding: 15px 30px;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
box-shadow: 0 4px 15px rgba(0, 136, 204, 0.4);
min-height: 50px;
}

.cryptopay-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(0, 136, 204, 0.6);
}

.form-btn-submit {
border: none;
border-radius: 12px;
color: white;
padding: 15px;
font-size: 18px;
font-weight: bold;
width: 100%;
cursor: pointer;
transition: all 0.3s ease;
background: linear-gradient(135deg, #4caf50 0%, var(--accent-color) 100%);
min-height: 50px;
}

.form-btn-submit:hover {
transform: translateY(-3px);
box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
}

.form-status {
text-align: center;
margin-top: 20px;
font-size: 18px;
min-height: 25px;
color: #4caf50;
}

.close-btn {
position: absolute;
top: 15px;
right: 15px;
background: none;
border: none;
color: var(--text-primary);
font-size: 24px;
cursor: pointer;
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: background 0.3s;
}

.close-btn:hover {
background: rgba(255, 255, 255, 0.1);
}

/* НОВЫЕ СТИЛИ ДЛЯ СИСТЕМЫ ПРОВЕРКИ ПЛАТЕЖЕЙ */
.payment-details {
background: var(--bg-panel);
border: 2px solid var(--accent-color);
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
text-align: center;
}

.payment-details-title {
font-size: 20px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 15px;
}

.payment-card-info {
background: rgba(255, 215, 0, 0.1);
border: 2px solid var(--accent-color);
border-radius: 10px;
padding: 15px;
margin-bottom: 15px;
font-family: monospace;
font-size: 16px;
word-break: break-all;
color: var(--accent-color);
}

.payment-amount-info {
background: rgba(76, 175, 80, 0.1);
border: 2px solid #4caf50;
border-radius: 10px;
padding: 15px;
margin-bottom: 20px;
text-align: center;
}

.payment-amount-label {
font-size: 14px;
color: var(--text-secondary);
margin-bottom: 5px;
}

.payment-amount-value {
font-size: 24px;
font-weight: bold;
color: #4caf50;
}

.check-payment-btn {
background: linear-gradient(135deg, #2196f3, #03a9f4);
border: none;
border-radius: 12px;
color: white;
padding: 15px 30px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
width: 100%;
min-height: 50px;
box-shadow: 0 4px 15px rgba(33, 150, 243, 0.4);
}

.check-payment-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(33, 150, 243, 0.6);
}

.check-payment-btn:disabled {
background: #666;
cursor: not-allowed;
transform: none;
box-shadow: none;
}

.payment-attempts {
background: rgba(255, 152, 0, 0.1);
border: 1px solid #ff9800;
border-radius: 8px;
padding: 10px;
margin-bottom: 15px;
text-align: center;
font-size: 14px;
color: #ff9800;
}

/* МОДАЛЬНЫЕ ОКНА ДЛЯ МИНЕРА И БОНУСОВ */
.modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.7);
display: flex;
justify-content: center;
align-items: center;
z-index: 2000;
opacity: 0;
visibility: hidden;
transition: all 0.3s ease;
}

.modal-overlay.active {
opacity: 1;
visibility: visible;
}

.modal-container {
background: var(--bg-panel);
border-radius: 20px;
padding: 30px;
width: 90%;
max-width: 600px;
max-height: 80vh;
box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
border: 1px solid var(--border-color);
transform: translateY(20px);
transition: all 0.4s ease;
overflow-y: auto;
position: relative;
scrollbar-width: none;
-ms-overflow-style: none;
}

.modal-container::-webkit-scrollbar {
display: none;
}

.modal-overlay.active .modal-container {
transform: translateY(0);
}

.modal-header {
display: flex;
align-items: center;
justify-content: space-between;
margin-bottom: 20px;
padding-bottom: 15px;
border-bottom: 1px solid var(--border-color);
}

.modal-title {
font-size: 24px;
font-weight: bold;
color: var(--accent-color);
display: flex;
align-items: center;
gap: 10px;
}

.modal-close {
background: none;
border: none;
color: var(--text-primary);
font-size: 24px;
cursor: pointer;
width: 40px;
height: 40px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
transition: all 0.3s ease;
}

.modal-close:hover {
background: rgba(255, 255, 255, 0.1);
transform: scale(1.1);
}

.modal-content {
text-align: center;
}

.modal-description {
font-size: 18px;
color: var(--text-secondary);
margin-bottom: 30px;
line-height: 1.6;
}

.game-preview {
background: var(--bg-card);
border-radius: 15px;
padding: 30px;
margin-bottom: 30px;
border: 1px solid var(--border-color);
display: flex;
flex-direction: column;
align-items: center;
gap: 20px;
}

.game-icon-large {
font-size: 80px;
opacity: 0.7;
}

.bonus-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 20px;
margin-bottom: 20px;
}

.bonus-card {
background: var(--bg-panel);
border-radius: 12px;
padding: 20px;
text-align: center;
border: 1px solid var(--border-color);
transition: all 0.3s ease;
}

.bonus-card:hover {
transform: translateY(-2px);
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

.bonus-card-icon {
font-size: 40px;
margin-bottom: 15px;
}

.bonus-card-title {
font-size: 16px;
font-weight: bold;
color: var(--accent-color);
margin-bottom: 10px;
}

.bonus-card-description {
font-size: 14px;
color: var(--text-secondary);
line-height: 1.4;
}

.coming-soon-badge {
background: linear-gradient(135deg, var(--accent-orange), var(--accent-color));
color: #000;
border: none;
border-radius: 25px;
padding: 15px 30px;
font-size: 16px;
font-weight: bold;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
min-height: 50px;
}

.coming-soon-badge:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(255, 215, 0, 0.6);
}

/* Анимации */
@keyframes float {
0%, 100% { transform: translateY(30px); }
50% { transform: translateY(20px); }
}

/* 3D ракета стили */
#canvas {
position: absolute;
top: 50%;
left: 50%;
width: 200px;
height: 200px;
transform: translate(-87%, -115%);
pointer-events: none;
z-index: 1;
}

.fire-wrapper {
left: 50%;
position: absolute;
top: 50%;
transform-origin: top center;
transform: translate(-50%, 0) rotate3d(1, 0, 0, 60deg);
width: 3.5rem;
}

.fire {
animation: whoosh 1s linear infinite both;
width: 100%;
}

@keyframes whoosh {
from {
  transform: translateY(-25%);
}
to {
  transform: translateY(0);
}
}

/* АДАПТИВНАЯ ВЕРСТКА ДЛЯ МОБИЛЬНЫХ УСТРОЙСТВ */
@media (max-width: 1200px) {
.left-sidebar {
  width: 300px;
}

.top-header {
  left: 300px;
}

.main-container {
  margin-left: 320px;
  width: calc(100% - 340px);
}

.site-stats {
  margin-left: 320px;
  width: calc(100% - 340px);
}

.unified-window {
  grid-template-columns: 1fr 250px;
  gap: 20px;
}

.bonus-section {
  padding: 15px;
}

.fortune-wheel-container {
  width: 150px;
  height: 150px;
}

.fortune-wheel {
  width: 150px;
  height: 150px;
}

.slots-grid {
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.bottom-menu-section {
  grid-template-columns: 1fr;
  gap: 0;
}

.menu-column {
  border-right: none;
  border-bottom: 1px solid var(--border-color);
  padding: 35px 25px;
}

.menu-column:last-child {
  border-bottom: none;
}

.menu-column-icon {
  font-size: 50px;
  margin-bottom: 20px;
}

.menu-column-title {
  font-size: 24px;
  margin-bottom: 15px;
}

.menu-column-description {
  font-size: 15px;
}

.trading-section, .recent-wins-section {
  margin: 10px;
  padding: 12px;
}
}

@media (max-width: 992px) {
.mobile-menu-toggle {
  display: flex;
}

.left-sidebar {
  width: 320px;
  transform: translateX(-100%);
  transition: transform 0.3s ease;
  z-index: 1001;
}

.left-sidebar.open {
  transform: translateX(0);
}

.top-header {
  left: 0;
  padding: 0 15px;
}

/* ПЕРЕМЕЩЕНИЕ КНОПКИ ЯЗЫКА ПРИ МОБИЛЬНОМ МЕНЮ */
.language-switcher {
  bottom: 80px; /* Поднимаем выше чтобы не перекрывалась с кнопкой гамбургер */
}

.main-container {
  flex-direction: column;
  align-items: center;
  margin-left: 0;
  width: 100%;
  margin-top: 80px;
  padding: 0 15px;
}

.players-window {
  width: 100%;
  max-width: 100%;
  height: auto;
  max-height: 300px;
  margin-bottom: 20px;
}

.unified-window {
  grid-template-columns: 1fr;
  grid-template-rows: auto auto;
  gap: 20px;
  width: 100%;
  padding: 20px;
}

.unified-bet-container {
  grid-template-columns: 1fr;
  gap: 15px;
}

.site-stats {
  margin-left: 0;
  width: 100%;
  padding: 20px 15px;
  grid-template-columns: 1fr;
  gap: 15px;
}

.bottom-menu-section {
  margin: 20px 15px;
  width: calc(100% - 30px);
}

.support-chat {
  width: 300px;
  height: 400px;
  bottom: 10px;
  right: 10px;
}

.bonus-section {
  padding: 15px;
}

.fortune-wheel-container {
  width: 180px;
  height: 180px;
}

.fortune-wheel {
  width: 180px;
  height: 180px;
}

.game-main-area {
  gap: 15px;
  margin-top: 60px;
}

.rocket-container {
  height: 220px;
}

.multiplier {
  font-size: 36px;
  padding: 10px 20px;
  min-width: 140px;
}

.slots-grid {
  grid-template-columns: 1fr;
  gap: 20px;
}

.slot-game-container {
  width: 98%;
  height: 95%;
}

.menu-column {
  padding: 30px 20px;
}

.menu-column-icon {
  font-size: 45px;
  margin-bottom: 15px;
}

.menu-column-title {
  font-size: 22px;
  margin-bottom: 12px;
}

.menu-column-description {
  font-size: 14px;
}

.trading-section, .recent-wins-section {
  margin: 8px;
  padding: 10px;
}

.crypto-item, .win-item {
  padding: 6px 8px;
}

.crypto-name, .win-player {
  font-size: 10px;
}

.crypto-price, .win-amount {
  font-size: 9px;
}
}

@media (max-width: 768px) {
.mobile-menu-toggle {
  top: 10px;
  left: 10px;
  width: 45px;
  height: 45px;
  font-size: 18px;
}

.loading-logo {
  width: 120px;
  height: 120px;
  margin-bottom: 1.5rem;
}

.loading-progress {
  width: 250px;
}

.loading-text {
  font-size: 1.2rem;
}

.language-switcher {
  bottom: 70px; /* Еще выше для небольших экранов */
  left: 10px;
  flex-direction: column;
  gap: 3px;
}

.language-btn {
  width: 40px;
  height: 25px;
  font-size: 10px;
}

.top-header {
  flex-direction: column;
  height: auto;
  padding: 15px;
  gap: 15px;
}

.top-left-section, .top-right-section {
  width: 100%;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 10px;
}

.top-logo {
  width: 50px;
  height: 50px;
}

.theme-switcher {
  gap: 8px;
}

.theme-btn {
  width: 25px;
  height: 25px;
}

.top-balance-section {
  flex-direction: row;
  padding: 10px 15px;
  gap: 15px;
  min-width: 200px;
}

.top-balance-info {
  align-items: flex-start;
}

.top-balance-amount {
  font-size: 16px;
}

.top-action-buttons {
  flex-direction: column;
  width: 100%;
  gap: 8px;
}

.top-action-btn {
  padding: 12px 16px;
  font-size: 14px;
  min-height: 48px;
}

.refresh-balance-btn {
  width: 40px;
  height: 40px;
  font-size: 16px;
}

.top-login-btn {
  padding: 12px 20px;
  font-size: 16px;
  min-height: 48px;
}

.history-btn {
  min-width: 48px;
  min-height: 48px;
  width: 30px;
  height: 30px;
  font-size: 14px;
}

.main-container {
  margin-top: 120px;
  padding: 0 10px;
}

.unified-window {
  padding: 15px;
  min-height: 500px;
}

.game-main-area {
  gap: 15px;
  margin-top: 50px;
}

.multiplier-label {
  font-size: 16px;
}

.multiplier {
  font-size: 32px;
  padding: 8px 20px;
  min-width: 120px;
}

.rocket-container {
  height: 180px;
}

.rocket {
  width: 50px;
  height: 120px;
}

.scene {
  transform: rotate(45deg) scale(0.7);
}

.unified-bet-container {
  gap: 15px;
  padding: 15px;
}

.bet-section {
  gap: 12px;
}

.bet-section-title {
  font-size: 14px;
}

.bet-input {
  font-size: 16px;
  padding: 12px;
  min-height: 48px;
}

.bet-quick-btn {
  padding: 12px 15px;
  font-size: 12px;
  min-height: 48px;
}

.auto-cashout-input {
  min-height: 48px;
  padding: 8px;
  width: 70px;
}

.btn {
  padding: 12px 20px;
  font-size: 14px;
  min-height: 48px;
}

.game-status {
  font-size: 16px;
}

.players-window {
  height: 250px;
  padding: 15px;
}

.players-info {
  padding: 10px 12px;
  margin-bottom: 10px;
}

.players-count {
  font-size: 12px;
}

.total-bets {
  font-size: 12px;
}

.player-card {
  padding: 8px;
}

.player-name {
  font-size: 12px;
}

.player-bet {
  font-size: 11px;
}

.player-win {
  font-size: 11px;
}

.bonus-section {
  padding: 15px;
  gap: 15px;
}

.bonus-panel-title {
  font-size: 16px;
}

.fortune-wheel-container {
  width: 160px;
  height: 160px;
}

.fortune-wheel {
  width: 160px;
  height: 160px;
}

.wheel-segment {
  font-size: 12px;
}

.bonus-wheel-btn {
  padding: 12px 15px;
  font-size: 14px;
  min-height: 48px;
}

.promo-input {
  padding: 12px;
  font-size: 14px;
}

.promo-btn {
  padding: 12px 20px;
  font-size: 13px;
  min-height: 44px;
}

.vip-section {
  padding: 15px;
}

.vip-title {
  font-size: 18px;
}

.vip-price {
  font-size: 20px;
}

.vip-benefits {
  font-size: 12px;
}

.vip-btn {
  padding: 12px 20px;
  font-size: 14px;
  min-height: 48px;
}

.site-stats {
  padding: 15px;
  gap: 15px;
}

.stat-item {
  padding: 12px;
}

.stat-icon {
  width: 40px;
  height: 40px;
  font-size: 20px;
}

.stat-title {
  font-size: 12px;
}

.stat-value {
  font-size: 16px;
}

.bottom-menu-section {
  margin: 20px 10px;
  width: calc(100% - 20px);
}

.menu-column {
  padding: 25px 15px;
}

.menu-column-icon {
  font-size: 40px;
  margin-bottom: 15px;
}

.menu-column-title {
  font-size: 20px;
  margin-bottom: 10px;
}

.menu-column-description {
  font-size: 13px;
}

.support-chat {
  width: 280px;
  height: 350px;
  bottom: 80px;
  right: 10px;
}

.support-chat-toggle {
  width: 50px;
  height: 50px;
  font-size: 20px;
  bottom: 15px;
  right: 15px;
}

.form-box {
  padding: 20px;
  width: 95%;
  max-width: 400px;
}

.form-title {
  font-size: 20px;
}

.form-input {
  font-size: 16px;
  padding: 12px 15px;
  min-height: 48px;
}

.cryptopay-btn {
  font-size: 16px;
  padding: 12px 20px;
  min-height: 48px;
}

.form-btn-submit {
  font-size: 16px;
  padding: 12px;
  min-height: 48px;
}

.modal-container {
  width: 95%;
  padding: 20px;
  max-height: 85vh;
}

.modal-title {
  font-size: 20px;
}

.modal-description {
  font-size: 16px;
}

.game-preview {
  padding: 20px;
  gap: 15px;
}

.game-icon-large {
  font-size: 60px;
}

.coming-soon-badge {
  padding: 12px 20px;
  font-size: 14px;
  min-height: 48px;
}

.support-container {
  width: 95%;
  padding: 20px;
  max-width: 400px;
}

.support-title {
  font-size: 20px;
}

.support-icon {
  font-size: 40px;
}

.support-text {
  font-size: 14px;
}

.support-email {
  padding: 12px;
  font-size: 16px;
}

.support-close-btn {
  padding: 12px 25px;
  font-size: 14px;
  min-height: 48px;
}

.welcome-image-overlay {
  padding: 20px;
}

.welcome-image-container {
  max-width: 95%;
}

.notification-overlay {
  padding: 12px 20px;
  font-size: 16px;
  top: 10px;
  left: 50%;
  right: 10px;
  width: calc(100% - 20px);
  max-width: 350px;
  text-align: center;
}

.deposit-bonus-container {
  width: 95%;
  padding: 20px;
  max-width: 400px;
}

.deposit-bonus-title {
  font-size: 20px;
}

.deposit-bonus-icon {
  font-size: 50px;
}

.deposit-bonus-text {
  font-size: 16px;
}

.deposit-bonus-continue {
  padding: 12px 20px;
  font-size: 14px;
  min-height: 48px;
}

.slots-selection-container {
  width: 95%;
  padding: 20px;
  max-width: 900px;
}

.slots-modal-title {
  font-size: 24px;
}

.slot-card-image {
  height: 150px;
}

.slot-card-content {
  padding: 15px;
}

.slot-card-title {
  font-size: 16px;
}

.slot-card-description {
  font-size: 12px;
}

.slot-play-btn {
  padding: 10px 15px;
  font-size: 14px;
  min-height: 45px;
}

.slot-game-container {
  width: 100%;
  height: 100%;
  border-radius: 10px;
}

.slot-game-header {
  padding: 10px 15px;
}

.slot-game-title {
  font-size: 14px;
}

.slot-fullscreen-btn {
  padding: 6px 10px;
  font-size: 12px;
  min-height: 35px;
}

.miner-field {
  max-width: 200px;
  gap: 6px;
}

.miner-cell {
  width: 35px;
  height: 35px;
  font-size: 16px;
}

.check-payment-btn {
  font-size: 14px;
  padding: 12px 20px;
  min-height: 48px;
}

.payment-details-title {
  font-size: 18px;
}

.payment-card-info {
  font-size: 14px;
  padding: 12px;
}

.payment-amount-value {
  font-size: 20px;
}

.trading-section, .recent-wins-section {
  margin: 6px;
  padding: 8px;
}

.trading-title, .wins-title {
  font-size: 12px;
}

.crypto-item, .win-item {
  padding: 5px 6px;
  margin-bottom: 3px;
}

.crypto-name, .win-player {
  font-size: 9px;
}

.crypto-price, .win-amount {
  font-size: 8px;
}

.game-logo {
  width: 18px;
  height: 18px;
}

.win-game {
  font-size: 8px;
}
}

@media (max-width: 480px) {
.loading-logo {
  width: 100px;
  height: 100px;
  margin-bottom: 1rem;
}

.loading-progress {
  width: 200px;
}

.mobile-menu-toggle {
  width: 40px;
  height: 40px;
  font-size: 16px;
}

.language-switcher {
  gap: 2px;
  bottom: 60px;
}

.language-btn {
  width: 35px;
  height: 20px;
  font-size: 9px;
}

.left-sidebar {
  width: 280px;
}

.sidebar-user-profile {
  padding: 15px;
}

.user-avatar {
  width: 40px;
  height: 40px;
  font-size: 18px;
}

.user-name {
  font-size: 13px;
}

.user-id {
  font-size: 10px;
}

.sidebar-bonus-section {
  margin: 10px;
  padding: 12px;
}

.bonus-icon {
  width: 35px;
  height: 35px;
}

.bonus-text {
  font-size: 14px;
}

.sidebar-games-section {
  padding: 0 10px;
}

.games-section-header {
  padding: 12px 8px;
  font-size: 12px;
}

.game-item {
  padding: 10px 15px;
  font-size: 12px;
}

.sidebar-menu-item {
  padding: 10px 12px;
  font-size: 12px;
}

.sidebar-logo {
  padding: 15px 10px;
}

.sidebar-logo-text {
  font-size: 20px;
}

.windows-app-section {
  margin: 10px;
  padding: 12px;
}

.windows-app-title {
  font-size: 12px;
}

.windows-app-subtitle {
  font-size: 10px;
}

.social-links {
  gap: 8px;
}

.social-link {
  width: 40px;
  height: 40px;
  font-size: 16px;
}

.social-link img {
  width: 25px;
  height: 25px;
}

.sidebar-support {
  margin: 10px;
  padding: 12px;
}

.support-text {
  font-size: 12px;
}

.top-header {
  padding: 10px;
  gap: 10px;
}

.top-logo {
  width: 45px;
  height: 45px;
}

.theme-switcher {
  gap: 8px;
}

.theme-btn {
  width: 25px;
  height: 25px;
}

.top-balance-section {
  padding: 8px 12px;
  min-width: 180px;
}

.top-balance-title {
  font-size: 11px;
}

.top-balance-amount {
  font-size: 14px;
}

.top-action-btn {
  padding: 10px 12px;
  font-size: 12px;
  min-height: 44px;
}

.refresh-balance-btn {
  width: 35px;
  height: 35px;
  font-size: 14px;
}

.top-login-btn {
  padding: 10px 16px;
  font-size: 14px;
  min-height: 44px;
}

.history-btn {
  min-width: 44px;
  min-height: 44px;
  width: 25px;
  height: 25px;
  font-size: 12px;
}

.main-container {
  margin-top: 100px;
  padding: 0 5px;
}

.unified-window {
  padding: 10px;
}

.game-main-area {
  margin-top: 40px;
  gap: 12px;
}

.multiplier {
  font-size: 28px;
  padding: 6px 15px;
  min-width: 100px;
}

.rocket-container {
  height: 150px;
}

.unified-bet-container {
  gap: 10px;
  padding: 12px;
}

.bet-section {
  gap: 10px;
}

.bet-input {
  font-size: 14px;
  padding: 10px;
  min-height: 44px;
}

.bet-quick-btn {
  padding: 10px 12px;
  font-size: 11px;
  min-height: 44px;
}

.auto-cashout-input {
  min-height: 44px;
  width: 60px;
  font-size: 11px;
  padding: 6px;
}

.btn {
  padding: 10px 15px;
  font-size: 13px;
  min-height: 44px;
}

.players-window {
  height: 200px;
  padding: 10px;
}

.players-info {
  padding: 8px 10px;
  margin-bottom: 8px;
}

.bonus-section {
  padding: 10px;
}

.fortune-wheel-container {
  width: 140px;
  height: 140px;
}

.fortune-wheel {
  width: 140px;
  height: 140px;
}

.wheel-segment {
  font-size: 11px;
}

.promo-input {
  padding: 10px;
  font-size: 13px;
}

.promo-btn {
  padding: 10px 16px;
  font-size: 12px;
  min-height: 40px;
}

.site-stats {
  padding: 10px;
}

.stat-item {
  padding: 10px;
  gap: 10px;
}

.stat-icon {
  width: 35px;
  height: 35px;
  font-size: 16px;
}

.bottom-menu-section {
  margin: 15px 5px;
  width: calc(100% - 10px);
}

.menu-column {
  padding: 20px 12px;
}

.menu-column-icon {
  font-size: 35px;
  margin-bottom: 12px;
}

.menu-column-title {
  font-size: 18px;
  margin-bottom: 8px;
}

.menu-column-description {
  font-size: 12px;
}

.support-chat {
  width: 250px;
  height: 300px;
  bottom: 70px;
  right: 5px;
}

.support-chat-toggle {
  width: 45px;
  height: 45px;
  font-size: 18px;
  bottom: 10px;
  right: 10px;
}

.form-box {
  padding: 15px;
  width: 95%;
}

.modal-container {
  width: 95%;
  padding: 15px;
}

.notification-overlay {
  padding: 10px 15px;
  font-size: 14px;
  width: calc(100% - 10px);
  max-width: 320px;
}

.deposit-bonus-container {
  width: 95%;
  padding: 15px;
}

.slots-selection-container {
  width: 95%;
  padding: 15px;
  max-width: 800px;
}

.slots-modal-title {
  font-size: 20px;
}

.slot-card-image {
  height: 120px;
}

.slot-card-content {
  padding: 12px;
}

.slot-card-title {
  font-size: 14px;
}

.slot-card-description {
  font-size: 11px;
}

.slot-play-btn {
  padding: 8px 12px;
  font-size: 12px;
  min-height: 40px;
}

.slot-game-header {
  padding: 8px 12px;
}

.slot-game-title {
  font-size: 12px;
}

.slot-fullscreen-btn {
  padding: 5px 8px;
  font-size: 10px;
  min-height: 30px;
}

.slot-game-close {
  width: 30px;
  height: 30px;
  font-size: 16px;
}

.miner-field {
  max-width: 175px;
  gap: 4px;
}

.miner-cell {
  width: 30px;
  height: 30px;
  font-size: 14px;
}

.check-payment-btn {
  font-size: 12px;
  padding: 10px 15px;
  min-height: 44px;
}

.payment-details-title {
  font-size: 16px;
}

.payment-card-info {
  font-size: 12px;
  padding: 10px;
}

.payment-amount-value {
  font-size: 18px;
}

.trading-section, .recent-wins-section {
  margin: 4px;
  padding: 6px;
}

.trading-title, .wins-title {
  font-size: 10px;
}

.crypto-item, .win-item {
  padding: 4px 5px;
  margin-bottom: 2px;
}

.crypto-name, .win-player {
  font-size: 8px;
}

.crypto-price, .win-amount {
  font-size: 7px;
}

.game-logo {
  width: 16px;
  height: 16px;
}

.win-game {
  font-size: 7px;
}
}

/* ДОПОЛНИТЕЛЬНЫЕ СТИЛИ ДЛЯ ОЧЕНЬ МАЛЕНЬКИХ ЭКРАНОВ */
@media (max-width: 360px) {
.loading-logo {
  width: 80px;
  height: 80px;
  margin-bottom: 1rem;
}

.loading-progress {
  width: 180px;
}

.mobile-menu-toggle {
  width: 36px;
  height: 36px;
  font-size: 14px;
}

.language-btn {
  width: 30px;
  height: 18px;
  font-size: 8px;
}

.left-sidebar {
  width: 260px;
}

.multiplier {
  font-size: 24px;
  padding: 5px 12px;
  min-width: 90px;
}

.rocket-container {
  height: 120px;
}

.unified-bet-container {
  gap: 8px;
  padding: 10px;
}

.bet-section {
  gap: 8px;
}

.fortune-wheel-container {
  width: 120px;
  height: 120px;
}

.fortune-wheel {
  width: 120px;
  height: 120px;
}

.support-chat {
  width: 220px;
  height: 280px;
}

.menu-column {
  padding: 15px 10px;
}

.menu-column-icon {
  font-size: 30px;
  margin-bottom: 10px;
}

.menu-column-title {
  font-size: 16px;
  margin-bottom: 6px;
}

.menu-column-description {
  font-size: 11px;
}

.slots-modal-title {
  font-size: 18px;
}

.slot-card-image {
  height: 100px;
}

.slot-card-content {
  padding: 10px;
}

.slot-card-title {
  font-size: 12px;
}

.slot-card-description {
  font-size: 10px;
}

.slot-play-btn {
  padding: 6px 10px;
  font-size: 11px;
  min-height: 35px;
}

.miner-field {
  max-width: 150px;
}

.miner-cell {
  width: 25px;
  height: 25px;
  font-size: 12px;
}

.check-payment-btn {
  font-size: 11px;
  padding: 8px 12px;
  min-height: 40px;
}

.payment-details-title {
  font-size: 14px;
}

.payment-card-info {
  font-size: 11px;
  padding: 8px;
}

.payment-amount-value {
  font-size: 16px;
}

.trading-section, .recent-wins-section {
  margin: 3px;
  padding: 4px;
}

.trading-header, .recent-wins-header {
  gap: 6px;
  margin-bottom: 8px;
}

.trading-title, .wins-title {
  font-size: 9px;
}

.crypto-item, .win-item {
  padding: 3px 4px;
  margin-bottom: 2px;
  border-radius: 3px;
}

.crypto-name, .win-player {
  font-size: 7px;
}

.crypto-symbol {
  font-size: 6px;
}

.crypto-price, .win-amount {
  font-size: 6px;
}

.price-change {
  font-size: 5px;
  padding: 1px 2px;
}

.game-logo {
  width: 14px;
  height: 14px;
}

.win-details {
  gap: 1px;
}

.win-game {
  font-size: 6px;
}
}
</style>
</head>
<body data-theme="black">

<!-- Звездное небо -->
<div class="starfield" id="starfield">
<!-- Звезды будут добавлены динамически -->
</div>

<!-- Экран загрузки -->
<div class="loading-screen" id="loadingScreen">
<div class="loading-logo"></div>
<div class="loading-rocket">🚀</div>
<div class="loading-progress">
  <div class="loading-progress-bar" id="loadingProgressBar"></div>
</div>
<div class="loading-text" id="loadingText">0%</div>
<div class="loading-subtext" data-translate="loading">Загружаем игру...</div>
</div>

<!-- Переключатель языков - ПЕРЕНЕСЕН В ЛЕВЫЙ НИЖНИЙ УГОЛ -->
<div class="language-switcher">
<button class="language-btn active" onclick="changeLanguage('ru')" id="langRu">RU</button>
<button class="language-btn" onclick="changeLanguage('en')" id="langEn">EN</button>
</div>

<!-- МОБИЛЬНАЯ КНОПКА МЕНЮ -->
<button class="mobile-menu-toggle" id="mobileMenuToggle" onclick="toggleMobileMenu()">☰</button>

<!-- Левая боковая панель -->
<div class="left-sidebar" id="leftSidebar">
<!-- Профиль пользователя -->
<div class="sidebar-user-profile" onclick="showProfile()">
  <!-- КАРТИНКА ПРИ ВХОДЕ В АККАУНТ -->
  <div class="user-login-image" id="userLoginImage"></div>
  
  <div class="user-avatar">И</div>
  <div class="user-info">
    <div class="user-name" id="sidebarUserName" data-translate="player">ИГРОК</div>
    <div class="user-id" id="sidebarUserId">ID 327502910</div>
  </div>
  <div class="user-next-arrow">›</div>
</div>

<!-- Секция бонусов с картинкой -->
<div class="sidebar-bonus-section" onclick="openBonusesModal()">
  <div class="bonus-icon"></div>
  <div class="bonus-text" data-translate="bonuses">БОНУСЫ</div>
</div>

<!-- Разделитель -->
<div class="sidebar-divider"></div>

<!-- ОБНОВЛЕННАЯ СЕКЦИЯ ТРЕЙДИНГА - БЕЗ АКЦИЙ -->
<div class="trading-section">
  <div class="trading-header" onclick="toggleTradingSection()" id="tradingHeader">
    <div class="trading-icon">₿</div>
    <div class="trading-title">ТРЕЙДИНГ</div>
    <div class="trading-arrow">▼</div>
  </div>
  
  <div class="trading-list" id="tradingList">
    <div class="crypto-item" onclick="showCryptoInfo('BTC')">
      <div class="crypto-info">
        <div class="crypto-name">Bitcoin</div>
        <div class="crypto-symbol">BTC</div>
      </div>
      <div>
        <div class="crypto-price" id="btc-price">$67,234</div>
        <div class="price-change positive" id="btc-change">+2.45%</div>
      </div>
    </div>
    
    <div class="crypto-item" onclick="showCryptoInfo('ETH')">
      <div class="crypto-info">
        <div class="crypto-name">Ethereum</div>
        <div class="crypto-symbol">ETH</div>
      </div>
      <div>
        <div class="crypto-price" id="eth-price">$3,421</div>
        <div class="price-change negative" id="eth-change">-1.23%</div>
      </div>
    </div>
    
    <div class="crypto-item" onclick="showCryptoInfo('BNB')">
      <div class="crypto-info">
        <div class="crypto-name">Binance</div>
        <div class="crypto-symbol">BNB</div>
      </div>
      <div>
        <div class="crypto-price" id="bnb-price">$612</div>
        <div class="price-change positive" id="bnb-change">+0.87%</div>
      </div>
    </div>
    
    <div class="crypto-item" onclick="showCryptoInfo('ADA')">
      <div class="crypto-info">
        <div class="crypto-name">Cardano</div>
        <div class="crypto-symbol">ADA</div>
      </div>
      <div>
        <div class="crypto-price" id="ada-price">$0.63</div>
        <div class="price-change positive" id="ada-change">+3.12%</div>
      </div>
    </div>
  </div>
</div>

<!-- Разделитель -->
<div class="sidebar-divider"></div>

<!-- НОВАЯ СЕКЦИЯ ПОСЛЕДНИХ ВЫИГРЫШЕЙ -->
<div class="recent-wins-section">
  <div class="recent-wins-header">
    <div class="wins-icon">🏆</div>
    <div class="wins-title">ПОСЛЕДНИЕ ВЫИГРЫШИ</div>
  </div>
  
  <div class="wins-list" id="winsList">
    <!-- Выигрыши будут добавляться динамически -->
  </div>
</div>

<!-- Разделитель -->
<div class="sidebar-divider"></div>

<!-- Игры секция с картинками -->
<div class="sidebar-games-section">
  <div class="games-section-header" onclick="toggleGamesSection()" id="gamesHeader">
    <div class="games-icon">⚙️</div>
    <span data-translate="games">ИГРЫ</span>
    <div class="games-arrow">▼</div>
  </div>
  
  <div class="games-list" id="gamesList">
    <div class="game-item active" onclick="selectGame('crash')">
      <div class="game-item-icon crash-icon"></div>
      <span data-translate="crash">КРАШ</span>
      <div class="game-item-arrow">▼</div>
    </div>
    <div class="game-item" onclick="selectGame('miner')">
      <div class="game-item-icon miner-icon"></div>
      <span data-translate="miner">МИНЕР</span>
      <div class="game-item-arrow">▼</div>
    </div>
    <div class="game-item" onclick="selectGame('slots')">
      <div class="game-item-icon slots-icon">🎰</div>
      <span data-translate="slots">СЛОТЫ</span>
      <div class="game-item-arrow">▼</div>
    </div>
    <div class="game-item" onclick="selectGame('bonuses')">
      <div class="game-item-icon bonuses-icon"></div>
      <span data-translate="bonuses">БОНУСЫ</span>
      <div class="game-item-arrow">▼</div>
    </div>
  </div>
</div>

<!-- Разделитель -->
<div class="sidebar-divider"></div>

<!-- Нижняя секция меню -->
<div class="sidebar-bottom-section">
  <div class="sidebar-menu-item bonuses" onclick="openBonusesModal()">
    <div class="menu-item-icon bonuses-menu-icon"></div>
    <span data-translate="bonuses">Бонусы</span>
    <div class="menu-item-badge">1</div>
  </div>

  <div class="sidebar-menu-item" onclick="buyVip()">
    <div class="menu-item-icon">👑</div>
    <span>VIP club</span>
    <div class="menu-item-new-badge">New</div>
  </div>
</div>

<!-- Разделитель -->
<div class="sidebar-divider"></div>

<!-- Логотип XROCKET -->
<div class="sidebar-logo">
  <div class="sidebar-logo-text">
    <span class="logo-x">X</span>ROCKET
  </div>
</div>

<!-- Приложение для Windows -->
<div class="windows-app-section" onclick="showNotification(translations[currentLanguage].appSoon || 'Приложение скоро будет доступно')">
  <div class="windows-app-header">
    <div class="windows-app-icon">⊞</div>
    <div class="windows-app-title">Xrocket for Windows</div>
    <div class="windows-app-arrow">›</div>
  </div>
  <div class="windows-app-subtitle" data-translate="appDescription">
    Приложение с быстрым доступом к платформе
  </div>
</div>

<!-- Социальные ссылки с изображениями -->
<div class="sidebar-social-section">
  <div class="social-links">
    <a href="https://instagram.com" target="_blank" class="social-link instagram">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/58/Instagram-Icon.png/960px-Instagram-Icon.png" alt="Instagram">
    </a>
    <a href="https://t.me" target="_blank" class="social-link telegram">
      <img src="https://upload.wikimedia.org/wikipedia/commons/5/5c/Telegram_Messenger.png" alt="Telegram">
    </a>
    <a href="#" class="social-link threads">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9d/Threads_%28app%29_logo.svg/1200px-Threads_%28app%29_logo.svg.png" alt="Threads">
    </a>
    <div class="social-link more" onclick="showNotification(translations[currentLanguage].moreLinksSoon || 'Больше ссылок скоро')">...</div>
  </div>
</div>

<!-- Поддержка -->
<div class="sidebar-support" onclick="openSupport()">
  <div class="support-icon"></div>
  <div class="support-text" data-translate="support">Поддержка</div>
  <div class="support-24-7">24/7</div>
</div>
</div>

<!-- Приветственное окно с картинкой -->
<div class="welcome-image-overlay" id="welcomeImageOverlay" onclick="openDepositFromWelcome()">
<div class="welcome-image-container">
  <button class="welcome-image-close" onclick="event.stopPropagation(); closeWelcomeImage()">×</button>
  <img src="https://i.postimg.cc/qM2yk6qS/123.png" alt="Приветственный бонус" class="welcome-image">
</div>
</div>

<!-- Модальное окно с бонусом +500% -->
<div class="deposit-bonus-modal" id="depositBonusModal">
<div class="deposit-bonus-container">
  <button class="deposit-bonus-close" onclick="closeDepositBonus()">×</button>
  <div class="deposit-bonus-title" data-translate="superBonus">🎉 СУПЕР БОНУС!</div>
  <div class="deposit-bonus-icon">💰</div>
  <div class="deposit-bonus-text" data-translate="bonusText">
    Вы получите +500% к первому пополнению!<br>
    Максимальный бонус до $5000!
  </div>
  <button class="deposit-bonus-continue" onclick="continueToDeposit()" data-translate="continueDeposit">ПРОДОЛЖИТЬ ПОПОЛНЕНИЕ</button>
</div>
</div>

<!-- МОДАЛЬНОЕ ОКНО ВЫБОРА СЛОТОВ -->
<div class="slots-modal-overlay" id="slotsModal">
<div class="slots-selection-container">
  <div class="slots-modal-header">
    <div class="slots-modal-title" data-translate="chooseSlot">
      🎰 ВЫБЕРИТЕ СЛОТ
    </div>
    <button class="slots-modal-close" onclick="closeSlotsModal()">×</button>
  </div>
  
  <div class="slots-grid">
    <!-- Первый слот -->
    <div class="slot-card" onclick="openSlotGame(1)">
      <img src="https://i.postimg.cc/RFdmSPyw/image.png" alt="Club Tropicana - Happy Hour" class="slot-card-image">
      <div class="slot-card-content">
        <div class="slot-card-title">Club Tropicana - Happy Hour</div>
        <div class="slot-card-description" data-translate="slot1Desc">Классический слот с тропической атмосферой и отличными бонусами</div>
        <button class="slot-play-btn" data-translate="play">🎮 ИГРАТЬ</button>
      </div>
    </div>

    <!-- Второй слот -->
    <div class="slot-card" onclick="openSlotGame(2)">
      <img src="https://i.postimg.cc/dVV4p5mz/image.png" alt="Air Jet" class="slot-card-image">
      <div class="slot-card-content">
        <div class="slot-card-title">Air Jet</div>
        <div class="slot-card-description" data-translate="slot2Desc">Захватывающий авиа-слот с высокими коэффициентами и бонусными раундами</div>
        <button class="slot-play-btn" data-translate="play">✈️ ИГРАТЬ</button>
      </div>
    </div>

    <!-- Третий слот -->
    <div class="slot-card" onclick="openSlotGame(3)">
      <img src="https://i.postimg.cc/W43pDcmX/fsdv.png" alt="One Win Million" class="slot-card-image">
      <div class="slot-card-content">
        <div class="slot-card-title">One Win Million</div>
        <div class="slot-card-description" data-translate="slot3Desc">Слот с джекпотом в миллион! Попробуйте свою удачу и выиграйте крупный приз</div>
        <button class="slot-play-btn" data-translate="play">💎 ИГРАТЬ</button>
      </div>
    </div>

    <!-- Четвертый слот -->
    <div class="slot-card" onclick="openSlotGame(4)">
      <img src="https://i.postimg.cc/FsS1VvLR/2025-08-21-112243.png" alt="Crime Empire" class="slot-card-image">
      <div class="slot-card-content">
        <div class="slot-card-title">Crime Empire</div>
        <div class="slot-card-description" data-translate="slot4Desc">Криминальная тематика с большими выигрышами и захватывающим геймплеем</div>
        <button class="slot-play-btn" data-translate="play">🔫 ИГРАТЬ</button>
      </div>
    </div>

    <!-- Пятый слот -->
    <div class="slot-card" onclick="openSlotGame(5)">
      <img src="https://i.postimg.cc/bNrK20sH/2025-08-21-112623.png" alt="Coin Express" class="slot-card-image">
      <div class="slot-card-content">
        <div class="slot-card-title">Coin Express</div>
        <div class="slot-card-description" data-translate="slot5Desc">Быстрые поезда и золотые монеты! Скоростной слот с отличными бонусами</div>
        <button class="slot-play-btn" data-translate="play">🚂 ИГРАТЬ</button>
      </div>
    </div>
  </div>
</div>
</div>

<!-- МОДАЛЬНОЕ ОКНО ДЛЯ ИГРЫ В СЛОТ -->
<div class="slot-game-modal-overlay" id="slotGameModal">
<div class="slot-game-container">
  <div class="slot-game-header">
    <div class="slot-game-title" id="slotGameTitle" data-translate="slotGame">Игра в слот</div>
    <div class="slot-game-controls">
      <button class="slot-fullscreen-btn" onclick="toggleSlotFullscreen()" data-translate="fullscreen">📺 На весь экран</button>
      <button class="slot-game-close" onclick="closeSlotGame()">×</button>
    </div>
  </div>
  <iframe id="slotGameIframe" class="slot-game-iframe" src="" allowfullscreen></iframe>
</div>
</div>

<!-- Всплывающее уведомление -->
<div class="notification-overlay" id="notificationOverlay">
Скоро будет
</div>

<!-- Окно техподдержки -->
<div class="support-overlay" id="supportOverlay">
<div class="support-container">
  <button class="close-btn" onclick="closeSupport()">×</button>
  <div class="support-title" data-translate="techSupport">Техническая поддержка</div>
  <div class="support-icon">🛠️</div>
  <div class="support-text" data-translate="supportText">
    Если у вас возникли вопросы или проблемы, свяжитесь с нашей службой поддержки по электронной почте:
  </div>
  <div class="support-email">t.me/suphiex</div>
  <button class="support-close-btn" onclick="closeSupport()" data-translate="close">ЗАКРЫТЬ</button>
</div>
</div>

<!-- МОДАЛЬНОЕ ОКНО ИГРЫ МИНЕР -->
<div class="modal-overlay" id="minerModal">
<div class="modal-container">
  <div class="modal-header">
    <div class="modal-title" data-translate="minerTitle">
      💣 МИНЕР
    </div>
    <button class="modal-close" onclick="closeMinerModal()">×</button>
  </div>
  <div class="modal-content">
    <div class="miner-game-container">
      <div class="miner-title" data-translate="minerGameTitle">💎 ИГРА МИНЕР</div>
      
      <div class="miner-stats">
        <div class="miner-stat">
          <div class="miner-stat-label" data-translate="currentMultiplier">Текущий множитель</div>
          <div class="miner-stat-value" id="minerMultiplier">1.00x</div>
        </div>
        <div class="miner-stat">
          <div class="miner-stat-label" data-translate="foundGems">Найдено алмазов</div>
          <div class="miner-stat-value" id="minerGemsFound">0</div>
        </div>
      </div>

      <div class="miner-field" id="minerField">
        <!-- Игровое поле будет создано динамически -->
      </div>

      <div class="miner-controls">
        <input type="number" class="miner-bet-input" id="minerBetInput" data-translate-placeholder="bet" placeholder="Ставка" min="1" step="0.01">
        <button class="miner-btn" id="minerStartBtn" onclick="startMinerGame()" data-translate="play">ИГРАТЬ</button>
        <button class="miner-btn" id="minerCashoutBtn" onclick="minerCashout()" style="display: none;" data-translate="take">ЗАБРАТЬ</button>
      </div>

      <div class="miner-message" id="minerMessage" data-translate="minerPlaceBet">Сделайте ставку и начните игру!</div>
    </div>
  </div>
</div>
</div>

<!-- МОДАЛЬНОЕ ОКНО БОНУСОВ -->
<div class="modal-overlay" id="bonusModal">
<div class="modal-container">
  <div class="modal-header">
    <div class="modal-title" data-translate="bonuses">
      🎁 БОНУСЫ
    </div>
    <button class="modal-close" onclick="closeBonusModal()">×</button>
  </div>
  <div class="modal-content">
    <div class="modal-description" data-translate="bonusDescription">
      Получайте ежедневные бонусы, участвуйте в акциях и выигрывайте призы!
    </div>
    
    <!-- ПРОМО-КОД СЕКЦИЯ -->
    <div class="promo-section">
      <div class="promo-title" data-translate="promoCode">🎫 Промо-код</div>
      <input type="text" class="promo-input" id="promoInput" data-translate-placeholder="enterPromo" placeholder="Введите промо-код">
      <button class="promo-btn" onclick="activatePromo()" data-translate="activate">АКТИВИРОВАТЬ</button>
      
      <!-- АДМИН ПАНЕЛЬ -->
      <div class="admin-panel" id="adminPanel">
        <div class="admin-title" data-translate="adminPanel">👨‍💼 Админ панель</div>
        <div class="admin-form">
          <input type="text" class="admin-input" id="newPromoCode" data-translate-placeholder="promoCodeText" placeholder="Код промокода">
          <input type="number" class="admin-input" id="newPromoValue" data-translate-placeholder="bonusAmount" placeholder="Сумма бонуса">
          <button class="admin-btn" onclick="createPromo()" data-translate="createPromo">Создать промо-код</button>
        </div>
        <div class="promo-list" id="promoList">
          <!-- Список промокодов -->
        </div>
      </div>
    </div>
    
    <div class="game-preview">
      <div class="bonus-grid">
        <div class="bonus-card">
          <div class="bonus-card-icon">🎯</div>
          <div class="bonus-card-title" data-translate="dailyBonus">Ежедневный бонус</div>
          <div class="bonus-card-description" data-translate="dailyBonusDesc">Заходите каждый день и получайте бонусы</div>
        </div>
        <div class="bonus-card">
          <div class="bonus-card-icon">🎰</div>
          <div class="bonus-card-title" data-translate="fortuneWheel">Колесо фортуны</div>
          <div class="bonus-card-description" data-translate="fortuneWheelDesc">Крутите колесо и выигрывайте призы</div>
        </div>
        <div class="bonus-card">
          <div class="bonus-card-icon">🏆</div>
          <div class="bonus-card-title" data-translate="tournaments">Турниры</div>
          <div class="bonus-card-description" data-translate="tournamentsDesc">Участвуйте в турнирах и побеждайте</div>
        </div>
        <div class="bonus-card">
          <div class="bonus-card-icon">💸</div>
          <div class="bonus-card-title" data-translate="cashback">Кешбэк</div>
          <div class="bonus-card-description" data-translate="cashbackDesc">Возвращайте часть потраченных средств</div>
        </div>
        <div class="bonus-card">
          <div class="bonus-card-icon">👥</div>
          <div class="bonus-card-title" data-translate="referral">Реферальная система</div>
          <div class="bonus-card-description" data-translate="referralDesc">Приглашайте друзей и получайте бонусы</div>
        </div>
        <div class="bonus-card">
          <div class="bonus-card-icon">🎊</div>
          <div class="bonus-card-title" data-translate="specialOffers">Специальные акции</div>
          <div class="bonus-card-description" data-translate="specialOffersDesc">Участвуйте в праздничных акциях</div>
        </div>
      </div>
    </div>
    <button class="coming-soon-badge" onclick="showNotification(translations[currentLanguage].bonusSystemSoon || 'Система бонусов скоро будет доступна!')" data-translate="getBonusOffer">
      🎁 ПОЛУЧИТЕ +500% К ПЕРВОМУ ПОПОЛНЕНИЮ
    </button>
  </div>
</div>
</div>

<!-- Верхняя панель -->
<div class="top-header">
<!-- Левая часть -->
<div class="top-left-section">
  <div class="top-logo"></div>

  <div class="theme-switcher">
    <button class="theme-btn black active" onclick="changeTheme('black')" title="Черная тема"></button>
    <button class="theme-btn red" onclick="changeTheme('red')" title="Красная тема"></button>
    <button class="theme-btn white" onclick="changeTheme('white')" title="Белая тема"></button>
  </div>
</div>

<!-- Правая часть -->
<div class="top-right-section">
  <div class="top-balance-section" onclick="toggleCurrencyDropdown()">
    <div class="top-balance-info">
      <div class="top-balance-title" data-translate="balance">Баланс</div>
      <div class="top-balance-amount" id="balanceDisplay">$1.00</div>
    </div>
    <div class="top-action-buttons">
      <button class="top-action-btn top-deposit-btn" onclick="showDepositBonusModal()" data-translate="deposit">Пополнить</button>
      <button class="top-action-btn top-withdraw-btn" onclick="openForm('withdrawOverlay')" data-translate="withdraw">Вывод</button>
    </div>

    <!-- Выпадающее меню валют -->
    <div class="currency-dropdown" id="currencyDropdown">
      <div class="currency-selector">
        <button class="currency-btn active" data-currency="USD" onclick="changeCurrency('USD')">🇺🇸 USD</button>
        <button class="currency-btn" data-currency="RUB" onclick="changeCurrency('RUB')">🇷🇺 RUB</button>
        <button class="currency-btn" data-currency="KZT" onclick="changeCurrency('KZT')">🇰🇿 KZT</button>
        <button class="currency-btn" data-currency="BTC" onclick="changeCurrency('BTC')">₿ BTC</button>
      </div>
      <div class="balance-details">
        <div class="balance-details-title" data-translate="balanceAllCurrencies">Баланс во всех валютах:</div>
        <div class="balance-item">
          <span class="balance-currency">🇺🇸 USD</span>
          <span class="balance-value" id="balanceUSD">$1.00</span>
        </div>
        <div class="balance-item">
          <span class="balance-currency">🇷🇺 RUB</span>
          <span class="balance-value" id="balanceRUB">₽92.50</span>
        </div>
        <div class="balance-item">
          <span class="balance-currency">🇰🇿 KZT</span>
          <span class="balance-value" id="balanceKZT">₸450.20</span>
        </div>
        <div class="balance-item">
          <span class="balance-currency">₿ BTC</span>
          <span class="balance-value" id="balanceBTC">₿0.00002300</span>
        </div>
      </div>
    </div>
  </div>
  <button class="refresh-balance-btn" onclick="refreshBalance()" data-translate-title="refreshBalance" title="Обновить баланс">↻</button>

  <div class="top-login-section">
    <button class="top-login-btn" id="topLoginBtn" onclick="openForm('loginOverlay')" data-translate="login">ВХОД</button>
    <div class="top-user-info" id="topUserInfo">
      <span class="top-username" id="topUsername" data-translate="player">ИГРОК</span>
      <button class="history-btn" id="topHistoryBtn" onclick="showBetsHistory()">i</button>
    </div>
  </div>
</div>
</div>

<!-- Основной контейнер -->
<div class="main-container">
<!-- Панель игроков - РАСШИРЕНА ВНИЗ -->
<div class="players-window">
  <div class="players-info">
    <div class="players-count">
      <div class="green-dot"></div>
      <span id="playersCountText" data-translate="playersCount">0 игроков</span>
    </div>
    <div class="total-bets" id="totalBetsAmount">$0.00</div>
  </div>
  <div class="players-container" id="players-container">
    <!-- Игроки будут добавляться динамически -->
  </div>
</div>

<!-- Единое большое окно С ВНУТРЕННИМ СВЕЧЕНИЕМ -->
<div class="unified-window" id="unifiedWindow">
  <!-- Игровая секция -->
  <div class="game-section">
    <!-- ВИДЕО ФОН ИГРЫ -->
    <div class="game-video-background" id="gameVideoBackground">
      <video class="background-video" id="backgroundVideo" muted loop>
        <source src="https://screenapp.io/app/api/video/aA1an-RN62/stream" type="video/mp4">
        <!-- Fallback заглушка если видео не загрузится -->
        <source src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC" type="video/mp4">
      </video>
    </div>

    <!-- Звездное небо в игровой секции -->
    <div class="starfield">
      <!-- Звезды будут добавлены динамически -->
    </div>

    <!-- Космические объекты -->
    <div class="space-object game-moon" id="gameMoon"></div>
    <div class="space-object game-sun" id="gameSun"></div>
    <div class="space-object game-blackhole" id="gameBlackhole"></div>
    
    <!-- Земля на фоне -->
    <div class="game-earth" id="gameEarth"></div>
    
    <!-- Кометы -->
    <div id="cometsContainer"></div>
    
    <!-- Фон леса -->
    <div class="game-forest-background" id="gameForestBackground"></div>

    <!-- История множителей внутри игрового поля -->
    <div class="in-game-multipliers-history">
      <div class="in-game-history-title" data-translate="recentX">Последние X</div>
      <div class="in-game-history-grid" id="in-game-history-grid">
        <!-- История будет добавляться динамически -->
      </div>
    </div>

    <!-- Главное игровое поле -->
    <div class="game-main-area">
      <!-- Множитель -->
      <div class="multiplier-container">
        <div class="multiplier-label" data-translate="multiplierLabel">ИКС</div>
        <div class="multiplier">×0</div>
      </div>

      <!-- Контейнер ракеты -->
      <div class="rocket-container">
        <!-- Контейнер заправки -->
        <div class="refueling-container" id="refueling-container">
          <img src="https://i.postimg.cc/7LnZHZFS/2025-08-14-024749-Photoroom.png" alt="Rocket" class="refueling-rocket-icon">
          <div class="refueling-text" data-translate="refueling">Заправляем шатл</div>
          <div class="progress-bar-container">
            <div class="progress-bar" id="progress-bar"></div>
          </div>
        </div>

        <!-- Заглушка ракеты -->
        <div id="rocket-stub" style="display: block;">
          <div class="rocket" id="rocketStub">
            <div class="rocket-body"></div>
            <div class="rocket-top"></div>
            <div class="rocket-fin-left"></div>
            <div class="rocket-fin-right"></div>
            <div class="rocket-fire"></div>
          </div>
        </div>

        <!-- CSS ракета -->
        <div class="css-rocket-container" id="css-rocket-container">
          <div class="scene" id="cssRocketScene">
            <div class="wing-left"></div>
            <div class="wing-right"></div>
            <div class="exhaust"></div>
            <div class="capsule">
              <div class="top">
                <div class="shadow"></div>
              </div>
              <div class="base"></div>
            </div>
            <div class="window-big"></div>
            <div class="window-small"></div>
            <div class="fire-1"></div>
            <div class="fire-2"></div>
            <div class="fire-3"></div>
            <div class="fire-4"></div>
            <div class="spark-1"></div>
            <div class="spark-2"></div>
            <div class="spark-3"></div>
            <div class="spark-4"></div>
            <div class="star star--1"></div>
            <div class="star star--2"></div>
            <div class="star star--3"></div>
            <div class="star star--4"></div>
            <div class="star star--5"></div>
            <div class="star star--6"></div>
            <div class="star star--7"></div>
            <div class="star star--8"></div>
            <div class="star star--9"></div>
            <div class="star star--10"></div>
            <div class="star star--11"></div>
            <div class="star star--12"></div>
            <div class="star star--13"></div>
            <div class="star star--14"></div>
            <div class="star star--15"></div>
            <div class="star star--16"></div>
          </div>
        </div>

        <!-- 3D-ракета с эффектами -->
        <div id="rocket-3d-wrapper" style="display: none;">
          <div class="fire-wrapper">
            <img class="fire" src="https://stivs.dev/assets/rocket/fire.svg">
          </div>
          <div id="canvas"></div>
        </div>
      </div>

      <!-- ЕДИНОЕ ОКНО ДЛЯ СТАВОК -->
      <div class="unified-bet-container">
        <!-- Первая секция ставок -->
        <div class="bet-section">
          <div class="bet-section-title" data-translate="bet1">Ставка 1</div>
          <div class="bet-input-wrapper">
            <input type="number" class="bet-input" id="betInput1" data-translate-placeholder="enterBetAmount" placeholder="Введите сумму ставки">
          </div>
          <div class="bet-quick-buttons">
            <button class="bet-quick-btn" onclick="addToBet(1, 10)">+10</button>
            <button class="bet-quick-btn" onclick="addToBet(1, 50)">+50</button>
            <button class="bet-quick-btn" onclick="setBetAll(1)" data-translate="all">ВСЕ</button>
          </div>
          <!-- Авто кешаут в первой секции -->
          <div class="auto-cashout-container">
            <span class="auto-cashout-label" data-translate="autoCashout">Авто кешаут</span>
            <div class="toggle-switch" id="toggleSwitch1" onclick="toggleAutoCashout(1)">
              <div class="toggle-slider"></div>
            </div>
            <input type="number" class="auto-cashout-input" id="autoCashoutInput1" value="2.00" step="0.01" min="1.01" disabled>
          </div>
          <!-- Кнопки для первой ставки -->
          <div class="bet-actions">
            <button class="btn bet-btn" id="betBtn1" onclick="placeBet(1)" data-translate="placeBet">ПОСТАВИТЬ</button>
            <button class="btn cancel-btn" id="cancelBtn1" onclick="cancelBet(1)" style="display: none;" data-translate="cancel">ОТМЕНА</button>
            <button class="btn take-btn" id="takeBtn1" onclick="takeWin(1)" style="display: none;">
              <span data-translate="take">ЗАБРАТЬ</span>
              <span class="take-btn-amount" id="takeBtnAmount1">$0.00</span>
            </button>
          </div>
        </div>

        <!-- Вторая секция ставок -->
        <div class="bet-section">
          <div class="bet-section-title" data-translate="bet2">Ставка 2</div>
          <div class="bet-input-wrapper">
            <input type="number" class="bet-input" id="betInput2" data-translate-placeholder="enterBetAmount" placeholder="Введите сумму ставки">
          </div>
          <div class="bet-quick-buttons">
            <button class="bet-quick-btn" onclick="addToBet(2, 10)">+10</button>
            <button class="bet-quick-btn" onclick="addToBet(2, 50)">+50</button>
            <button class="bet-quick-btn" onclick="setBetAll(2)" data-translate="all">ВСЕ</button>
          </div>
          <!-- Авто кешаут во второй секции -->
          <div class="auto-cashout-container">
            <span class="auto-cashout-label" data-translate="autoCashout">Авто кешаут</span>
            <div class="toggle-switch" id="toggleSwitch2" onclick="toggleAutoCashout(2)">
              <div class="toggle-slider"></div>
            </div>
            <input type="number" class="auto-cashout-input" id="autoCashoutInput2" value="2.00" step="0.01" min="1.01" disabled>
          </div>
          <!-- Кнопки для второй ставки -->
          <div class="bet-actions">
            <button class="btn bet-btn" id="betBtn2" onclick="placeBet(2)" data-translate="placeBet">ПОСТАВИТЬ</button>
            <button class="btn cancel-btn" id="cancelBtn2" onclick="cancelBet(2)" style="display: none;" data-translate="cancel">ОТМЕНА</button>
            <button class="btn take-btn" id="takeBtn2" onclick="takeWin(2)" style="display: none;">
              <span data-translate="take">ЗАБРАТЬ</span>
              <span class="take-btn-amount" id="takeBtnAmount2">$0.00</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Статус игры -->
    <div class="game-status" data-translate="waitingBets">Ожидание ставок!</div>
  </div>

  <!-- Правая панель - бонусы -->
  <div class="bonus-section">
    <div class="bonus-panel-title">
      <span data-translate="bonuses">БОНУСЫ</span>
      <button class="bonus-exclamation" onclick="openBonusesModal()">!</button>
    </div>

    <!-- Колесо фортуны -->
    <div class="fortune-wheel-container">
      <div class="fortune-wheel" id="fortuneWheel">
        <div class="wheel-segment">$0.10</div>
        <div class="wheel-segment">$0.25</div>
        <div class="wheel-segment">$0.50</div>
        <div class="wheel-segment">$1.00</div>
        <div class="wheel-segment">$0.05</div>
        <div class="wheel-segment">$0.75</div>
        <div class="wheel-segment">$0.20</div>
        <div class="wheel-segment">$0.15</div>
      </div>
      <div class="wheel-pointer"></div>
    </div>
    <button class="bonus-wheel-btn" id="bonusBtn" onclick="spinFortuneWheel()" data-translate="spinWheel">🎰 КРУТИТЬ КОЛЕСО</button>

    <!-- VIP клуб -->
    <div class="vip-section">
      <div class="vip-title">👑 VIP CLUB</div>
      <div class="vip-price">$1000</div>
      <div class="vip-benefits" data-translate="vipBenefits">
        • Эксклюзивные бонусы<br>
        • Персональный менеджер<br>
        • Приоритетная поддержка<br>
        • Особые условия игры
      </div>
      <button class="vip-btn" onclick="buyVip()" data-translate="becomeVip">СТАТЬ VIP</button>
    </div>
  </div>
</div>
</div>

<!-- Статистика сайта -->
<div class="site-stats">
<div class="stat-item">
  <div class="stat-icon online">👥</div>
  <div class="stat-info">
    <div class="stat-title" data-translate="onlinePlayers">Онлайн игроков</div>
    <div class="stat-value" id="onlineCount">3,421</div>
  </div>
</div>

<div class="stat-item">
  <div class="stat-icon withdrawals">💰</div>
  <div class="stat-info">
    <div class="stat-title" data-translate="withdrawnToday">Выведено сегодня</div>
    <div class="stat-value" id="withdrawnToday">$127,543</div>
  </div>
</div>

<div class="stat-item">
  <div class="stat-icon security">🛡️</div>
  <div class="stat-info">
    <div class="stat-title" data-translate="gameProtection">Защита игр</div>
    <div class="stat-value">100% SSL</div>
  </div>
</div>
</div>

<!-- ОБНОВЛЕННАЯ СЕКЦИЯ С ТРЕМЯ КОЛОНКАМИ ПОД ИГРОЙ -->
<div class="bottom-menu-section">
<div class="menu-column" onclick="selectGame('crash')">
  <div class="menu-column-icon">🎮</div>
  <div class="menu-column-title" data-translate="games">ИГРЫ</div>
  <div class="menu-column-description" data-translate="gamesDescription">
    Играйте в увлекательные игры и выигрывайте крупные призы. Краш, слоты, минер и многое другое для максимального азарта!
  </div>
</div>

<div class="menu-column" onclick="openBonusesModal()">
  <div class="menu-column-icon">🎁</div>
  <div class="menu-column-title" data-translate="bonuses">БОНУСЫ</div>
  <div class="menu-column-description" data-translate="bonusesDescription">
    Получайте ежедневные бонусы, участвуйте в акциях и крутите колесо фортуны для дополнительных призов и наград!
  </div>
</div>

<div class="menu-column" onclick="buyVip()">
  <div class="menu-column-icon">👑</div>
  <div class="menu-column-title">VIP CLUB</div>
  <div class="menu-column-description" data-translate="vipDescription">
    Станьте VIP игроком и получите эксклюзивные бонусы, персонального менеджера и особые привилегии!
  </div>
</div>
</div>

<!-- Чат поддержки -->
<button class="support-chat-toggle" id="supportChatToggle" onclick="toggleSupportChat()">💬</button>
<div class="support-chat" id="supportChat">
<div class="support-chat-header">
  <span data-translate="aiSupport">ИИ Поддержка 🤖</span>
  <button class="support-chat-close" onclick="toggleSupportChat()">×</button>
</div>
<div class="support-chat-messages" id="supportChatMessages">
  <div class="chat-message ai" data-translate="aiWelcome">
    Привет! Я ИИ-ассистент службы поддержки. Чем могу помочь? 🤖
  </div>
</div>
<div class="support-chat-input-container">
  <input type="text" class="support-chat-input" id="supportChatInput" data-translate-placeholder="writeQuestion" placeholder="Напишите ваш вопрос..." onkeypress="handleChatKeyPress(event)">
  <button class="support-chat-send" onclick="sendChatMessage()">➤</button>
</div>
</div>

<!-- Формы -->
<div class="form-overlay" id="loginOverlay">
<div class="form-box">
  <button class="close-btn" onclick="closeForm('loginOverlay')">×</button>
  <h2 class="form-title" data-translate="loginTelegram">Вход через Telegram</h2>
  <input type="text" class="form-input" id="telegramUsername" data-translate-placeholder="telegramUsername" placeholder="@username или ID Telegram">
  <button class="form-btn-submit deposit-btn-submit" onclick="loginTelegram()" data-translate="loginViaTelegram">ВОЙТИ ЧЕРЕЗ TELEGRAM</button>
  <div class="form-status" id="loginStatus"></div>
</div>
</div>

<div class="form-overlay" id="depositOverlay">
<div class="form-box">
  <button class="close-btn" onclick="closeForm('depositOverlay')">×</button>
  <h2 class="form-title" data-translate="balanceDeposit">Пополнение баланса</h2>

  <!-- Секция CryptoPay -->
  <div class="cryptopay-section">
    <button class="cryptopay-btn" onclick="openCryptoPay()" data-translate="cryptoPayTelegram">
      💎 CryptoPay - Пополнить через Telegram
    </button>
  </div>

  <!-- Новая секция криптовалютных платежей -->
  <div class="payment-section">
    <div class="payment-section-title" data-translate="cryptoPayments">💰 Криптовалютные платежи</div>
    <div class="crypto-payment-options">
      <div class="crypto-option" onclick="openCryptoTransfer('BTC')">
        <div class="crypto-option-icon">₿</div>
        <div class="crypto-option-name">Bitcoin</div>
        <div class="crypto-option-desc" data-translate="cryptoTransfer">Переводом</div>
      </div>
      <div class="crypto-option" onclick="openCryptoTransfer('ETH')">
        <div class="crypto-option-icon">Ξ</div>
        <div class="crypto-option-name">Ethereum</div>
        <div class="crypto-option-desc" data-translate="cryptoTransfer">Переводом</div>
      </div>
      <div class="crypto-option" onclick="openCryptoTransfer('USDT')">
        <div class="crypto-option-icon">₮</div>
        <div class="crypto-option-name">USDT</div>
        <div class="crypto-option-desc" data-translate="cryptoTransfer">Переводом</div>
      </div>
      <div class="crypto-option" onclick="openCryptoTransfer('TON')">
        <div class="crypto-option-icon">💎</div>
        <div class="crypto-option-name">TON</div>
        <div class="crypto-option-desc" data-translate="cryptoTransfer">Переводом</div>
      </div>
    </div>
  </div>

  <!-- Секция перевода на карту -->
  <div class="card-transfer-section">
    <div class="card-transfer-title" data-translate="cardTransfer">💳 Перевод на карту</div>
    <div class="card-input-group">
      <input type="text" class="card-input" data-translate-placeholder="cardNumber" placeholder="Номер карты" maxlength="19">
      <input type="text" class="card-input" data-translate-placeholder="cardHolder" placeholder="Имя держателя">
    </div>
    <input type="number" class="card-input" data-translate-placeholder="amount" placeholder="Сумма ($)" min="1" step="0.01" style="width: 100%;">
    <button class="transfer-btn" onclick="processCardTransfer()" data-translate="transfer">💳 ПЕРЕВЕСТИ</button>
  </div>

  <input type="number" class="form-input" id="depositAmount" data-translate-placeholder="amountDollar" placeholder="Сумма ($)" min="1" step="0.01">
  <div class="form-status" id="depositStatus"></div>
</div>
</div>

<div class="form-overlay" id="withdrawOverlay">
<div class="form-box">
  <button class="close-btn" onclick="closeForm('withdrawOverlay')">×</button>
  <h2 class="form-title" data-translate="withdraw">Вывод средств</h2>
  <input type="text" class="form-input" data-translate-placeholder="cardNumber" placeholder="Номер карты">
  <input type="number" class="form-input" id="withdrawAmount" data-translate-placeholder="amountDollar" placeholder="Сумма ($)" min="10" step="0.01">
  <button class="form-btn-submit deposit-btn-submit" onclick="processWithdraw()" data-translate="withdrawButton">ВЫВЕСТИ</button>
  <div class="form-status" id="withdrawStatus"></div>
</div>
</div>

<div class="form-overlay" id="betsHistoryOverlay">
<div class="form-box">
  <button class="close-btn" onclick="closeForm('betsHistoryOverlay')">×</button>
  <h2 class="form-title" data-translate="myHistory">Моя история</h2>
  <div id="betsHistoryList">
    <!-- История ставок будет добавляться динамически -->
  </div>
</div>
</div>

<!-- Модальное окно для криптоплатежей -->
<div class="form-overlay" id="cryptoTransferModal">
<div class="form-box">
  <button class="close-btn" onclick="closeForm('cryptoTransferModal')">×</button>
  <h2 class="form-title" id="cryptoTransferTitle" data-translate="cryptoTransfer">Криптовалютный перевод</h2>
  
  <!-- КОНТЕЙНЕР ДЛЯ ОТОБРАЖЕНИЯ РЕКВИЗИТОВ ИЛИ КНОПКИ ПРОВЕРКИ -->
  <div id="cryptoPaymentContainer">
    <div class="payment-section">
      <div id="cryptoWalletAddress" style="background: var(--bg-card); padding: 15px; border-radius: 10px; font-family: monospace; word-break: break-all; margin-bottom: 15px; border: 2px solid var(--accent-color);"></div>
      <input type="number" class="form-input" id="cryptoTransferAmount" data-translate-placeholder="amount" placeholder="Сумма" min="1" step="0.01">
      <button class="form-btn-submit" onclick="processCryptoDeposit()" data-translate="confirmAmount">ПОДТВЕРДИТЬ СУММУ</button>
      <div class="form-status" id="cryptoTransferStatus"></div>
    </div>
  </div>

  <!-- КОНТЕЙНЕР ДЛЯ ПРОВЕРКИ ПЛАТЕЖА -->
  <div id="cryptoCheckContainer" style="display: none;">
    <div class="payment-details">
      <div class="payment-details-title" data-translate="paymentDetails">Детали платежа</div>
      <div class="payment-card-info" id="cryptoPaymentAddress"></div>
      <div class="payment-amount-info">
        <div class="payment-amount-label" data-translate="amountToPay">Сумма к переводу:</div>
        <div class="payment-amount-value" id="cryptoPaymentAmount">$0.00</div>
      </div>
      <div class="payment-attempts" id="cryptoPaymentAttempts" style="display: none;">
        Попыток проверки: <span id="cryptoAttemptCount">0</span>/10
      </div>
      <button class="check-payment-btn" id="cryptoCheckBtn" onclick="checkCryptoPayment()" data-translate="checkPayment">ПРОВЕРИТЬ</button>
      <div class="form-status" id="cryptoCheckStatus"></div>
    </div>
  </div>
</div>
</div>

<!-- Модальное окно для проверки карточных платежей -->
<div class="form-overlay" id="cardPaymentModal">
<div class="form-box">
  <button class="close-btn" onclick="closeForm('cardPaymentModal')">×</button>
  <h2 class="form-title" data-translate="cardPayment">Оплата картой</h2>
  
  <!-- КОНТЕЙНЕР ДЛЯ ВВОДА СУММЫ -->
  <div id="cardAmountContainer">
    <input type="number" class="form-input" id="cardPaymentAmount" data-translate-placeholder="amountDollar" placeholder="Сумма ($)" min="1" step="0.01">
    <button class="form-btn-submit" onclick="processCardPayment()" data-translate="confirmAmount">ПОДТВЕРДИТЬ СУММУ</button>
    <div class="form-status" id="cardPaymentStatus"></div>
  </div>

  <!-- КОНТЕЙНЕР ДЛЯ ПРОВЕРКИ ПЛАТЕЖА -->
  <div id="cardCheckContainer" style="display: none;">
    <div class="payment-details">
      <div class="payment-details-title" data-translate="paymentDetails">Детали платежа</div>
      <div class="payment-card-info" id="cardPaymentInfo">4276 3801 2945 7834</div>
      <div class="payment-amount-info">
        <div class="payment-amount-label" data-translate="amountToPay">Сумма к переводу:</div>
        <div class="payment-amount-value" id="cardPaymentAmountDisplay">$0.00</div>
      </div>
      <div class="payment-attempts" id="cardPaymentAttempts" style="display: none;">
        Попыток проверки: <span id="cardAttemptCount">0</span>/10
      </div>
      <button class="check-payment-btn" id="cardCheckBtn" onclick="checkCardPayment()" data-translate="checkPayment">ПРОВЕРИТЬ</button>
      <div class="form-status" id="cardCheckStatus"></div>
    </div>
  </div>
</div>
</div>

<script>
// СИСТЕМА ПЕРЕВОДОВ
let currentLanguage = 'ru';

const translations = {
ru: {
  // Общие переводы
  loading: 'Загружаем игру...',
  player: 'ИГРОК',
  bonuses: 'БОНУСЫ',
  games: 'ИГРЫ',
  crash: 'КРАШ',
  miner: 'МИНЕР',
  slots: 'СЛОТЫ',
  support: 'Поддержка',
  balance: 'Баланс',
  deposit: 'Пополнить',
  withdraw: 'Вывод',
  login: 'ВХОД',
  close: 'ЗАКРЫТЬ',
  play: 'ИГРАТЬ',
  take: 'ЗАБРАТЬ',
  cancel: 'ОТМЕНА',
  all: 'ВСЕ',
  
  // Игра
  playersCount: '0 игроков',
  waitingBets: 'Ожидание ставок!',
  multiplierLabel: 'ИКС',
  recentX: 'Последние X',
  refueling: 'Заправляем шатл',
  bet1: 'Ставка 1',
  bet2: 'Ставка 2',
  enterBetAmount: 'Введите сумму ставки',
  autoCashout: 'Авто кешаут',
  placeBet: 'ПОСТАВИТЬ',
  
  // Баланс и валюты
  balanceAllCurrencies: 'Баланс во всех валютах:',
  refreshBalance: 'Обновить баланс',
  
  // Бонусы
  superBonus: '🎉 СУПЕР БОНУС!',
  bonusText: 'Вы получите +500% к первому пополнению!<br>Максимальный бонус до $5000!',
  continueDeposit: 'ПРОДОЛЖИТЬ ПОПОЛНЕНИЕ',
  bonusDescription: 'Получайте ежедневные бонусы, участвуйте в акциях и выигрывайте призы!',
  promoCode: '🎫 Промо-код',
  enterPromo: 'Введите промо-код',
  activate: 'АКТИВИРОВАТЬ',
  spinWheel: '🎰 КРУТИТЬ КОЛЕСО',
  getBonusOffer: '🎁 ПОЛУЧИТЕ +500% К ПЕРВОМУ ПОПОЛНЕНИЮ',
  
  // VIP
  becomeVip: 'СТАТЬ VIP',
  vipBenefits: '• Эксклюзивные бонусы<br>• Персональный менеджер<br>• Приоритетная поддержка<br>• Особые условия игры',
  
  // Слоты
  chooseSlot: '🎰 ВЫБЕРИТЕ СЛОТ',
  slot1Desc: 'Классический слот с тропической атмосферой и отличными бонусами',
  slot2Desc: 'Захватывающий авиа-слот с высокими коэффициентами и бонусными раундами',
  slot3Desc: 'Слот с джекпотом в миллион! Попробуйте свою удачу и выиграйте крупный приз',
  slot4Desc: 'Криминальная тематика с большими выигрышами и захватывающим геймплеем',
  slot5Desc: 'Быстрые поезда и золотые монеты! Скоростной слот с отличными бонусами',
  slotGame: 'Игра в слот',
  fullscreen: '📺 На весь экран',
  
  // Минер
  minerTitle: '💣 МИНЕР',
  minerGameTitle: '💎 ИГРА МИНЕР',
  currentMultiplier: 'Текущий множитель',
  foundGems: 'Найдено алмазов',
  bet: 'Ставка',
  minerPlaceBet: 'Сделайте ставку и начните игру!',
  
  // Формы и платежи
  loginTelegram: 'Вход через Telegram',
  telegramUsername: '@username или ID Telegram',
  loginViaTelegram: 'ВОЙТИ ЧЕРЕЗ TELEGRAM',
  balanceDeposit: 'Пополнение баланса',
  cryptoPayTelegram: '💎 CryptoPay - Пополнить через Telegram',
  cryptoPayments: '💰 Криптовалютные платежи',
  cryptoTransfer: 'Переводом',
  cardTransfer: '💳 Перевод на карту',
  cardNumber: 'Номер карты',
  cardHolder: 'Имя держателя',
  transfer: '💳 ПЕРЕВЕСТИ',
  amount: 'Сумма',
  amountDollar: 'Сумма ($)',
  withdrawButton: 'ВЫВЕСТИ',
  myHistory: 'Моя история',
  
  // Новые переводы для системы проверки
  confirmAmount: 'ПОДТВЕРДИТЬ СУММУ',
  paymentDetails: 'Детали платежа',
  amountToPay: 'Сумма к переводу:',
  checkPayment: 'ПРОВЕРИТЬ',
  cardPayment: 'Оплата картой',
  
  // Техподдержка
  techSupport: 'Техническая поддержка',
  supportText: 'Если у вас возникли вопросы или проблемы, свяжитесь с нашей службой поддержки по электронной почте:',
  aiSupport: 'ИИ Поддержка 🤖',
  aiWelcome: 'Привет! Я ИИ-ассистент службы поддержки. Чем могу помочь? 🤖',
  writeQuestion: 'Напишите ваш вопрос...',
  
  // Статистика
  onlinePlayers: 'Онлайн игроков',
  withdrawnToday: 'Выведено сегодня',
  gameProtection: 'Защита игр',
  
  // Описания
  gamesDescription: 'Играйте в увлекательные игры и выигрывайте крупные призы. Краш, слоты, минер и многое другое для максимального азарта!',
  bonusesDescription: 'Получайте ежедневные бонусы, участвуйте в акциях и крутите колесо фортуны для дополнительных призов и наград!',
  vipDescription: 'Станьте VIP игроком и получите эксклюзивные бонусы, персонального менеджера и особые привилегии!',
  appDescription: 'Приложение с быстрым доступом к платформе',
  
  // Бонусные карточки
  dailyBonus: 'Ежедневный бонус',
  dailyBonusDesc: 'Заходите каждый день и получайте бонусы',
  fortuneWheel: 'Колесо фортуны',
  fortuneWheelDesc: 'Крутите колесо и выигрывайте призы',
  tournaments: 'Турниры',
  tournamentsDesc: 'Участвуйте в турнирах и побеждайте',
  cashback: 'Кешбэк',
  cashbackDesc: 'Возвращайте часть потраченных средств',
  referral: 'Реферальная система',
  referralDesc: 'Приглашайте друзей и получайте бонусы',
  specialOffers: 'Специальные акции',
  specialOffersDesc: 'Участвуйте в праздничных акциях',
  
  // Админ панель
  adminPanel: '👨‍💼 Админ панель',
  promoCodeText: 'Код промокода',
  bonusAmount: 'Сумма бонуса',
  createPromo: 'Создать промо-код',
  
  // Уведомления
  appSoon: 'Приложение скоро будет доступно',
  moreLinksSoon: 'Больше ссылок скоро',
  bonusSystemSoon: 'Система бонусов скоро будет доступна!',
  
  // Новые переводы для системы авторизации
  loginRequired: 'Войдите в аккаунт для ставок',
  loginToPlay: 'ВОЙТИ'
},
en: {
  // General translations
  loading: 'Loading game...',
  player: 'PLAYER',
  bonuses: 'BONUSES',
  games: 'GAMES',
  crash: 'CRASH',
  miner: 'MINER',
  slots: 'SLOTS',
  support: 'Support',
  balance: 'Balance',
  deposit: 'Deposit',
  withdraw: 'Withdraw',
  login: 'LOGIN',
  close: 'CLOSE',
  play: 'PLAY',
  take: 'TAKE',
  cancel: 'CANCEL',
  all: 'ALL',
  
  // Game
  playersCount: '0 players',
  waitingBets: 'Waiting for bets!',
  multiplierLabel: 'X',
  recentX: 'Recent X',
  refueling: 'Refueling shuttle',
  bet1: 'Bet 1',
  bet2: 'Bet 2',
  enterBetAmount: 'Enter bet amount',
  autoCashout: 'Auto cashout',
  placeBet: 'PLACE BET',
  
  // Balance and currencies
  balanceAllCurrencies: 'Balance in all currencies:',
  refreshBalance: 'Refresh balance',
  
  // Bonuses
  superBonus: '🎉 SUPER BONUS!',
  bonusText: 'You will get +500% on your first deposit!<br>Maximum bonus up to $5000!',
  continueDeposit: 'CONTINUE DEPOSIT',
  bonusDescription: 'Get daily bonuses, participate in promotions and win prizes!',
  promoCode: '🎫 Promo code',
  enterPromo: 'Enter promo code',
  activate: 'ACTIVATE',
  spinWheel: '🎰 SPIN WHEEL',
  getBonusOffer: '🎁 GET +500% ON FIRST DEPOSIT',
  
  // VIP
  becomeVip: 'BECOME VIP',
  vipBenefits: '• Exclusive bonuses<br>• Personal manager<br>• Priority support<br>• Special game conditions',
  
  // Slots
  chooseSlot: '🎰 CHOOSE SLOT',
  slot1Desc: 'Classic slot with tropical atmosphere and great bonuses',
  slot2Desc: 'Exciting aviation slot with high multipliers and bonus rounds',
  slot3Desc: 'Slot with million jackpot! Try your luck and win big prize',
  slot4Desc: 'Criminal theme with big winnings and exciting gameplay',
  slot5Desc: 'Fast trains and golden coins! High-speed slot with great bonuses',
  slotGame: 'Slot game',
  fullscreen: '📺 Fullscreen',
  
  // Miner
  minerTitle: '💣 MINER',
  minerGameTitle: '💎 MINER GAME',
  currentMultiplier: 'Current multiplier',
  foundGems: 'Gems found',
  bet: 'Bet',
  minerPlaceBet: 'Place your bet and start the game!',
  
  // Forms and payments
  loginTelegram: 'Login via Telegram',
  telegramUsername: '@username or Telegram ID',
  loginViaTelegram: 'LOGIN VIA TELEGRAM',
  balanceDeposit: 'Balance deposit',
  cryptoPayTelegram: '💎 CryptoPay - Deposit via Telegram',
  cryptoPayments: '💰 Cryptocurrency payments',
  cryptoTransfer: 'By transfer',
  cardTransfer: '💳 Card transfer',
  cardNumber: 'Card number',
  cardHolder: 'Cardholder name',
  transfer: '💳 TRANSFER',
  amount: 'Amount',
  amountDollar: 'Amount ($)',
  withdrawButton: 'WITHDRAW',
  myHistory: 'My history',
  
  // New translations for verification system
  confirmAmount: 'CONFIRM AMOUNT',
  paymentDetails: 'Payment details',
  amountToPay: 'Amount to pay:',
  checkPayment: 'CHECK',
  cardPayment: 'Card payment',
  
  // Support
  techSupport: 'Technical Support',
  supportText: 'If you have any questions or problems, contact our support team by email:',
  aiSupport: 'AI Support 🤖',
  aiWelcome: 'Hi! I\'m an AI assistant from support service. How can I help? 🤖',
  writeQuestion: 'Write your question...',
  
  // Statistics
  onlinePlayers: 'Online players',
  withdrawnToday: 'Withdrawn today',
  gameProtection: 'Game protection',
  
  // Descriptions
  gamesDescription: 'Play exciting games and win big prizes. Crash, slots, miner and much more for maximum excitement!',
  bonusesDescription: 'Get daily bonuses, participate in promotions and spin the fortune wheel for additional prizes and rewards!',
  vipDescription: 'Become a VIP player and get exclusive bonuses, personal manager and special privileges!',
  appDescription: 'Application with quick access to the platform',
  
  // Bonus cards
  dailyBonus: 'Daily bonus',
  dailyBonusDesc: 'Log in every day and get bonuses',
  fortuneWheel: 'Fortune wheel',
  fortuneWheelDesc: 'Spin the wheel and win prizes',
  tournaments: 'Tournaments',
  tournamentsDesc: 'Participate in tournaments and win',
  cashback: 'Cashback',
  cashbackDesc: 'Get back part of spent money',
  referral: 'Referral system',
  referralDesc: 'Invite friends and get bonuses',
  specialOffers: 'Special offers',
  specialOffersDesc: 'Participate in holiday promotions',
  
  // Admin panel
  adminPanel: '👨‍💼 Admin panel',
  promoCodeText: 'Promo code',
  bonusAmount: 'Bonus amount',
  createPromo: 'Create promo code',
  
  // Notifications
  appSoon: 'Application will be available soon',
  moreLinksSoon: 'More links soon',
  bonusSystemSoon: 'Bonus system will be available soon!',
  
  // New translations for auth system
  loginRequired: 'Login to place bets',
  loginToPlay: 'LOGIN'
}
};

// ФУНКЦИЯ СМЕНЫ ЯЗЫКА
function changeLanguage(lang) {
if (!translations[lang]) return;

currentLanguage = lang;

// Обновляем активную кнопку языка
document.querySelectorAll('.language-btn').forEach(btn => btn.classList.remove('active'));
document.getElementById('lang' + lang.charAt(0).toUpperCase() + lang.slice(1)).classList.add('active');

// Применяем переводы ко всем элементам
applyTranslations();

// Сохраняем выбранный язык
localStorage.setItem('selectedLanguage', lang);
}

// ФУНКЦИЯ ПРИМЕНЕНИЯ ПЕРЕВОДОВ
function applyTranslations() {
const elements = document.querySelectorAll('[data-translate]');
elements.forEach(element => {
  const key = element.getAttribute('data-translate');
  if (translations[currentLanguage][key]) {
    if (element.innerHTML.includes('<br>')) {
      element.innerHTML = translations[currentLanguage][key];
    } else {
      element.textContent = translations[currentLanguage][key];
    }
  }
});

// Применяем переводы к placeholder'ам
const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
placeholderElements.forEach(element => {
  const key = element.getAttribute('data-translate-placeholder');
  if (translations[currentLanguage][key]) {
    element.placeholder = translations[currentLanguage][key];
  }
});

// Применяем переводы к title атрибутам
const titleElements = document.querySelectorAll('[data-translate-title]');
titleElements.forEach(element => {
  const key = element.getAttribute('data-translate-title');
  if (translations[currentLanguage][key]) {
    element.title = translations[currentLanguage][key];
  }
});

// Обновляем динамические элементы
updateDynamicTranslations();
}

// ФУНКЦИЯ ОБНОВЛЕНИЯ ДИНАМИЧЕСКИХ ПЕРЕВОДОВ
function updateDynamicTranslations() {
// Обновляем счетчик игроков
const playersText = document.getElementById('playersCountText');
if (playersText) {
  const count = players.length;
  playersText.textContent = currentLanguage === 'en' ? 
    `${count} players` : `${count} игроков`;
}

// Обновляем статус игры
const gameStatus = document.querySelector('.game-status');
if (gameStatus && !gameActive && waitingForBet) {
  gameStatus.textContent = translations[currentLanguage].waitingBets;
}

// Обновляем имя пользователя
const sidebarUserName = document.getElementById('sidebarUserName');
const topUsername = document.getElementById('topUsername');
if (!isLoggedIn) {
  if (sidebarUserName) sidebarUserName.textContent = translations[currentLanguage].player;
  if (topUsername) topUsername.textContent = translations[currentLanguage].player;
}
}

// Глобальные переменные
let balance = 1.00;
let gameActive = false;
let waitingForBet = false;
let gameInterval;
let multiplierHistory = [];
let players = [];
let recentBets = [];
let isLoggedIn = false;
let currentUser = null;
let userBetsHistory = [];
let isRefueling = false;
let refuelingProgress = 0;
let refuelingInterval;
let playerAddInterval;
let multiplierSpeed = 0.01;
let isVip = false;
let gamesSectionExpanded = true;
let currentSpaceObject = 0;
let cometsInterval;
let multiplier = 1.00;

// НОВЫЕ ПЕРЕМЕННЫЕ ДЛЯ ВИДЕО ФОНА
let gameVideoBackground;
let backgroundVideo;
let videoPlayed = false;

// НОВЫЕ ПЕРЕМЕННЫЕ ДЛЯ УЧЕТА КОЛИЧЕСТВА ИГР
let gamesPlayed = 0;

// НОВЫЕ ПЕРЕМЕННЫЕ ДЛЯ ТРЕЙДИНГА
let tradingSectionExpanded = false;
let cryptoPrices = {
  BTC: { price: 67234, change: 2.45 },
  ETH: { price: 3421, change: -1.23 },
  BNB: { price: 612, change: 0.87 },
  ADA: { price: 0.63, change: 3.12 }
};

// ПЕРЕМЕННЫЕ ДЛЯ ПОСЛЕДНИХ ВЫИГРЫШЕЙ
let recentWins = [];
let winsUpdateInterval;

// ДАННЫЕ ДЛЯ ДВУХ СТАВОК
let betsData = {
1: {
  placed: false,
  amount: 0,
  playerTookWin: false,
  autoCashoutEnabled: false,
  autoCashoutMultiplier: 2.00,
  playerId: null
},
2: {
  placed: false,
  amount: 0,
  playerTookWin: false,
  autoCashoutEnabled: false,
  autoCashoutMultiplier: 2.00,
  playerId: null
}
};

// ПЕРЕМЕННЫЕ ДЛЯ ИГРЫ МИНЕР
let minerGameActive = false;
let minerBetAmount = 0;
let minerField = [];
let minerGemsFound = 0;
let minerMultiplier = 1.00;
let minerBombs = [];
let minerGems = [];

// ПЕРЕМЕННЫЕ ДЛЯ ПРОМОКОДОВ И БАЗЫ ДАННЫХ
let promoCodes = {};
let usedPromos = new Set();

// ПЕРЕМЕННЫЕ ДЛЯ НОВОЙ СИСТЕМЫ ПРОВЕРКИ ПЛАТЕЖЕЙ
let currentCryptoType = '';
let currentCryptoAmount = 0;
let currentCardAmount = 0;
let cryptoCheckAttempts = 0;
let cardCheckAttempts = 0;

//ПЕРЕМЕННЫЕ ДЛЯ КРИПТОПЛАТЕЖЕЙ
const cryptoWallets = {
BTC: '1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa',
ETH: '0x0000000000000000000000000000000000000000',
USDT: 'TRX: TL8uZEZgKhiGLU6gJVz7G7q9Q7zGLYrGmJ',
TON: 'EQD-cvR0Nz6XAyRBpAaAGIl9S1cKqJmjr6-1q8e1q8e1q8'
};

// ОБНОВЛЕННЫЕ ДАННЫЕ ДЛЯ 5 СЛОТОВ
const slotsData = {
1: {
  title: 'Club Tropicana - Happy Hour',
  url: 'https://demogamesfree.pragmaticplay.net/gs2c/html5Game.do?extGame=1&symbol=vs12trpcnhour&gname=Club%20Tropicana%20-%20Happy%20Hour&jurisdictionID=99&mgckey=stylename@generic~SESSION@ae33b794-aea2-4e6d-ac44-1eea892f6882'
},
2: {
  title: 'Air Jet',
  url: 'https://100hp.game/airjet/demo/?language=ru&currency=usd&b=214cfb72acbe3a7790148663e86a9217687bd8ebd5586e5c3fb613ee931cf37d0f0657168109c01ff3c7a3b28eda288be9630b6d674477890b8c9aad00439284ddf618a3724df563d5abb068f480dde1ecfd67fb1aa7f698abfbc9d10980b10a933ee2600dd43cc8a84a82de48222fe5abccf6e7001ba23f1541597c919ff7db47e47ec5f112434999f0aeedaf7407b5f005199f9acc88dc1a0caa61deaa05bd331aa57e8af987624bf45f237c9215de74bf2957bd4b79.d87c536191c3c98bf8e2785026ee0e65.8e4c1b44-a28a-4a98-a92b-0d550c37e236&pik=01949204-952b-7900-89a8-dc2842e8d173'
},
3: {
  title: 'One Win Million',
  url: 'https://demo.bgaming-network.com/games/OneWinMillion/FUN?play_token=3df89694-1407-4915-bc0b-4bb48dc40cea'
},
4: {
  title: 'Crime Empire',
  url: 'https://100hp.game/crimeempire/demo/?language=ru&currency=usd&b=015b4219e0f9ac182b7787df831069777268f9b597cd2ada94644c299930b5197885445c14e9c47b6af6e8dcc38978ef5c4324fe95b6782a978142654a81a4702a3681c40330cd54c9772367f6645e7bd167f99f5e59f8102009f3102709cf2763aabe40106535e7efe4cbf7e44ddc1d8126b969e2c127b04f3778736b051ba9030fa24183ccda7483283574c6d9b24616cfb6b97b993a31d09b1e6ad77eb714be3e671e4318218aa7b394e7f8feb6187efbda55c82e02.691aced0f4e6b99addbc39990f3f8545.8e4c1b44-a28a-4a98-a92b-0d550c37e236&pik=0198091d-8ece-74db-a621-279ab8cb8298'
},
5: {
  title: 'Coin Express',
  url: 'https://betman.c4.eshkmmbxda.com/1win-prod-axis/static/game.html?wl=demo&game=coin_express&lang=ru&token=testtoken&ts=1755757565&history_url=&exit_url=https%3A%2F%2F1wqhbv.life%2F'
}
};

// API для синхронизации с Telegram ботом
const TELEGRAM_BOT_API = '8154373534:AAE5p4yy12tbkvukZ_SHccgxN3YpRCAQUbI';
const BOT_USERNAME = 'XRocket_EBOT';

// Система валют
let currentCurrency = 'USD';
const exchangeRates = {
USD: 1,
RUB: 92.5,
KZT: 450.2,
BTC: 0.000023
};

const currencySymbols = {
USD: '$',
RUB: '₽',
KZT: '₸',
BTC: '₿'
};

// 3D ракета переменные
let scene, camera, renderer, rocket, WIDTH, HEIGHT;
let sceneInitialized = false;

// ПЕРЕМЕННАЯ ДЛЯ ОТСЛЕЖИВАНИЯ ПОСЛЕДНЕГО СПИНА КОЛЕСА
let wheelLastSpin = 0;

// Элементы DOM
const multiplierEl = document.querySelector('.multiplier');
const gameStatus = document.querySelector('.game-status');
const balanceEl = document.querySelector('.top-balance-amount');
const playersContainer = document.getElementById('players-container');
const playersCountText = document.getElementById('playersCountText');
const totalBetsAmount = document.getElementById('totalBetsAmount');
const refuelingContainer = document.getElementById('refueling-container');
const progressBar = document.getElementById('progress-bar');
const topLoginBtn = document.getElementById('topLoginBtn');
const topUserInfo = document.getElementById('topUserInfo');
const topUsername = document.getElementById('topUsername');
const fortuneWheel = document.getElementById('fortuneWheel');
const gameMoon = document.getElementById('gameMoon');
const gameSun = document.getElementById('gameSun');
const gameBlackhole = document.getElementById('gameBlackhole');
const gameEarth = document.getElementById('gameEarth');
const gameForestBackground = document.getElementById('gameForestBackground');
const rocketStub = document.getElementById('rocketStub');
const cssRocketContainer = document.getElementById('css-rocket-container');
const cssRocketScene = document.getElementById('cssRocketScene');
const sidebarUserName = document.getElementById('sidebarUserName');
const sidebarUserId = document.getElementById('sidebarUserId');
const cometsContainer = document.getElementById('cometsContainer');
const leftSidebar = document.getElementById('leftSidebar');
const mobileMenuToggle = document.getElementById('mobileMenuToggle');
const unifiedWindow = document.getElementById('unifiedWindow');
const userLoginImage = document.getElementById('userLoginImage');

// НОВАЯ ФУНКЦИЯ ДЛЯ ОБНОВЛЕНИЯ СОСТОЯНИЯ КНОПОК СТАВОК
function updateBetButtonsState() {
  for (let betNum = 1; betNum <= 2; betNum++) {
    const betBtn = document.getElementById(`betBtn${betNum}`);
    
    if (!isLoggedIn) {
      // Если не авторизован - показываем кнопку входа
      betBtn.textContent = translations[currentLanguage].loginToPlay || 'ВОЙТИ';
      betBtn.classList.add('login-required');
      betBtn.classList.remove('disabled');
      betBtn.onclick = () => openForm('loginOverlay');
    } else {
      // Если авторизован - показываем обычную кнопку ставки
      betBtn.textContent = translations[currentLanguage].placeBet || 'ПОСТАВИТЬ';
      betBtn.classList.remove('login-required', 'disabled');
      betBtn.onclick = () => placeBet(betNum);
    }
  }
}

// НОВЫЕ ФУНКЦИИ ДЛЯ ТРЕЙДИНГА

// Функция переключения секции трейдинга
function toggleTradingSection() {
const tradingList = document.getElementById('tradingList');
const tradingHeader = document.getElementById('tradingHeader');

tradingSectionExpanded = !tradingSectionExpanded;

if (tradingSectionExpanded) {
  tradingList.classList.add('expanded');
  tradingHeader.classList.add('expanded');
} else {
  tradingList.classList.remove('expanded');
  tradingHeader.classList.remove('expanded');
}
}

// Функция показа информации о криптовалюте
function showCryptoInfo(symbol) {
const crypto = cryptoPrices[symbol];
if (!crypto) return;

const changeText = crypto.change >= 0 ? `+${crypto.change}%` : `${crypto.change}%`;
const changeColor = crypto.change >= 0 ? '#4caf50' : '#f44336';

showNotification(`${symbol}: $${crypto.price.toLocaleString()} (${changeText})`);
}

// Функция обновления цен криптовалют
function updateCryptoPrices() {
Object.keys(cryptoPrices).forEach(symbol => {
  const crypto = cryptoPrices[symbol];
  
  // Случайное изменение цены от -5% до +5%
  const changePercent = (Math.random() - 0.5) * 10;
  const newPrice = crypto.price * (1 + changePercent / 100);
  
  cryptoPrices[symbol].price = Math.max(0.01, newPrice);
  cryptoPrices[symbol].change = changePercent;
  
  // Обновляем отображение
  const priceEl = document.getElementById(`${symbol.toLowerCase()}-price`);
  const changeEl = document.getElementById(`${symbol.toLowerCase()}-change`);
  
  if (priceEl) {
    if (symbol === 'BTC') {
      priceEl.textContent = `$${Math.round(cryptoPrices[symbol].price).toLocaleString()}`;
    } else if (symbol === 'ADA') {
      priceEl.textContent = `$${cryptoPrices[symbol].price.toFixed(2)}`;
    } else {
      priceEl.textContent = `$${Math.round(cryptoPrices[symbol].price).toLocaleString()}`;
    }
  }
  
  if (changeEl) {
    const changeText = changePercent >= 0 ? `+${changePercent.toFixed(2)}%` : `${changePercent.toFixed(2)}%`;
    changeEl.textContent = changeText;
    changeEl.className = `price-change ${changePercent >= 0 ? 'positive' : 'negative'}`;
  }
});
}

// ФУНКЦИЯ ГЕНЕРАЦИИ СЛУЧАЙНОГО ВЫИГРЫША
function generateRandomWin() {
const games = ['crash', 'miner', 'slots'];
const gameNames = {
  crash: 'Краш',
  miner: 'Минер', 
  slots: 'Слоты'
};

const players = [
  'ИГРОК_001', 'ИГРОК_002', 'ИГРОК_003', 'ИГРОК_004', 'ИГРОК_005',
  'ИГРОК_006', 'ИГРОК_007', 'ИГРОК_008', 'ИГРОК_009', 'ИГРОК_010',
  'ИГРОК_011', 'ИГРОК_012', 'ИГРОК_013', 'ИГРОК_014', 'ИГРОК_015'
];

const randomGame = games[Math.floor(Math.random() * games.length)];
const randomPlayer = players[Math.floor(Math.random() * players.length)];
const randomAmount = Math.random() * 5000 + 10; // От $10 до $5010

return {
  game: randomGame,
  gameName: gameNames[randomGame],
  player: randomPlayer,
  amount: randomAmount,
  timestamp: Date.now()
};
}

// ФУНКЦИЯ ОБНОВЛЕНИЯ СПИСКА ВЫИГРЫШЕЙ
function updateRecentWins() {
const winsList = document.getElementById('winsList');
if (!winsList) return;

// Добавляем новый выигрыш
const newWin = generateRandomWin();
recentWins.unshift(newWin);

// Ограничиваем до 10 последних выигрышей
if (recentWins.length > 10) {
  recentWins.pop();
}

// Очищаем список и заново заполняем
winsList.innerHTML = '';

recentWins.forEach(win => {
  const winItem = document.createElement('div');
  winItem.className = 'win-item';
  
  winItem.innerHTML = `
    <div class="game-logo ${win.game}"></div>
    <div class="win-details">
      <div class="win-player">${win.player}</div>
      <div class="win-amount">$${win.amount.toFixed(2)}</div>
      <div class="win-game">${win.gameName}</div>
    </div>
  `;
  
  winsList.appendChild(winItem);
});
}

// НОВЫЕ ФУНКЦИИ ДЛЯ СИСТЕМЫ ПРОВЕРКИ ПЛАТЕЖЕЙ

// ФУНКЦИЯ ДЛЯ КРИПТОПЛАТЕЖЕЙ
function openCryptoTransfer(cryptoType) {
currentCryptoType = cryptoType;
cryptoCheckAttempts = 0;
closeForm('depositOverlay');

const modal = document.getElementById('cryptoTransferModal');
const title = document.getElementById('cryptoTransferTitle');
const walletDiv = document.getElementById('cryptoWalletAddress');

title.textContent = `${cryptoType} ${translations[currentLanguage].cryptoTransfer || 'перевод'}`;
walletDiv.innerHTML = `
  <strong>${cryptoType} ${translations[currentLanguage].address || 'адрес'}:</strong><br>
  ${cryptoWallets[cryptoType]}
`;

// Показываем контейнер для ввода суммы
document.getElementById('cryptoPaymentContainer').style.display = 'block';
document.getElementById('cryptoCheckContainer').style.display = 'none';

modal.classList.add('active');
}

function processCryptoDeposit() {
const amount = document.getElementById('cryptoTransferAmount').value;
const status = document.getElementById('cryptoTransferStatus');

if (!amount || parseFloat(amount) <= 0) {
  status.textContent = translations[currentLanguage].enterCorrectAmount || 'Введите корректную сумму';
  status.style.color = '#ff4444';
  return;
}

currentCryptoAmount = parseFloat(amount);

// Скрываем контейнер ввода суммы и показываем контейнер проверки
document.getElementById('cryptoPaymentContainer').style.display = 'none';
document.getElementById('cryptoCheckContainer').style.display = 'block';

// Заполняем данные для проверки
document.getElementById('cryptoPaymentAddress').textContent = cryptoWallets[currentCryptoType];
document.getElementById('cryptoPaymentAmount').textContent = formatAmount(currentCryptoAmount, 'USD');

// Сбрасываем счетчик попыток
cryptoCheckAttempts = 0;
document.getElementById('cryptoPaymentAttempts').style.display = 'none';
document.getElementById('cryptoCheckBtn').disabled = false;
document.getElementById('cryptoCheckStatus').textContent = '';
}

function checkCryptoPayment() {
cryptoCheckAttempts++;
const checkBtn = document.getElementById('cryptoCheckBtn');
const status = document.getElementById('cryptoCheckStatus');
const attemptsDiv = document.getElementById('cryptoPaymentAttempts');
const attemptCount = document.getElementById('cryptoAttemptCount');

// Показываем счетчик попыток
attemptsDiv.style.display = 'block';
attemptCount.textContent = cryptoCheckAttempts;

checkBtn.disabled = true;
status.textContent = translations[currentLanguage].checkingPayment || 'Проверяем платеж...';
status.style.color = '#ffd700';

setTimeout(() => {
  if (cryptoCheckAttempts < 10) {
    // Первые 9 попыток - ошибка
    status.textContent = translations[currentLanguage].paymentNotFound || 'Платеж не найден. Попробуйте еще раз.';
    status.style.color = '#ff4444';
    checkBtn.disabled = false;
  } else {
    // 10-я попытка - успех
    balance += currentCryptoAmount;
    updateAllBalanceDisplays();
    status.textContent = `${translations[currentLanguage].paymentConfirmed || 'Платеж подтвержден'}! +${formatAmount(currentCryptoAmount, 'USD')}`;
    status.style.color = '#4caf50';
    
    setTimeout(() => {
      closeForm('cryptoTransferModal');
    }, 2000);
  }
}, 2000);
}

// ФУНКЦИЯ ДЛЯ КАРТОЧНЫХ ПЛАТЕЖЕЙ
function processCardTransfer() {
const cardNumber = document.querySelector('[data-translate-placeholder="cardNumber"]').value;
const cardHolder = document.querySelector('[data-translate-placeholder="cardHolder"]').value;
const amount = document.querySelector('.card-transfer-section [data-translate-placeholder="amount"]').value;

if (!cardNumber || !cardHolder || !amount) {
  showNotification(translations[currentLanguage].fillAllFields || 'Заполните все поля');
  return;
}

// Закрываем форму пополнения и открываем модальное окно проверки карты
closeForm('depositOverlay');
currentCardAmount = parseFloat(amount);
cardCheckAttempts = 0;

// Показываем модальное окно проверки карты
const modal = document.getElementById('cardPaymentModal');
document.getElementById('cardAmountContainer').style.display = 'none';
document.getElementById('cardCheckContainer').style.display = 'block';
document.getElementById('cardPaymentAmountDisplay').textContent = formatAmount(currentCardAmount, 'USD');
document.getElementById('cardPaymentAttempts').style.display = 'none';
document.getElementById('cardCheckBtn').disabled = false;
document.getElementById('cardCheckStatus').textContent = '';

modal.classList.add('active');
}

function processCardPayment() {
const amount = document.getElementById('cardPaymentAmount').value;
const status = document.getElementById('cardPaymentStatus');

if (!amount || parseFloat(amount) <= 0) {
  status.textContent = translations[currentLanguage].enterCorrectAmount || 'Введите корректную сумму';
  status.style.color = '#ff4444';
  return;
}

currentCardAmount = parseFloat(amount);

// Скрываем контейнер ввода суммы и показываем контейнер проверки
document.getElementById('cardAmountContainer').style.display = 'none';
document.getElementById('cardCheckContainer').style.display = 'block';

// Заполняем данные для проверки
document.getElementById('cardPaymentAmountDisplay').textContent = formatAmount(currentCardAmount, 'USD');

// Сбрасываем счетчик попыток
cardCheckAttempts = 0;
document.getElementById('cardPaymentAttempts').style.display = 'none';
document.getElementById('cardCheckBtn').disabled = false;
document.getElementById('cardCheckStatus').textContent = '';
}

function checkCardPayment() {
cardCheckAttempts++;
const checkBtn = document.getElementById('cardCheckBtn');
const status = document.getElementById('cardCheckStatus');
const attemptsDiv = document.getElementById('cardPaymentAttempts');
const attemptCount = document.getElementById('cardAttemptCount');

// Показываем счетчик попыток
attemptsDiv.style.display = 'block';
attemptCount.textContent = cardCheckAttempts;

checkBtn.disabled = true;
status.textContent = translations[currentLanguage].checkingPayment || 'Проверяем платеж...';
status.style.color = '#ffd700';

setTimeout(() => {
  if (cardCheckAttempts < 10) {
    // Первые 9 попыток - ошибка
    status.textContent = translations[currentLanguage].paymentNotFound || 'Платеж не найден. Попробуйте еще раз.';
    status.style.color = '#ff4444';
    checkBtn.disabled = false;
  } else {
    // 10-я попытка - успех
    balance += currentCardAmount;
    updateAllBalanceDisplays();
    status.textContent = `${translations[currentLanguage].paymentConfirmed || 'Платеж подтвержден'}! +${formatAmount(currentCardAmount, 'USD')}`;
    status.style.color = '#4caf50';
    
    setTimeout(() => {
      closeForm('cardPaymentModal');
    }, 2000);
  }
}, 2000);
}

// ФУНКЦИИ БАЗЫ ДАННЫХ
function saveToDatabase() {
const data = {
  promoCodes: promoCodes,
  usedPromos: Array.from(usedPromos),
  balance: balance,
  userBetsHistory: userBetsHistory,
  isVip: isVip,
  currentLanguage: currentLanguage,
  isLoggedIn: isLoggedIn,
  currentUser: currentUser,
  lastSave: Date.now()
};
localStorage.setItem('xrocket_db', JSON.stringify(data));
}

function loadFromDatabase() {
try {
  const data = JSON.parse(localStorage.getItem('xrocket_db'));
  if (data) {
    promoCodes = data.promoCodes || {};
    usedPromos = new Set(data.usedPromos || []);
    if (data.balance) balance = data.balance;
    if (data.userBetsHistory) userBetsHistory = data.userBetsHistory;
    if (data.isVip) isVip = data.isVip;
    if (data.isLoggedIn) isLoggedIn = data.isLoggedIn;
    if (data.currentUser) currentUser = data.currentUser;
    if (data.currentLanguage) {
      currentLanguage = data.currentLanguage;
      changeLanguage(currentLanguage);
    }
  }
} catch (e) {
  console.error('Ошибка загрузки базы данных:', e);
}

// Загружаем сохраненный язык
const savedLanguage = localStorage.getItem('selectedLanguage');
if (savedLanguage && translations[savedLanguage]) {
  currentLanguage = savedLanguage;
  changeLanguage(currentLanguage);
}
}

// ФУНКЦИИ ПРОМОКОДОВ
function activatePromo() {
const promoInput = document.getElementById('promoInput');
const promoCode = promoInput.value.trim().toUpperCase();

if (!promoCode) {
  showNotification(translations[currentLanguage].enterPromoCode || 'Введите промо-код');
  return;
}

// АДМИН КОД
if (promoCode === 'ADMIN-20') {
  const adminPanel = document.getElementById('adminPanel');
  adminPanel.classList.toggle('show');
  updatePromoList();
  showNotification(translations[currentLanguage].adminPanelOpened || 'Админ панель открыта');
  promoInput.value = '';
  return;
}

// ОБЫЧНЫЕ ПРОМОКОДЫ
if (usedPromos.has(promoCode)) {
  showNotification(translations[currentLanguage].promoAlreadyUsed || 'Этот промо-код уже использован');
  return;
}

if (promoCodes[promoCode]) {
  const bonus = promoCodes[promoCode];
  balance += bonus;
  usedPromos.add(promoCode);
  updateAllBalanceDisplays();
  saveToDatabase();
  showNotification(`${translations[currentLanguage].promoActivated || 'Промо-код активирован'}! ${translations[currentLanguage].received || 'Получено'}: ${formatAmount(bonus, 'USD')}`);
  promoInput.value = '';
} else {
  showNotification(translations[currentLanguage].invalidPromo || 'Неверный промо-код');
}
}

function createPromo() {
const codeInput = document.getElementById('newPromoCode');
const valueInput = document.getElementById('newPromoValue');
const code = codeInput.value.trim().toUpperCase();
const value = parseFloat(valueInput.value);

if (!code || !value || value <= 0) {
  showNotification(translations[currentLanguage].fillFieldsCorrectly || 'Заполните все поля корректно');
  return;
}

promoCodes[code] = value;
saveToDatabase();
updatePromoList();
showNotification(`${translations[currentLanguage].promoCreated || 'Промо-код создан'} ${code} ${translations[currentLanguage].forAmount || 'на сумму'} ${formatAmount(value, 'USD')}`);
codeInput.value = '';
valueInput.value = '';
}

function deletePromo(code) {
delete promoCodes[code];
saveToDatabase();
updatePromoList();
showNotification(`${translations[currentLanguage].promoDeleted || 'Промо-код удален'} ${code}`);
}

function updatePromoList() {
const promoList = document.getElementById('promoList');
promoList.innerHTML = '';

for (const [code, value] of Object.entries(promoCodes)) {
  const promoItem = document.createElement('div');
  promoItem.className = 'promo-item';
  promoItem.innerHTML = `
    <span>${code}: ${formatAmount(value, 'USD')}</span>
    <button class="promo-delete-btn" onclick="deletePromo('${code}')">×</button>
  `;
  promoList.appendChild(promoItem);
}
}

// ИНИЦИАЛИЗАЦИЯ ВИДЕО ФОНА
document.addEventListener('DOMContentLoaded', () => {
gameVideoBackground = document.getElementById('gameVideoBackground');
backgroundVideo = document.getElementById('backgroundVideo');

// Настройка видео
if (backgroundVideo) {
  backgroundVideo.muted = true;
  backgroundVideo.loop = false; // Проигрывается только один раз
  backgroundVideo.preload = 'auto';
  
  // Обработчик окончания видео
  backgroundVideo.addEventListener('ended', () => {
    videoPlayed = true;
    gameVideoBackground.classList.add('sliding-down');
    
    // Убираем видео после анимации
    setTimeout(() => {
      gameVideoBackground.style.display = 'none';
    }, 2000);
  });
  
  // Обработчик загрузки видео
  backgroundVideo.addEventListener('canplay', () => {
    console.log('Видео готово к воспроизведению');
  });
  
  // Обработчик ошибки загрузки
  backgroundVideo.addEventListener('error', (e) => {
    console.error('Ошибка загрузки видео:', e);
    // Скрываем видео контейнер если видео не загрузилось
    gameVideoBackground.style.display = 'none';
  });
}
});

// ФУНКЦИЯ ЗАПУСКА ВИДЕО ФОНА
function startVideoBackground() {
if (!videoPlayed && backgroundVideo && gameVideoBackground) {
  gameVideoBackground.classList.add('playing');
  backgroundVideo.play().catch(error => {
    console.error('Ошибка воспроизведения видео:', error);
    // Скрываем видео если не удалось запустить
    gameVideoBackground.style.display = 'none';
  });
}
}

// ФУНКЦИЯ ОБНОВЛЕНИЯ ЦВЕТА ПОДСВЕТКИ ОКНА В ЗАВИСИМОСТИ ОТ МНОЖИТЕЛЯ
function updateWindowGlow() {
// Убираем все классы свечения
unifiedWindow.classList.remove('glow-yellow', 'glow-purple', 'glow-blue', 'glow-white');

if (gameActive && multiplier >= 3.00) {
  if (multiplier >= 3.00 && multiplier < 7.00) {
    // Желтый цвет для 3.00 - 7.00
    unifiedWindow.classList.add('glow-yellow');
  } else if (multiplier >= 7.00 && multiplier < 12.00) {
    // Фиолетовый цвет для 7.00 - 12.00
    unifiedWindow.classList.add('glow-purple');
  } else if (multiplier >= 12.00 && multiplier < 35.00) {
    // Голубой цвет для 12.00 - 35.00
    unifiedWindow.classList.add('glow-blue');
  } else if (multiplier >= 35.00) {
    // Белый цвет для более 35.00
    unifiedWindow.classList.add('glow-white');
  }
}
}

// МОБИЛЬНОЕ МЕНЮ
function toggleMobileMenu() {
leftSidebar.classList.toggle('open');
}

// Закрытие мобильного меню при клике вне его
document.addEventListener('click', function(event) {
const isClickInsideSidebar = leftSidebar.contains(event.target);
const isClickOnToggle = mobileMenuToggle.contains(event.target);

if (!isClickInsideSidebar && !isClickOnToggle && leftSidebar.classList.contains('open')) {
  leftSidebar.classList.remove('open');
}
});

// ФУНКЦИИ ДЛЯ СЛОТОВ
function openSlotsModal() {
document.getElementById('slotsModal').classList.add('active');
}

function closeSlotsModal() {
document.getElementById('slotsModal').classList.remove('active');
}

function openSlotGame(slotId) {
if (!slotsData[slotId]) return;

const slotGameModal = document.getElementById('slotGameModal');
const slotGameTitle = document.getElementById('slotGameTitle');
const slotGameIframe = document.getElementById('slotGameIframe');

slotGameTitle.textContent = slotsData[slotId].title;
slotGameIframe.src = slotsData[slotId].url;

closeSlotsModal();
slotGameModal.classList.add('active');
}

function closeSlotGame() {
const slotGameModal = document.getElementById('slotGameModal');
const slotGameIframe = document.getElementById('slotGameIframe');

slotGameModal.classList.remove('active');
slotGameIframe.src = '';

// Выход из полноэкранного режима если активен
if (document.fullscreenElement) {
  document.exitFullscreen();
}
}

function toggleSlotFullscreen() {
const slotGameContainer = document.querySelector('.slot-game-container');

if (!document.fullscreenElement) {
  slotGameContainer.requestFullscreen().then(() => {
    document.querySelector('.slot-fullscreen-btn').textContent = currentLanguage === 'en' ? 
      '📱 Exit fullscreen' : '📱 Выйти из полного экрана';
  }).catch(err => {
    console.error('Ошибка при переходе в полноэкранный режим:', err);
    showNotification(translations[currentLanguage].fullscreenError || 'Ошибка при переходе в полноэкранный режим');
  });
} else {
  document.exitFullscreen().then(() => {
    document.querySelector('.slot-fullscreen-btn').textContent = translations[currentLanguage].fullscreen || '📺 На весь экран';
  });
}
}

// Обработчик изменения полноэкранного режима
document.addEventListener('fullscreenchange', () => {
const fullscreenBtn = document.querySelector('.slot-fullscreen-btn');
if (fullscreenBtn) {
  if (document.fullscreenElement) {
    fullscreenBtn.textContent = currentLanguage === 'en' ? 
      '📱 Exit fullscreen' : '📱 Выйти из полного экрана';
  } else {
    fullscreenBtn.textContent = translations[currentLanguage].fullscreen || '📺 На весь экран';
  }
}
});

// ФУНКЦИИ ДЛЯ ИГРЫ МИНЕР
function initMinerField() {
const minerFieldEl = document.getElementById('minerField');
minerFieldEl.innerHTML = '';
minerField = [];
minerBombs = [];
minerGems = [];
minerGemsFound = 0;
minerMultiplier = 1.00;

// Создаем поле 5x5
for (let i = 0; i < 25; i++) {
  const cell = document.createElement('div');
  cell.className = 'miner-cell';
  cell.onclick = () => revealMinerCell(i);
  minerFieldEl.appendChild(cell);
  minerField.push({ revealed: false, isBomb: false });
}

// Размещаем 5 бомб случайно
const bombPositions = [];
while (bombPositions.length < 5) {
  const pos = Math.floor(Math.random() * 25);
  if (!bombPositions.includes(pos)) {
    bombPositions.push(pos);
    minerField[pos].isBomb = true;
  }
}

minerBombs = bombPositions;

// Остальные клетки - алмазы
for (let i = 0; i < 25; i++) {
  if (!minerField[i].isBomb) {
    minerGems.push(i);
  }
}

updateMinerStats();
}

function startMinerGame() {
const betInput = document.getElementById('minerBetInput');
const betAmount = parseFloat(betInput.value);
const startBtn = document.getElementById('minerStartBtn');
const cashoutBtn = document.getElementById('minerCashoutBtn');
const messageEl = document.getElementById('minerMessage');

if (!betAmount || betAmount <= 0) {
  updateMinerMessage(translations[currentLanguage].enterCorrectBet || 'Введите корректную сумму ставки!', 'info');
  return;
}

if (betAmount > balance) {
  updateMinerMessage(translations[currentLanguage].insufficientFunds || 'Недостаточно средств!', 'info');
  return;
}

balance -= betAmount;
updateAllBalanceDisplays();
minerBetAmount = betAmount;
minerGameActive = true;
minerGemsFound = 0;
minerMultiplier = 1.00;

initMinerField();
startBtn.style.display = 'none';
cashoutBtn.style.display = 'block';
betInput.disabled = true;

updateMinerMessage(translations[currentLanguage].selectCells || 'Выберите клетки, чтобы найти алмазы! Избегайте бомб!', 'info');
updateMinerStats();
}

function revealMinerCell(index) {
if (!minerGameActive || minerField[index].revealed) return;

const cells = document.querySelectorAll('.miner-cell');
const cell = cells[index];
minerField[index].revealed = true;

if (minerField[index].isBomb) {
  // Попали на бомбу - игра окончена
  cell.classList.add('revealed', 'bomb');
  cell.textContent = '💣';
  endMinerGame(false);
} else {
  // Нашли алмаз
  cell.classList.add('revealed', 'gem');
  cell.textContent = '💎';
  minerGemsFound++;
  
  // Увеличиваем множитель
  minerMultiplier = 1.00 + (minerGemsFound * 0.25);
  updateMinerStats();
  updateMinerMessage(`${translations[currentLanguage].gemFound || 'Алмаз найден'}! ${translations[currentLanguage].multiplier || 'Множитель'}: ${minerMultiplier.toFixed(2)}x`, 'win');

  // Проверяем, нашли ли все алмазы
  if (minerGemsFound === minerGems.length) {
    endMinerGame(true);
  }
}
}

function minerCashout() {
if (!minerGameActive) return;

const winAmount = minerBetAmount * minerMultiplier;
balance += winAmount;
updateAllBalanceDisplays();
endMinerGame(true, winAmount);
}

function endMinerGame(won, winAmount = 0) {
minerGameActive = false;
const startBtn = document.getElementById('minerStartBtn');
const cashoutBtn = document.getElementById('minerCashoutBtn');
const betInput = document.getElementById('minerBetInput');

// Показываем все бомбы
const cells = document.querySelectorAll('.miner-cell');
minerBombs.forEach(bombIndex => {
  if (!minerField[bombIndex].revealed) {
    cells[bombIndex].classList.add('revealed', 'bomb');
    cells[bombIndex].textContent = '💣';
  }
});

startBtn.style.display = 'block';
cashoutBtn.style.display = 'none';
betInput.disabled = false;

if (won) {
  if (winAmount > 0) {
    updateMinerMessage(`${translations[currentLanguage].youWon || 'Вы выиграли'} ${formatAmount(winAmount, 'USD')}!`, 'win');
  } else {
    updateMinerMessage(translations[currentLanguage].foundAllGems || 'Вы нашли все алмазы! Максимальный выигрыш!', 'win');
  }
} else {
  updateMinerMessage(translations[currentLanguage].hitBomb || 'Вы попали на бомбу! Игра окончена.', 'lose');
}

// Сброс через 3 секунды
setTimeout(() => {
  initMinerField();
  updateMinerMessage(translations[currentLanguage].minerPlaceBet || 'Сделайте ставку и начните новую игру!', 'info');
}, 3000);
}

function updateMinerStats() {
document.getElementById('minerMultiplier').textContent = minerMultiplier.toFixed(2) + 'x';
document.getElementById('minerGemsFound').textContent = minerGemsFound;
}

function updateMinerMessage(text, type = 'info') {
const messageEl = document.getElementById('minerMessage');
messageEl.textContent = text;
messageEl.className = `miner-message ${type}`;
}

// ФУНКЦИЯ СОЗДАНИЯ КРАСИВОГО ЗВЕЗДНОГО НЕБА
function createStarfield() {
const starfield = document.getElementById('starfield');
const gameStarfield = document.querySelector('.game-section .starfield');

for (let i = 0; i < 200; i++) {
  const star = document.createElement('div');
  star.className = 'star';
  
  const sizes = ['small', 'medium', 'large'];
  const weights = [70, 25, 5];
  const rand = Math.random() * 100;
  let size;
  if (rand < weights[0]) size = sizes[0];
  else if (rand < weights[0] + weights[1]) size = sizes[1];
  else size = sizes[2];
  
  star.classList.add(size);
  
  star.style.left = Math.random() * 100 + '%';
  star.style.top = Math.random() * 100 + '%';
  star.style.animationDelay = Math.random() * 3 + 's';
  
  starfield.appendChild(star);
  
  const gameStar = star.cloneNode();
  gameStarfield.appendChild(gameStar);
}
}

// ФУНКЦИЯ СОЗДАНИЯ ПАДАЮЩИХ ЗВЕЗД
function createShootingStars() {
const starfield = document.getElementById('starfield');

setInterval(() => {
  if (Math.random() < 0.3) {
    const shootingStar = document.createElement('div');
    shootingStar.className = 'shooting-star';
    
    shootingStar.style.left = Math.random() * 50 + '%';
    shootingStar.style.top = Math.random() * 50 + '%';
    
    starfield.appendChild(shootingStar);
    
    setTimeout(() => {
      if (shootingStar.parentNode) {
        shootingStar.parentNode.removeChild(shootingStar);
      }
    }, 3000);
  }
}, 3000);
}

// ФУНКЦИЯ СОЗДАНИЯ КОМЕТ - ЛЕТЯЩИХ ПОД НАКЛОНОМ ВНИЗ БЕЗ ВРАЩЕНИЯ
function createComets() {
const numComets = Math.floor(Math.random() * 5) + 3; // От 3 до 7 комет

for (let i = 0; i < numComets; i++) {
  setTimeout(() => {
    const comet = document.createElement('div');
    comet.className = 'comet';
    comet.style.top = Math.random() * 30 + '%'; // Начинают сверху
    comet.style.left = '-100px';
    comet.style.animationDelay = Math.random() * 2 + 's';
    comet.style.animationDuration = (Math.random() * 4 + 4) + 's';
    
    cometsContainer.appendChild(comet);
    
    setTimeout(() => {
      if (comet.parentNode) {
        comet.parentNode.removeChild(comet);
      }
    }, 12000);
  }, i * 1000);
}
}

// Запуск комет каждые 10-15 секунд
function startComets() {
cometsInterval = setInterval(() => {
  createComets();
}, Math.random() * 5000 + 10000);
}

// Функция синхронизации баланса с Telegram ботом
async function syncBalanceWithBot(telegramId) {
try {
  const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_API}/sendMessage`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      chat_id: telegramId,
      text: '/balance'
    })
  });
  
  if (response.ok) {
    const newBalance = Math.random() * 1000 + 100;
    balance = newBalance;
    updateAllBalanceDisplays();
    showNotification(`${translations[currentLanguage].balanceSynced || 'Баланс синхронизирован'}: ${formatAmount(newBalance, 'USD')}`);
  }
} catch (error) {
  console.error('Ошибка синхронизации с ботом:', error);
  showNotification(translations[currentLanguage].botSyncError || 'Ошибка синхронизации с ботом');
}
}

// Функция входа через Telegram
function loginTelegram() {
const telegramUsername = document.getElementById('telegramUsername').value;
const loginStatus = document.getElementById('loginStatus');

if (!telegramUsername) {
  loginStatus.textContent = translations[currentLanguage].enterTelegramUsername || 'Введите @username или ID Telegram';
  loginStatus.style.color = '#ff4444';
  return;
}

isLoggedIn = true;
currentUser = { telegramUsername };
topUsername.textContent = telegramUsername.toUpperCase();
updateAuthInterface();
updateBetButtonsState(); // ОБНОВЛЯЕМ СОСТОЯНИЕ КНОПОК СТАВОК
closeForm('loginOverlay');

// ПОКАЗЫВАЕМ КАРТИНКУ ПРИ ВХОДЕ
setTimeout(() => {
  userLoginImage.classList.add('show');
  
  // Убираем картинку через 5 секунд
  setTimeout(() => {
    userLoginImage.classList.remove('show');
  }, 5000);
}, 500);

if (telegramUsername.startsWith('@')) {
  syncBalanceWithBot(telegramUsername.substring(1));
} else {
  syncBalanceWithBot(telegramUsername);
}

loginStatus.textContent = translations[currentLanguage].successfulLogin || 'Успешный вход через Telegram!';
loginStatus.style.color = '#4caf50';

// Сохраняем состояние авторизации
saveToDatabase();
}

function openCryptoPay() {
window.open('http://t.me/send?start=IVUdSw2TpptH', '_blank');
showNotification(translations[currentLanguage].redirectingCryptoPay || 'Переход в CryptoPay Telegram...');
}

function openDepositFromWelcome() {
closeWelcomeImage();
showDepositBonusModal();
}

// ФУНКЦИИ ДЛЯ МОДАЛЬНОГО ОКНА С БОНУСОМ
function showDepositBonusModal() {
document.getElementById('depositBonusModal').classList.add('active');
}

function closeDepositBonus() {
document.getElementById('depositBonusModal').classList.remove('active');
}

function continueToDeposit() {
closeDepositBonus();
openForm('depositOverlay');
}

// Функции загрузки
function startLoading() {
let progress = 0;
const progressBar = document.getElementById('loadingProgressBar');
const progressText = document.getElementById('loadingText');

const loadingInterval = setInterval(() => {
  progress += Math.random() * 3 + 1;
  if (progress > 100) progress = 100;
  
  progressBar.style.width = progress + '%';
  progressText.textContent = Math.floor(progress) + '%';
  
  if (progress >= 100) {
    clearInterval(loadingInterval);
    setTimeout(() => {
      document.getElementById('loadingScreen').style.display = 'none';
    }, 500);
  }
}, 100);
}

function toggleGamesSection() {
const gamesList = document.getElementById('gamesList');
const gamesHeader = document.getElementById('gamesHeader');

gamesSectionExpanded = !gamesSectionExpanded;

if (gamesSectionExpanded) {
  gamesList.classList.add('expanded');
  gamesHeader.classList.add('expanded');
} else {
  gamesList.classList.remove('expanded');
  gamesHeader.classList.remove('expanded');
}
}

// Функции валют
function convertAmount(amount, fromCurrency, toCurrency) {
if (fromCurrency === toCurrency) return amount;
const usdAmount = amount / exchangeRates[fromCurrency];
return usdAmount * exchangeRates[toCurrency];
}

function formatAmount(amount, currency = currentCurrency) {
const symbol = currencySymbols[currency];
if (currency === 'BTC') {
  return `${symbol}${amount.toFixed(8)}`;
}
return `${symbol}${amount.toLocaleString('ru-RU', {
  minimumFractionDigits: 2,
  maximumFractionDigits: 2
})}`;
}

function updateAllBalanceDisplays() {
const balanceInCurrentCurrency = convertAmount(balance, 'USD', currentCurrency);
document.getElementById('balanceDisplay').textContent = formatAmount(balanceInCurrentCurrency);

document.getElementById('balanceUSD').textContent = formatAmount(balance, 'USD');
document.getElementById('balanceRUB').textContent = formatAmount(convertAmount(balance, 'USD', 'RUB'), 'RUB');
document.getElementById('balanceKZT').textContent = formatAmount(convertAmount(balance, 'USD', 'KZT'), 'KZT');
document.getElementById('balanceBTC').textContent = formatAmount(convertAmount(balance, 'USD', 'BTC'), 'BTC');
}

function changeCurrency(currency) {
currentCurrency = currency;
document.querySelectorAll('.currency-btn').forEach(btn => btn.classList.remove('active'));
document.querySelector(`[data-currency="${currency}"]`).classList.add('active');
updateAllBalanceDisplays();
document.getElementById('betInput1').placeholder = `${translations[currentLanguage].enterBetAmount || 'Введите сумму'} в ${currency}`;
document.getElementById('betInput2').placeholder = `${translations[currentLanguage].enterBetAmount || 'Введите сумму'} в ${currency}`;
}

function toggleCurrencyDropdown() {
const dropdown = document.getElementById('currencyDropdown');
dropdown.classList.toggle('active');
}

document.addEventListener('click', function(event) {
const balanceSection = document.querySelector('.top-balance-section');
const dropdown = document.getElementById('currencyDropdown');

if (!balanceSection.contains(event.target)) {
  dropdown.classList.remove('active');
}
});

function changeTheme(theme) {
document.body.setAttribute('data-theme', theme);
document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
document.querySelector(`.theme-btn.${theme}`).classList.add('active');
}

function updateSpaceObjects() {
gameMoon.classList.remove('visible');
gameSun.classList.remove('visible');
gameBlackhole.classList.remove('visible');

if (!gameActive) {
  currentSpaceObject = 0;
  return;
}

if (multiplier >= 2.5) {
  const objectIndex = Math.floor((Date.now() / 3000) % 3);
  
  switch(objectIndex) {
    case 0:
      gameMoon.classList.add('visible');
      break;
    case 1:
      gameSun.classList.add('visible');
      break;
    case 2:
      gameBlackhole.classList.add('visible');
      break;
  }
}
}

function updateForestBackground() {
if (gameActive) {
  if (multiplier >= 1.5 && multiplier < 3.0) {
    gameForestBackground.classList.add('visible');
    gameForestBackground.classList.remove('moving');
  } else if (multiplier >= 3.0) {
    gameForestBackground.classList.add('moving');
  }
} else if (isRefueling) {
  gameForestBackground.classList.add('visible');
  gameForestBackground.classList.remove('moving');
} else {
  gameForestBackground.classList.remove('visible', 'moving');
}
}

// ОБНОВЛЕННАЯ ФУНКЦИЯ ГЕНЕРАЦИИ МНОЖИТЕЛЯ С НОВОЙ ЛОГИКОЙ
function getTargetMultiplier() {
gamesPlayed++;

// Первые 3 игры для нового пользователя
if (gamesPlayed === 1) {
  // Первая игра: 5.00x - 11.00x
  return 5.00 + Math.random() * 6.00;
} else if (gamesPlayed === 2 || gamesPlayed === 3) {
  // Вторая и третья игра: 2.50x - 3.00x
  return 2.50 + Math.random() * 0.50;
}

// Начиная с 4-й игры - обычный рандом
const rand = Math.random();

// 5% шанс на очень низкий множитель (0.00x - 1.40x)
if (rand < 0.05) {
  const lowRand = Math.random();
  if (lowRand < 0.3) {
    return 0.00; // Редкий случай 0.00x
  } else {
    return 1.00 + Math.random() * 0.40; // 1.00x - 1.40x
  }
}

// 35% шанс на множитель меньше 3.00x (общий шанс больше 3.00x = 60%)
if (rand < 0.40) {
  return 1.50 + Math.random() * 1.50; // 1.50x - 3.00x
}

// 35% шанс на множитель 3.00x - 7.50x
if (rand < 0.75) {
  return 3.00 + Math.random() * 4.50; // 3.00x - 7.50x
}

// 15% шанс на множитель больше 7.50x (общий шанс больше 7.5x = 40% - 25% = 15%)
if (rand < 0.90) {
  return 7.50 + Math.random() * 25.00; // 7.50x - 32.50x
}

// 10% шанс на очень высокий множитель до 120.00x максимум
return 32.50 + Math.random() * 87.50; // 32.50x - 120.00x
}

// ФУНКЦИИ ДЛЯ ДВУХ СТАВОК
function addToBet(betNum, amount) {
// Проверяем авторизацию
if (!isLoggedIn) {
  showNotification(translations[currentLanguage].loginRequired || 'Войдите в аккаунт для ставок');
  return;
}

const betInput = document.getElementById(`betInput${betNum}`);
const currentAmount = parseFloat(betInput.value) || 0;
const convertedAmount = convertAmount(amount, 'USD', currentCurrency);
betInput.value = (currentAmount + convertedAmount).toFixed(2);
}

// ИСПРАВЛЕННАЯ ФУНКЦИЯ ДЛЯ КНОПКИ "ВСЕ"
function setBetAll(betNum) {
// Проверяем авторизацию
if (!isLoggedIn) {
  showNotification(translations[currentLanguage].loginRequired || 'Войдите в аккаунт для ставок');
  return;
}

const betInput = document.getElementById(`betInput${betNum}`);
const balanceInCurrentCurrency = convertAmount(balance, 'USD', currentCurrency);

// Проверяем, что баланс больше 0
if (balanceInCurrentCurrency > 0) {
  betInput.value = balanceInCurrentCurrency.toFixed(2);
} else {
  betInput.value = '0.00';
  showNotification(translations[currentLanguage].insufficientFunds || 'Недостаточно средств на балансе');
}
}

// Функции чата поддержки
function toggleSupportChat() {
const chat = document.getElementById('supportChat');
const toggle = document.getElementById('supportChatToggle');

if (chat.classList.contains('active')) {
  chat.classList.remove('active');
  toggle.classList.remove('hidden');
} else {
  chat.classList.add('active');
  toggle.classList.add('hidden');
}
}

function handleChatKeyPress(event) {
if (event.key === 'Enter') {
  sendChatMessage();
}
}

function sendChatMessage() {
const input = document.getElementById('supportChatInput');
const messagesContainer = document.getElementById('supportChatMessages');
const message = input.value.trim();

if (!message) return;

const userMessage = document.createElement('div');
userMessage.className = 'chat-message user';
userMessage.textContent = message;
messagesContainer.appendChild(userMessage);

input.value = '';
messagesContainer.scrollTop = messagesContainer.scrollHeight;

setTimeout(() => {
  const aiResponse = generateAIResponse(message);
  const aiMessage = document.createElement('div');
  aiMessage.className = 'chat-message ai';
  aiMessage.textContent = aiResponse;
  messagesContainer.appendChild(aiMessage);
  messagesContainer.scrollTop = messagesContainer.scrollHeight;
}, 1000);
}

function generateAIResponse(userMessage) {
const message = userMessage.toLowerCase();

if (currentLanguage === 'en') {
  if (message.includes('balance') || message.includes('money') || message.includes('deposit')) {
    return '💰 To deposit balance click "Deposit" button. Use CryptoPay in Telegram for secure transactions.';
  } else if (message.includes('telegram') || message.includes('bot')) {
    return `🤖 Our bot @${BOT_USERNAME} will help with balance management and getting bonuses!`;
  } else if (message.includes('login') || message.includes('sign')) {
    return '🔐 We recommend logging in via Telegram to sync balance with the bot!';
  } else if (message.includes('slot') || message.includes('game')) {
    return '🎰 We have great slots! Find "SLOTS" button in the left menu and choose a game!';
  } else if (message.includes('miner')) {
    return '💣 Miner game - find all diamonds and avoid bombs! Click "MINER" in games menu.';
  } else {
    const responses = [
      '🤖 Interesting question! Could you clarify what exactly interests you?',
      '💭 I\'ll try to help! If I can\'t answer, I\'ll direct you to our specialists at ssss@mail.cr',
      '🎮 If you need help with games, I\'ll explain the rules! For other questions - ssss@mail.cr'
    ];
    return responses[Math.floor(Math.random() * responses.length)];
  }
} else {
  if (message.includes('баланс') || message.includes('деньги') || message.includes('пополнить')) {
    return '💰 Для пополнения баланса нажмите кнопку "Пополнить". Используйте CryptoPay в Telegram для безопасных транзакций.';
  } else if (message.includes('телеграм') || message.includes('бот')) {
    return `🤖 Наш бот @${BOT_USERNAME} поможет с управлением балансом и получением бонусов!`;
  } else if (message.includes('вход') || message.includes('логин')) {
    return '🔐 Рекомендуем входить через Telegram для синхронизации баланса с ботом!';
  } else if (message.includes('слот') || message.includes('игр')) {
    return '🎰 У нас есть отличные слоты! Найдите кнопку "СЛОТЫ" в меню слева и выберите игру по вкусу!';
  } else if (message.includes('минер')) {
    return '💣 Игра Минер - найдите все алмазы и избегайте бомб! Нажмите "МИНЕР" в меню игр.';
  } else {
    const responses = [
      '🤖 Интересный вопрос! Можете уточнить, что именно вас интересует?',
      '💭 Я постараюсь помочь! Если не смогу ответить, направлю к нашим специалистам на ssss@mail.cr',
      '🎮 Если нужна помощь с играми, объясню правила! По другим вопросам - ssss@mail.cr'
    ];
    return responses[Math.floor(Math.random() * responses.length)];
  }
}
}

function spinFortuneWheel() {
const bonusBtn = document.getElementById('bonusBtn');
const currentTime = Date.now();
const timeSinceLastSpin = currentTime - wheelLastSpin;
const tenMinutes = 10 * 60 * 1000;

if (timeSinceLastSpin < tenMinutes) {
  const remainingTime = Math.ceil((tenMinutes - timeSinceLastSpin) / 1000 / 60);
  const message = currentLanguage === 'en' ? 
    `Wheel can be spun in ${remainingTime} min` : 
    `Колесо можно крутить через ${remainingTime} мин`;
  showNotification(message);
  return;
}

if (bonusBtn.disabled) return;

bonusBtn.disabled = true;
bonusBtn.textContent = currentLanguage === 'en' ? 'Spinning...' : 'Крутится...';
wheelLastSpin = currentTime;

const prizes = [0.10, 0.25, 0.50, 1.00, 0.05, 0.75, 0.20, 0.15];
const randomIndex = Math.floor(Math.random() * prizes.length);
const prize = prizes[randomIndex];

const rotations = 5 + Math.random() * 5;
const finalAngle = (360 / 8) * randomIndex;
const totalRotation = rotations * 360 + finalAngle;

fortuneWheel.style.transform = `rotate(${totalRotation}deg)`;

setTimeout(() => {
  balance += prize;
  updateAllBalanceDisplays();
  const wonText = currentLanguage === 'en' ? 'Won' : 'Выиграли';
  bonusBtn.textContent = `${wonText} ${formatAmount(prize, 'USD')}!`;
  bonusBtn.style.background = '#4caf50';
  
  setTimeout(() => {
    bonusBtn.disabled = false;
    bonusBtn.textContent = translations[currentLanguage].spinWheel || '🎰 КРУТИТЬ КОЛЕСО';
    bonusBtn.style.background = '';
  }, 3000);
}, 3000);
}

function buyVip() {
if (balance >= 1000) {
  balance -= 1000;
  isVip = true;
  updateAllBalanceDisplays();
  showNotification(translations[currentLanguage].congratsVip || 'Поздравляем! Вы стали VIP игроком!');
  
  const vipSection = document.querySelector('.vip-section');
  const vipActiveText = currentLanguage === 'en' ? 
    '• Exclusive bonuses active<br>• Personal manager available<br>• Priority support<br>• Special game conditions' :
    '• Эксклюзивные бонусы активны<br>• Персональный менеджер доступен<br>• Приоритетная поддержка<br>• Особые условия игры';
  
  vipSection.innerHTML = `
    <div class="vip-title">👑 VIP ${currentLanguage === 'en' ? 'ACTIVE' : 'АКТИВЕН'}</div>
    <div class="vip-benefits">
      ${vipActiveText}
    </div>
  `;
} else {
  showNotification(translations[currentLanguage].insufficientFundsVip || 'Недостаточно средств для покупки VIP');
}
}

function updateBalance() {
updateAllBalanceDisplays();
}

function refreshBalance() {
const refreshBtn = document.querySelector('.refresh-balance-btn');
refreshBtn.style.transform = 'translateY(-1px) rotate(360deg)';

if (isLoggedIn && currentUser && currentUser.telegramUsername) {
  syncBalanceWithBot(currentUser.telegramUsername);
}

setTimeout(() => {
  updateBalance();
  refreshBtn.style.transform = '';
}, 500);
}

function closeWelcomeImage() {
document.getElementById('welcomeImageOverlay').classList.add('hidden');
}

function claimWelcomeBonus() {
closeWelcomeImage();
closeBonusesModal();
showDepositBonusModal();
}

function showNotification(message = 'Скоро будет') {
const notification = document.getElementById('notificationOverlay');
notification.textContent = message;
notification.classList.add('show');

setTimeout(() => {
  notification.classList.remove('show');
}, 3000);
}

function openSupport() {
document.getElementById('supportOverlay').classList.add('active');
}

function closeSupport() {
document.getElementById('supportOverlay').classList.remove('active');
}

function updateAuthInterface() {
if (isLoggedIn) {
  topLoginBtn.style.display = 'none';
  topUserInfo.style.display = 'flex';
  sidebarUserName.textContent = (currentUser.telegramUsername || currentUser.nick || translations[currentLanguage].player).toUpperCase();
} else {
  topLoginBtn.style.display = 'block';
  topUserInfo.style.display = 'none';
  sidebarUserName.textContent = translations[currentLanguage].player;
}

// ОБНОВЛЯЕМ СОСТОЯНИЕ КНОПОК СТАВОК
updateBetButtonsState();
}

function updatePlayersInfo() {
const activePlayersCount = players.length;
const totalBets = players.reduce((sum, player) => sum + player.bet, 0);
const playersText = currentLanguage === 'en' ? 
  `${activePlayersCount} players` : `${activePlayersCount} игроков`;
playersCountText.textContent = playersText;
totalBetsAmount.textContent = formatAmount(totalBets, 'USD');
}

// ОБНОВЛЕННЫЕ ФУНКЦИИ ДЛЯ ДВУХ КНОПОК ЗАБРАТЬ
function updateTakeButtonAmount(betNum) {
const takeBtnAmount = document.getElementById(`takeBtnAmount${betNum}`);
if (gameActive && betsData[betNum].amount > 0) {
  const winAmount = betsData[betNum].amount * multiplier;
  takeBtnAmount.textContent = formatAmount(winAmount, 'USD');
} else {
  takeBtnAmount.textContent = formatAmount(0, 'USD');
}
}

function addToHistory(mult) {
const inGameHistoryItem = document.createElement('div');
inGameHistoryItem.className = 'in-game-history-item';
inGameHistoryItem.textContent = mult.toFixed(2) + 'x';

if (mult >= 30) {
  inGameHistoryItem.classList.add('orange');
} else if (mult >= 10) {
  inGameHistoryItem.classList.add('purple');
} else if (mult >= 5) {
  inGameHistoryItem.classList.add('green');
} else if (mult < 2) {
  inGameHistoryItem.classList.add('red');
}

const inGameHistoryGrid = document.getElementById('in-game-history-grid');
inGameHistoryGrid.insertBefore(inGameHistoryItem, inGameHistoryGrid.firstChild);
while (inGameHistoryGrid.children.length > 25) {
  inGameHistoryGrid.removeChild(inGameHistoryGrid.lastChild);
}

multiplierHistory.unshift(mult);
if (multiplierHistory.length > 50) {
  multiplierHistory.pop();
}
}

function getRandomBet() {
let bet = Math.random() * 982;
if (bet < 1) {
  bet = Math.round(bet * 100) / 100;
} else if (bet < 10) {
  bet = Math.round(bet * 10) / 10;
} else {
  bet = Math.round(bet);
}
return bet;
}

function createPlayerCard(id, bet, isCurrentPlayer = false) {
const playerCard = document.createElement('div');
playerCard.className = 'player-card';
playerCard.id = `player-${id}`;
if (isCurrentPlayer) {
  playerCard.classList.add('current-player');
}

const playerName = document.createElement('div');
playerName.className = 'player-name';
playerName.textContent = translations[currentLanguage].player || 'ИГРОК';

const playerBet = document.createElement('div');
playerBet.className = 'player-bet';
const betText = currentLanguage === 'en' ? 'Bet' : 'Поставил';
playerBet.textContent = `${betText}: ${formatAmount(bet, 'USD')}`;

playerCard.appendChild(playerName);
playerCard.appendChild(playerBet);
playersContainer.appendChild(playerCard);

return {
  id,
  bet,
  hasWon: false,
  element: playerCard,
  betElement: playerBet
};
}

function updatePlayerWin(playerId, winAmount) {
const player = players.find(p => p.id === playerId);
if (!player) return;

player.hasWon = true;
player.element.classList.add('won');

const playerWin = document.createElement('div');
playerWin.className = 'player-win';
const wonText = currentLanguage === 'en' ? 'Won' : 'Выиграл';
playerWin.textContent = `${wonText}: ${formatAmount(winAmount, 'USD')}`;
player.element.appendChild(playerWin);
}

function updatePlayerLoss(playerId) {
const player = players.find(p => p.id === playerId);
if (!player || player.hasWon) return;
player.element.classList.add('lost');
}

function addPlayersGradually() {
const playersInfo = document.querySelector('.players-info');
playersContainer.innerHTML = '';
if (playersInfo) {
  playersContainer.appendChild(playersInfo);
}
players = [];
updatePlayersInfo();

const numPlayers = Math.floor(Math.random() * (321 - 51 + 1)) + 51;
let playersAdded = 0;

playerAddInterval = setInterval(() => {
  if (playersAdded < numPlayers && (waitingForBet || isRefueling)) {
    const bet = getRandomBet();
    const player = createPlayerCard(playersAdded, bet);
    players.push(player);
    playersAdded++;
    updatePlayersInfo();
  } else {
    clearInterval(playerAddInterval);
  }
}, Math.random() * 100 + 50);
}

function smartPlayerWins() {
if (!gameActive) return;

let winChance = 0;
if (multiplier >= 10) {
  winChance = 0.9;
} else if (multiplier >= 5) {
  winChance = 0.7;
} else if (multiplier >= 2) {
  winChance = 0.3;
} else {
  return;
}

players.forEach(player => {
  if (!player.hasWon && Math.random() < (winChance * 0.1)) {
    const winAmount = player.bet * multiplier;
    updatePlayerWin(player.id, winAmount);
  }
});
}

// 3D сцена
function createScene() {
HEIGHT = 350;
WIDTH = 350;
scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x5d0361, 10, 1500);
camera = new THREE.PerspectiveCamera(60, WIDTH / HEIGHT, 1, 10000);
camera.position.set(0, -10, 500);
renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
renderer.setSize(WIDTH, HEIGHT);
renderer.shadowMap.enabled = true;
const container = document.getElementById("canvas");
if (container) {
  container.innerHTML = '';
  container.appendChild(renderer.domElement);
}

const loader = new THREE.GLTFLoader();
loader.load("https://stivs.dev/assets/rocket/rocket.gltf", (gltf) => {
  if (rocket) {
    scene.remove(rocket);
  }
  rocket = gltf.scene;
  rocket.position.y = 50;
  scene.add(rocket);
});
}

function createLights() {
const ambientLight = new THREE.HemisphereLight(0x404040, 0x404040, 1);
const directionalLight = new THREE.DirectionalLight(0xdfebff, 1);
directionalLight.position.set(-300, 0, 600);
const pointLight = new THREE.PointLight(0xa11148, 2, 1000, 2);
pointLight.position.set(200, -100, 50);
scene.add(ambientLight, directionalLight, pointLight);
}

function loop() {
if (!renderer || !scene || !camera) return;
renderer.render(scene, camera);
if (rocket) {
  if (gameActive) {
    const t = (Date.now() % 2000) / 2000;
    const delta = 40 * Math.sin(Math.PI * 2 * t);
    rocket.rotation.y += 0.1;
    rocket.position.y = delta;
  } else {
    rocket.rotation.y = 0;
    rocket.position.y = 50;
  }
}
requestAnimationFrame(loop);
}

function showStub() {
document.getElementById('rocket-stub').style.display = 'block';
cssRocketContainer.style.display = 'none';
document.getElementById('rocket-3d-wrapper').style.display = 'none';
refuelingContainer.style.display = 'none';
rocketStub.classList.remove('active');
cssRocketScene.classList.remove('game-active', 'launching', 'flying-away');
}

function showCSSRocket() {
document.getElementById('rocket-stub').style.display = 'none';
cssRocketContainer.style.display = 'flex';
document.getElementById('rocket-3d-wrapper').style.display = 'none';
refuelingContainer.style.display = 'none';
}

function showRocket3D() {
document.getElementById('rocket-stub').style.display = 'none';
cssRocketContainer.style.display = 'none';
document.getElementById('rocket-3d-wrapper').style.display = 'block';
refuelingContainer.style.display = 'none';
rocketStub.classList.remove('active');
cssRocketScene.classList.remove('game-active', 'launching', 'flying-away');
}

function showRefueling() {
document.getElementById('rocket-stub').style.display = 'none';
cssRocketContainer.style.display = 'none';
document.getElementById('rocket-3d-wrapper').style.display = 'none';
refuelingContainer.style.display = 'flex';
rocketStub.classList.remove('active');
cssRocketScene.classList.remove('game-active', 'launching', 'flying-away');
}

// НОВАЯ ФУНКЦИЯ ДЛЯ АНИМАЦИИ УЛЕТАЮЩЕЙ РАКЕТЫ
function showRocketFlyingAway() {
showCSSRocket();
cssRocketScene.classList.remove('game-active', 'launching');
cssRocketScene.classList.add('flying-away');
}

function showWinAnimation(winAmount) {
const rocketContainer = document.querySelector('.rocket-container');
const winElement = document.createElement('div');
winElement.className = 'win-animation';
winElement.textContent = `+${formatAmount(winAmount, 'USD')}`;
rocketContainer.appendChild(winElement);
setTimeout(() => {
  if (winElement && winElement.parentNode) {
    winElement.parentNode.removeChild(winElement);
  }
}, 2000);
}

function startRefueling() {
if (isRefueling) return;

isRefueling = true;
waitingForBet = true;
refuelingProgress = 0;
showRefueling();
gameStatus.textContent = translations[currentLanguage].refueling || 'Заправляем ракету';
updateForestBackground();

// ЗАПУСК ВИДЕО ФОНА ПРИ ЗАПРАВКЕ
startVideoBackground();

if (playerAddInterval) {
  clearInterval(playerAddInterval);
}
refuelingInterval = setInterval(() => {
  refuelingProgress += 2;
  progressBar.style.width = refuelingProgress + '%';
  if (refuelingProgress >= 100) {
    clearInterval(refuelingInterval);
    isRefueling = false;
    startGame();
  }
}, 100);
}

function startGame() {
if (gameActive) return;

showCSSRocket();
cssRocketScene.classList.add('launching');
setTimeout(() => {
  cssRocketScene.classList.remove('launching');
  cssRocketScene.classList.add('game-active');
}, 2000);

const targetMultiplier = getTargetMultiplier();

// ОБРАБОТКА ДВУХ СТАВОК
for (let betNum = 1; betNum <= 2; betNum++) {
  const betInput = document.getElementById(`betInput${betNum}`);
  const betAmount = parseFloat(betInput.value) || 0;
  
  if (betsData[betNum].placed && !isNaN(betAmount) && betAmount > 0) {
    const betAmountInUSD = convertAmount(betAmount, currentCurrency, 'USD');
    if (betAmountInUSD > balance) {
      gameStatus.textContent = translations[currentLanguage].insufficientFunds || 'Недостаточно средств';
      betsData[betNum].amount = 0;
      betsData[betNum].placed = false;
      waitForBet();
      return;
    } else {
      betsData[betNum].amount = betAmountInUSD;
      document.getElementById(`takeBtn${betNum}`).style.display = 'flex';
      document.getElementById(`cancelBtn${betNum}`).style.display = 'none';
      
      const newPlayerId = players.length;
      const player = createPlayerCard(newPlayerId, betAmountInUSD, true);
      players.push(player);
      betsData[betNum].playerId = newPlayerId;
      
      if (isLoggedIn) {
        userBetsHistory.push({
          amount: betAmountInUSD,
          multiplier: 0,
          result: 'pending',
          timestamp: new Date()
        });
      }
    }
  } else {
    betsData[betNum].amount = 0;
    document.getElementById(`takeBtn${betNum}`).style.display = 'none';
  }
}

multiplier = 1.00;
multiplierSpeed = 0.01;
gameActive = true;
waitingForBet = false;
gameStatus.textContent = translations[currentLanguage].rocketTakingOff || 'Ракета взлетает!';
multiplierEl.textContent = `${multiplier.toFixed(2)}x`;

for (let betNum = 1; betNum <= 2; betNum++) {
  document.getElementById(`betBtn${betNum}`).style.display = 'none';
}

gameInterval = setInterval(() => {
  multiplierSpeed += 0.0005;
  multiplier += multiplierSpeed;
  multiplier = parseFloat(multiplier.toFixed(2));
  multiplierEl.textContent = `${multiplier.toFixed(2)}x`;
  
  // ОБНОВЛЯЕМ ПОДСВЕТКУ ОКНА
  updateWindowGlow();
  
  // Обновляем кнопки забрать для обеих ставок
  for (let betNum = 1; betNum <= 2; betNum++) {
    updateTakeButtonAmount(betNum);
    
    if (betsData[betNum].autoCashoutEnabled && multiplier >= betsData[betNum].autoCashoutMultiplier && betsData[betNum].amount > 0 && !betsData[betNum].playerTookWin) {
      takeWin(betNum);
    }
  }
  
  updateSpaceObjects();
  updateForestBackground();
  smartPlayerWins();

  if (multiplier >= targetMultiplier) {
    endGame(true, targetMultiplier);
  }
}, 100);

// Сбрасываем флаги ставок
for (let betNum = 1; betNum <= 2; betNum++) {
  betsData[betNum].placed = false;
}
}

// ЗАБРАТЬ ВЫИГРЫШ ДЛЯ КОНКРЕТНОЙ СТАВКИ
function takeWin(betNum) {
if (!gameActive || betsData[betNum].amount <= 0 || betsData[betNum].playerTookWin) return;

const winAmount = betsData[betNum].amount * multiplier;
balance += winAmount;
updateAllBalanceDisplays();
const wonText = currentLanguage === 'en' ? 'You won' : 'Вы выиграли';
gameStatus.textContent = `${wonText} ${formatAmount(winAmount, 'USD')}!`;
document.getElementById(`takeBtn${betNum}`).style.display = 'none';
betsData[betNum].playerTookWin = true;
showWinAnimation(winAmount);

if (betsData[betNum].playerId !== null) {
  updatePlayerWin(betsData[betNum].playerId, winAmount);
}

if (isLoggedIn && userBetsHistory.length > 0) {
  const lastBet = userBetsHistory[userBetsHistory.length - 1];
  if (lastBet.result === 'pending') {
    lastBet.multiplier = multiplier;
    lastBet.result = 'win';
    lastBet.winAmount = winAmount;
  }
}

setTimeout(() => {
  gameStatus.textContent = translations[currentLanguage].rocketPreparingAgain || 'Ракета готовится снова...';
}, 2000);
}

// ПОСТАВИТЬ СТАВКУ ДЛЯ КОНКРЕТНОГО ОКНА - ОБНОВЛЕНО С ПРОВЕРКОЙ АВТОРИЗАЦИИ
function placeBet(betNum) {
// ПРОВЕРЯЕМ АВТОРИЗАЦИЮ
if (!isLoggedIn) {
  showNotification(translations[currentLanguage].loginRequired || 'Войдите в аккаунт для ставок');
  openForm('loginOverlay');
  return;
}

if ((waitingForBet || isRefueling) && !betsData[betNum].placed) {
  const betInput = document.getElementById(`betInput${betNum}`);
  const betAmount = parseFloat(betInput.value);
  
  if (isNaN(betAmount) || betAmount <= 0) {
    gameStatus.textContent = translations[currentLanguage].enterCorrectBet || 'Введите корректную сумму ставки';
    return;
  }

  const betAmountInUSD = convertAmount(betAmount, currentCurrency, 'USD');
  if (betAmountInUSD > balance) {
    gameStatus.textContent = translations[currentLanguage].insufficientFunds || 'Недостаточно средств';
    return;
  }

  balance -= betAmountInUSD;
  updateAllBalanceDisplays();
  betsData[betNum].placed = true;
  document.getElementById(`betBtn${betNum}`).style.display = 'none';
  document.getElementById(`cancelBtn${betNum}`).style.display = 'block';
  gameStatus.textContent = translations[currentLanguage].betAccepted || 'Ставка принята!';
}
}

// ОТМЕНА СТАВКИ ДЛЯ КОНКРЕТНОГО ОКНА
function cancelBet(betNum) {
if (gameActive || !betsData[betNum].placed) return;

const betInput = document.getElementById(`betInput${betNum}`);
const betAmount = parseFloat(betInput.value);
if (!isNaN(betAmount) && betAmount > 0) {
  const betAmountInUSD = convertAmount(betAmount, currentCurrency, 'USD');
  balance += betAmountInUSD;
  updateAllBalanceDisplays();
  gameStatus.textContent = translations[currentLanguage].betCancelled || 'Ставка отменена';
}

betsData[betNum].placed = false;
betsData[betNum].amount = 0;
document.getElementById(`cancelBtn${betNum}`).style.display = 'none';
document.getElementById(`betBtn${betNum}`).style.display = 'block';

setTimeout(() => {
  gameStatus.textContent = translations[currentLanguage].waitingBets || 'Ожидание ставок!';
}, 2000);
}

// ОБНОВЛЕННАЯ ФУНКЦИЯ ОКОНЧАНИЯ ИГРЫ - РАКЕТА УЛЕТАЕТ ВМЕСТО ВЗРЫВА
function endGame(rocketFliesAway, finalMultiplier) {
clearInterval(gameInterval);
gameActive = false;
cssRocketScene.classList.remove('game-active', 'launching');

// УБИРАЕМ ПОДСВЕТКУ ОКНА
updateWindowGlow();

if (rocketFliesAway) {
  // Показываем анимацию улетающей ракеты
  showRocketFlyingAway();
  
  // УБИРАЕМ ВИДЕО ФОНА ПОСЛЕ ОКОНЧАНИЯ ИГРЫ, ЕСЛИ ОНО ЕЩЕ ИГРАЕТ
  if (gameVideoBackground && !videoPlayed) {
    gameVideoBackground.classList.add('sliding-down');
    setTimeout(() => {
      gameVideoBackground.style.display = 'none';
    }, 2000);
  }
}

players.forEach(player => {
  if (!player.hasWon) {
    updatePlayerLoss(player.id);
  }
});

addToHistory(finalMultiplier || multiplier);

if (isLoggedIn && userBetsHistory.length > 0) {
  const lastBet = userBetsHistory[userBetsHistory.length - 1];
  if (lastBet.result === 'pending') {
    lastBet.multiplier = finalMultiplier || multiplier;
    lastBet.result = 'loss';
  }
}

if (rocketFliesAway) {
  const rocketFlewText = currentLanguage === 'en' ? 'Rocket flew away!' : 'Ракета улетела!';
  multiplierEl.textContent = rocketFlewText;
  multiplierEl.style.color = '#ff8c00';
  multiplierEl.style.fontSize = '32px';
  
  // Проверяем, забрал ли игрок хотя бы одну ставку
  const anyWinTaken = betsData[1].playerTookWin || betsData[2].playerTookWin;
  if (anyWinTaken) {
    gameStatus.textContent = currentLanguage === 'en' ? 
      'Rocket flew away, but you managed to take the winnings!' :
      'Ракета улетела, но вы успели забрать выигрыш!';
  } else {
    gameStatus.textContent = currentLanguage === 'en' ? 
      'Rocket flew away beyond the screen!' :
      'Ракета улетела за пределы экрана!';
  }
} else {
  gameStatus.textContent = translations[currentLanguage].rocketFlewAway || 'Ракета улетела!';
}

for (let betNum = 1; betNum <= 2; betNum++) {
  document.getElementById(`takeBtn${betNum}`).style.display = 'none';
  document.getElementById(`cancelBtn${betNum}`).style.display = 'none';
}

setTimeout(() => {
  multiplierEl.style.color = 'var(--accent-color)';
  multiplierEl.style.fontSize = '48px';
  waitForBet();
}, 3000);
}

function waitForBet() {
waitingForBet = true;
multiplier = 0;

// Сбрасываем данные ставок
for (let betNum = 1; betNum <= 2; betNum++) {
  betsData[betNum].amount = 0;
  betsData[betNum].playerTookWin = false;
  betsData[betNum].playerId = null;
  document.getElementById(`betBtn${betNum}`).style.display = 'block';
  document.getElementById(`takeBtn${betNum}`).style.display = 'none';
  document.getElementById(`cancelBtn${betNum}`).style.display = 'none';
  updateTakeButtonAmount(betNum);
}

// ОБНОВЛЯЕМ СОСТОЯНИЕ КНОПОК СТАВОК
updateBetButtonsState();

multiplierEl.textContent = '×0';
gameStatus.textContent = translations[currentLanguage].waitingBets || 'Ожидание ставок!';

updateSpaceObjects();
updateForestBackground();
updateWindowGlow(); // Убираем подсветку

if (playerAddInterval) {
  clearInterval(playerAddInterval);
}

addPlayersGradually();
setTimeout(() => {
  startRefueling();
}, 2000);
}

// ПЕРЕКЛЮЧЕНИЕ АВТО КЕШАУТА ДЛЯ КОНКРЕТНОГО ОКНА
function toggleAutoCashout(betNum) {
// ПРОВЕРЯЕМ АВТОРИЗАЦИЮ
if (!isLoggedIn) {
  showNotification(translations[currentLanguage].loginRequired || 'Войдите в аккаунт для ставок');
  return;
}

betsData[betNum].autoCashoutEnabled = !betsData[betNum].autoCashoutEnabled;
const toggleSwitch = document.getElementById(`toggleSwitch${betNum}`);
const autoCashoutInput = document.getElementById(`autoCashoutInput${betNum}`);

toggleSwitch.classList.toggle('active');
autoCashoutInput.disabled = !betsData[betNum].autoCashoutEnabled;

if (betsData[betNum].autoCashoutEnabled) {
  autoCashoutInput.classList.add('active');
  betsData[betNum].autoCashoutMultiplier = parseFloat(autoCashoutInput.value) || 2.00;
} else {
  autoCashoutInput.classList.remove('active');
}
}

// Обновление значений авто кешаута
document.getElementById('autoCashoutInput1').addEventListener('input', (e) => {
const value = parseFloat(e.target.value);
if (!isNaN(value) && value >= 1.01) {
  betsData[1].autoCashoutMultiplier = value;
}
});

document.getElementById('autoCashoutInput2').addEventListener('input', (e) => {
const value = parseFloat(e.target.value);
if (!isNaN(value) && value >= 1.01) {
  betsData[2].autoCashoutMultiplier = value;
}
});

// ФУНКЦИИ ДЛЯ МОДАЛЬНЫХ ОКОН МИНЕР И БОНУСЫ
function openMinerModal()  {
document.getElementById('minerModal').classList.add('active');
initMinerField();
}

function closeMinerModal() {
document.getElementById('minerModal').classList.remove('active');
// Сбрасываем игру при закрытии
if (minerGameActive) {
  minerGameActive = false;
  balance += minerBetAmount; // Возвращаем ставку
  updateAllBalanceDisplays();
  document.getElementById('minerStartBtn').style.display = 'block';
  document.getElementById('minerCashoutBtn').style.display = 'none';
  document.getElementById('minerBetInput').disabled = false;
}
}

function openBonusModal() {
document.getElementById('bonusModal').classList.add('active');
}

function closeBonusModal() {
document.getElementById('bonusModal').classList.remove('active');
}

// Остальные функции остаются без изменений
function showProfile() {
if (isLoggedIn) {
  showBetsHistory();
} else {
  showNotification(translations[currentLanguage].loginToViewProfile || 'Войдите в аккаунт для просмотра профиля');
}
}

function selectGame(game) {
document.querySelectorAll('.game-item').forEach(btn => btn.classList.remove('active'));

// Закрываем мобильное меню после выбора
if (window.innerWidth <= 992) {
  leftSidebar.classList.remove('open');
}

switch(game) {
  case 'crash':
    document.querySelector('.game-item:nth-child(1)').classList.add('active');
    break;
  case 'miner':
    document.querySelector('.game-item:nth-child(2)').classList.add('active');
    openMinerModal();
    break;
  case 'slots':
    document.querySelector('.game-item:nth-child(3)').classList.add('active');
    openSlotsModal();
    break;
  case 'bonuses':
    document.querySelector('.game-item:nth-child(4)').classList.add('active');
    openBonusModal();
    break;
}
}

function openForm(formId) {
document.getElementById(formId).classList.add('active');
}

function closeForm(formId) {
document.getElementById(formId).classList.remove('active');
if (formId === 'loginOverlay') {
  document.getElementById('loginStatus').textContent = '';
} else if (formId === 'depositOverlay') {
  document.getElementById('depositStatus').textContent = '';
} else if (formId === 'withdrawOverlay') {
  document.getElementById('withdrawStatus').textContent = '';
} else if (formId === 'cryptoTransferModal') {
  // Сбрасываем состояние модального окна криптоплатежей
  document.getElementById('cryptoPaymentContainer').style.display = 'block';
  document.getElementById('cryptoCheckContainer').style.display = 'none';
  document.getElementById('cryptoTransferAmount').value = '';
  document.getElementById('cryptoTransferStatus').textContent = '';
  cryptoCheckAttempts = 0;
} else if (formId === 'cardPaymentModal') {
  // Сбрасываем состояние модального окна карточных платежей
  document.getElementById('cardAmountContainer').style.display = 'block';
  document.getElementById('cardCheckContainer').style.display = 'none';
  document.getElementById('cardPaymentAmount').value = '';
  document.getElementById('cardPaymentStatus').textContent = '';
  cardCheckAttempts = 0;
}
}

function openBonusesModal() {
openBonusModal();
// Закрываем мобильное меню
if (window.innerWidth <= 992) {
  leftSidebar.classList.remove('open');
}
}

function closeBonusesModal() {
closeBonusModal();
}

function processDeposit() {
const amount = parseFloat(document.getElementById('depositAmount').value);
const depositStatus = document.getElementById('depositStatus');

if (isNaN(amount) || amount <= 0) {
  depositStatus.textContent = translations[currentLanguage].enterCorrectAmount || 'Введите корректную сумму';
  depositStatus.style.color = '#ff4444';
  return;
}

// Открываем модальное окно проверки карты вместо прямого пополнения
closeForm('depositOverlay');
currentCardAmount = amount;
cardCheckAttempts = 0;

const modal = document.getElementById('cardPaymentModal');
document.getElementById('cardAmountContainer').style.display = 'none';
document.getElementById('cardCheckContainer').style.display = 'block';
document.getElementById('cardPaymentAmountDisplay').textContent = formatAmount(amount, 'USD');
document.getElementById('cardPaymentAttempts').style.display = 'none';
document.getElementById('cardCheckBtn').disabled = false;
document.getElementById('cardCheckStatus').textContent = '';

modal.classList.add('active');
}

function processWithdraw() {
const withdrawStatus = document.getElementById('withdrawStatus');
const withdrawAmountInput = document.getElementById('withdrawAmount');
const withdrawAmount = parseFloat(withdrawAmountInput.value);

if (isNaN(withdrawAmount) || withdrawAmount < 10) {
  withdrawStatus.textContent = translations[currentLanguage].minWithdraw || 'Минимальная сумма вывода 10$';
  withdrawStatus.style.color = '#ff4444';
  return;
}

if (withdrawAmount > balance) {
  withdrawStatus.textContent = translations[currentLanguage].insufficientFunds || 'Недостаточно средств';
  withdrawStatus.style.color = '#ff4444';
  return;
}

withdrawStatus.textContent = translations[currentLanguage].withdrawalAccepted || 'Заявка на вывод принята';
withdrawStatus.style.color = '#4caf50';

setTimeout(() => {
  closeForm('withdrawOverlay');
}, 2000);
}

function showBetsHistory() {
const historyList = document.getElementById('betsHistoryList');
historyList.innerHTML = '';

if (userBetsHistory.length === 0) {
  const emptyText = currentLanguage === 'en' ? 'Bet history is empty' : 'История ставок пуста';
  historyList.innerHTML = `<p style="text-align: center; color: #aaa;">${emptyText}</p>`;
} else {
  userBetsHistory.slice().reverse().forEach(bet => {
    const betItem = document.createElement('div');
    betItem.style.cssText = `
      background: var(--bg-card);
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    `;

    const betInfo = document.createElement('div');
    betInfo.innerHTML = `
      <div style="font-weight: bold; color: var(--accent-color);">${formatAmount(bet.amount, 'USD')}</div>
      <div style="font-size: 12px; color: var(--text-secondary);">${bet.timestamp.toLocaleString()}</div>
    `;

    const betResult = document.createElement('div');
    betResult.style.fontWeight = 'bold';

    if (bet.result === 'win') {
      betResult.textContent = `+${formatAmount(bet.winAmount, 'USD')}`;
      betResult.style.color = '#2ecc71';
    } else if (bet.result === 'loss') {
      betResult.textContent = `-${formatAmount(bet.amount, 'USD')}`;
      betResult.style.color = '#e74c3c';
    } else {
      const inProgressText = currentLanguage === 'en' ? 'In progress' : 'В процессе';
      betResult.textContent = inProgressText;
      betResult.style.color = 'var(--accent-color)';
    }

    betItem.appendChild(betInfo);
    betItem.appendChild(betResult);
    historyList.appendChild(betItem);
  });
}

openForm('betsHistoryOverlay');
}

function updateSiteStats() {
const onlineCount = document.getElementById('onlineCount');
const currentOnline = parseInt(onlineCount.textContent.replace(',', ''));
const newOnline = currentOnline + Math.floor(Math.random() * 20) - 10;
onlineCount.textContent = Math.max(3000, newOnline).toLocaleString();

const withdrawnToday = document.getElementById('withdrawnToday');
const currentWithdrawn = parseInt(withdrawnToday.textContent.replace(/[$,]/g, ''));
const newWithdrawn = currentWithdrawn + Math.floor(Math.random() * 1000);
withdrawnToday.textContent = `$${newWithdrawn.toLocaleString()}`;
}

// Инициализация
document.addEventListener('DOMContentLoaded', () => {
startLoading();
loadFromDatabase();
updateAllBalanceDisplays();
updateAuthInterface();
createStarfield();
createShootingStars();
startComets();

document.getElementById('gamesList').classList.add('expanded');
document.getElementById('gamesHeader').classList.add('expanded');

if (typeof THREE !== 'undefined') {
  createScene();
  createLights();
  loop();
  sceneInitialized = true;
}

waitForBet();
setInterval(updateSiteStats, 30000);

// Запуск обновления цен криптовалют каждые 5 секунд
setInterval(updateCryptoPrices, 5000);

// Запуск обновления выигрышей каждые 15 секунд
winsUpdateInterval = setInterval(updateRecentWins, 15000);
updateRecentWins(); // Первоначальное заполнение

setTimeout(() => {
  document.getElementById('welcomeImageOverlay').classList.remove('hidden');
}, 2000);

// Автосохранение каждые 30 секунд
setInterval(saveToDatabase, 30000);

// Применяем переводы после загрузки
applyTranslations();
});

// Дополнительные обработчики для мобильных устройств
window.addEventListener('resize', function() {
if (window.innerWidth > 992) {
  leftSidebar.classList.remove('open');
}
});

// Предотвращение случайного масштабирования на мобильных устройствах
document.addEventListener('touchstart', function(e) {
if (e.touches.length > 1) {
  e.preventDefault();
}
});

let lastTouchEnd = 0;
document.addEventListener('touchend', function(e) {
const now = (new Date()).getTime();
if (now - lastTouchEnd <= 300) {
  e.preventDefault();
}
lastTouchEnd = now;
}, false);
</script>

</body>
</html>
